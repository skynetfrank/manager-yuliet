import{r as o,j as e,R as _e}from"./react-DOKUib4L.js";import{R as Ys}from"./react-dom-BITIQLb-.js";import{L as Q,O as We,N as $s,u as ae,a as Je,b as Se,c as Hs,d as Ks,R as Zs,e as V}from"./react-router-BxJrM2TX.js";import{a as Y,c as de,P as Xs}from"./react-redux-C2QVzL3I.js";import{a as Ce}from"./axios-xsH4HHeE.js";import{d as W}from"./dayjs-zjxybqXZ.js";import{c as Ws,a as Oe,f as Le,b as Js,s as ea}from"./@reduxjs-DExfEvEv.js";import{C as es,U as J,S as sa,P as aa,L as ze,M as Ne,a as Ee,E as fe,b as ce,F as ss,c as Pe,d as Ue,T as ra,e as na,B as ta,f as oa,g as ia,h as la,i as as,j as ca,k as da,l as ua,m as ma,n as ha,o as pa,p as xa,q as ga,r as ja,s as Ea,t as rs,u as De,v as ns,w as we,x as ts,y as Ye,z as os,A as fa,D as Sa,G as is,H as ls,I as Ca,J as Na,K as va,N as Ra,O as $e,Q as Aa,W as ba,R as Ta,X as He,V as ya,Y as Ke,Z as Ia,_ as _a,$ as Da,a0 as q,a1 as je,a2 as Oa,a3 as cs,a4 as La,a5 as Pa,a6 as Ua,a7 as wa,a8 as Re,a9 as Ae,aa as Fa}from"./lucide-react-B-lT9myM.js";import{S as b}from"./sweetalert2-9Qm2jZ7z.js";import{C as ds}from"./compressorjs-C46f8uP2.js";import{u as ka,f as xe,g as Ma,a as Ba,b as Ga,c as Va,d as Qa,e as qa}from"./@tanstack-C1bE7405.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./use-sync-external-store-ruIS0Fp4.js";import"./redux-BXkGT1VS.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./@standard-schema-DjkmAgHD.js";import"./reselect-utOO-l3Z.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const j of t)if(j.type==="childList")for(const m of j.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function n(t){const j={};return t.integrity&&(j.integrity=t.integrity),t.referrerPolicy&&(j.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?j.credentials="include":t.crossOrigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function i(t){if(t.ep)return;t.ep=!0;const j=n(t);fetch(t.href,j)}})();const us="USER_REGISTER_REQUEST",ms="USER_REGISTER_SUCCESS",hs="USER_REGISTER_FAIL",za="USER_REGISTER_RESET",ps="USER_SIGNIN_REQUEST",Fe="USER_SIGNIN_SUCCESS",xs="USER_SIGNIN_FAIL",gs="USER_SIGNIN_RESET",js="USER_SIGNOUT",Es="USER_DETAILS_REQUEST",fs="USER_DETAILS_SUCCESS",Ss="USER_DETAILS_FAIL",Ya="USER_DETAILS_RESET",$a="USER_LIST_REQUEST",Ha="USER_LIST_SUCCESS",Ka="USER_LIST_FAIL",Cs="USER_UPDATE_PROFILE_REQUEST",Ns="USER_UPDATE_PROFILE_SUCCESS",vs="USER_UPDATE_PROFILE_FAIL",ge="USER_UPDATE_PROFILE_RESET",Za="USER_UPDATE_REQUEST",Xa="USER_UPDATE_SUCCESS",Wa="USER_UPDATE_FAIL",Ja="USER_UPDATE_RESET",er=(a,s,n,i,t,j)=>async m=>{m({type:us,payload:{email:s,password:t}});try{const{data:h}=await Ce.post("/api/users/register",{nombre:a,email:s,apellido:n,cedula:i,password:t,telefono:j});m({type:ms,payload:h}),m({type:Fe,payload:h}),localStorage.setItem("userInfo",JSON.stringify(h))}catch(h){m({type:hs,payload:h.response&&h.response.data.message?h.response.data.message:h.message})}},sr=(a,s)=>async n=>{n({type:ps,payload:{email:a,password:s}});try{const{data:i}=await Ce.post("/api/users/signin",{email:a,password:s});n({type:Fe,payload:i}),localStorage.setItem("userInfo",JSON.stringify(i))}catch(i){n({type:xs,payload:i.response&&i.response.data.message?i.response.data.message:i.message})}},ar=()=>a=>{localStorage.removeItem("userInfo"),localStorage.removeItem("cartItems"),localStorage.removeItem("shippingAddress"),a({type:js}),document.location.href="/signin"},rr=a=>async(s,n)=>{s({type:Es,payload:a});const{userSignin:{userInfo:i}}=n();try{const{data:t}=await Ce.get(`/api/users/${a}`,{headers:{Authorization:`Bearer ${i.token}`}});s({type:fs,payload:t})}catch(t){const j=t.response&&t.response.data.message?t.response.data.message:t.message;s({type:Ss,payload:j})}},nr=a=>async(s,n)=>{s({type:Cs,payload:a});const{userSignin:{userInfo:i}}=n();try{const{data:t}=await Ce.put("/api/users/profile",a,{headers:{Authorization:`Bearer ${i.token}`}});s({type:Ns,payload:t}),s({type:Fe,payload:t}),localStorage.setItem("userInfo",JSON.stringify(t))}catch(t){const j=t.response&&t.response.data.message?t.response.data.message:t.message;s({type:vs,payload:j})}},Ze="/assets/logo2-tAg73i7j.png",Rs=Ws({name:"splash",initialState:{isVisible:sessionStorage.getItem("splashShown")!=="true"},reducers:{hideSplash:a=>{a.isVisible=!1,sessionStorage.setItem("splashShown","true")}}}),{hideSplash:tr}=Rs.actions,or=Rs.reducer,ir=()=>{const a=Y(j=>j.splash.isVisible),s=de(),[n,i]=o.useState(!1);if(o.useEffect(()=>{if(a){const m=setTimeout(()=>{i(!0),setTimeout(()=>{s(tr())},500)},2500);return()=>clearTimeout(m)}},[a,s]),!a)return null;const t=`splash-screen splash-screen-fade-in ${n?"splash-screen-fade-out":""}`;return e.jsxs("div",{className:t,children:[e.jsx("img",{src:"/logosplash.jpg",alt:"Logo Manager Demoda",className:"splash-logo"}),e.jsx("h1",{className:"splash-text",children:"MANAGER"})]})};function lr(){const[a]=o.useState(new Date),s=Y(u=>u.userSignin),n=Y(u=>u.splash.isVisible),{userInfo:i}=s,t=de(),[j,m]=o.useState(!1),h=o.useRef(null),c=()=>{t(ar()),m(!1)};return o.useEffect(()=>{const u=x=>{h.current&&!h.current.contains(x.target)&&m(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[h]),n?e.jsx(ir,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid-container",children:[e.jsxs("header",{className:"app-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx(Q,{to:"/",children:e.jsx("img",{className:"img-logo",src:Ze,alt:"logo"})}),e.jsxs("div",{className:"header-title-group",children:[e.jsx("h2",{className:"title-manager",children:"YULIET-APP"}),e.jsxs("span",{className:"negrita font-1 header-date",children:["caracas, ",W(a.toISOString()).format("DD-MM-YYYY")]})]})]}),e.jsx("div",{className:"header-right",children:i?e.jsxs("div",{className:"user-menu",ref:h,children:[e.jsxs("button",{className:"user-menu-trigger",onClick:()=>m(!j),children:[e.jsx("span",{children:(i==null?void 0:i.nombre)&&i.nombre.substring(0,10)}),e.jsx(es,{size:16,className:`chevron-icon ${j?"open":""}`})]}),j&&e.jsxs("div",{className:"user-dropdown",children:[e.jsxs(Q,{to:"/profile",className:"dropdown-item",onClick:()=>m(!1),children:[e.jsx(J,{size:16}),e.jsx("span",{children:"Mi Perfil"})]}),i.isAdmin&&e.jsxs(Q,{to:"/admin-menu",className:"dropdown-item",onClick:()=>m(!1),children:[e.jsx(sa,{size:16}),e.jsx("span",{children:"Admin"})]}),e.jsxs("button",{onClick:c,className:"dropdown-item signout",children:[e.jsx(aa,{size:16}),e.jsx("span",{children:"Cerrar Sesión"})]})]})]}):e.jsxs(Q,{to:"/signin",className:"header-login-button",children:[e.jsx(ze,{size:18}),e.jsx("span",{children:"Iniciar Sesión"})]})})]}),e.jsx("main",{children:e.jsx(We,{})}),e.jsx("footer",{className:"app-footer",children:e.jsxs("span",{children:["© ",new Date().getFullYear()," D'moda-Manager. Todos los derechos reservados."]})})]})})}const be=Oe({reducerPath:"productApi",baseQuery:Le({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const n=s().userSignin.userInfo.token;return n&&a.set("Authorization",`Bearer ${n}`),a}}),tagTypes:["Product"],endpoints:a=>({getProducts:a.query({query:()=>"/productos",providesTags:["Product"]}),getProduct:a.query({query:s=>`/productos/buscarporcodigo/${s}`}),addProduct:a.mutation({query:s=>({url:"/productos",method:"POST",body:s}),invalidatesTags:["Product"]}),updateProduct:a.mutation({query:s=>({url:`/productos/${s._id}`,method:"PUT",body:s}),invalidatesTags:["Product"]}),deleteProduct:a.mutation({query:s=>({url:`/productos/${s}`,method:"DELETE"}),invalidatesTags:["Product"]})})}),{useGetProductsQuery:As,useGetProductQuery:cr,useAddProductMutation:dr,useUpdateProductMutation:ur,useDeleteProductMutation:mr,useLazyGetProductQuery:hr}=be,Te=Oe({reducerPath:"clienteApi",baseQuery:Le({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const n=s().userSignin.userInfo.token;return n&&a.set("Authorization",`Bearer ${n}`),a}}),tagTypes:["Cliente"],endpoints:a=>({getClientes:a.query({query:()=>"/clientes",providesTags:s=>s?[...s.map(({_id:n})=>({type:"Cliente",id:n})),{type:"Cliente",id:"LIST"}]:[{type:"Cliente",id:"LIST"}]}),getCliente:a.query({query:s=>`/clientes/${s}`,providesTags:(s,n,i)=>[{type:"Cliente",id:i}]}),registerCliente:a.mutation({query:s=>({url:"/clientes/register",method:"POST",body:s}),invalidatesTags:[{type:"Cliente",id:"LIST"}]}),updateCliente:a.mutation({query:({id:s,...n})=>({url:`/clientes/${s}`,method:"PUT",body:n}),invalidatesTags:(s,n,{id:i})=>[{type:"Cliente",id:i},{type:"Cliente",id:"LIST"}]}),getClienteByRif:a.query({query:s=>`/clientes/rif/${s}`}),deleteCliente:a.mutation({query:s=>({url:`/clientes/${s}`,method:"DELETE"}),invalidatesTags:(s,n,i)=>[{type:"Cliente",id:i}]})})}),{useGetClientesQuery:bs,useGetClienteQuery:pr,useRegisterClienteMutation:Ts,useDeleteClienteMutation:xr,useUpdateClienteMutation:gr,useLazyGetClienteByRifQuery:ys}=Te,jr="PRODUCT_CREATE_REQUEST",Er="PRODUCT_CREATE_SUCCESS",fr="PRODUCT_CREATE_FAIL",Sr="PRODUCT_CREATE_RESET",Cr="PRODUCT_LIST_REQUEST",Nr="PRODUCT_LIST_SUCCESS",vr="PRODUCT_LIST_FAIL",Rr="PRODUCT_LIST_RESET",Is="PRODUCT_DETAILS_REQUEST",_s="PRODUCT_DETAILS_SUCCESS",Ds="PRODUCT_DETAILS_FAIL",Ar="PRODUCT_ALL_REQUEST",br="PRODUCT_ALL_SUCCESS",Tr="PRODUCT_ALL_FAIL",yr="PRODUCT_CARGASTOCK_REQUEST",Ir="PRODUCT_CARGASTOCK_SUCCESS",_r="PRODUCT_CARGASTOCK_FAIL",Dr="PRODUCT_CARCGASTOCK_RESET",Or=(a={},s)=>{switch(s.type){case jr:return{loading:!0};case Er:return{loading:!1,success:!0,product:s.payload};case fr:return{loading:!1,error:s.payload};case Sr:return{};default:return a}},Lr=(a={loading:!0,productos:[]},s)=>{switch(s.type){case Cr:return{loading:!0};case Nr:return{loading:!1,productos:s.payload.productos};case vr:return{loading:!1,error:s.payload};case Rr:return{};default:return a}},Pr=(a={loading:!0},s)=>{switch(s.type){case Is:return{loading:!0};case _s:return{loading:!1,product:s.payload};case Ds:return{loading:!1,error:s.payload};default:return a}},Ur=(a={productos:[]},s)=>{switch(s.type){case Ar:return{loading:!0};case br:return{loading:!1,productos:s.payload.productos,unidades:s.payload.unidades,valor:s.payload.valor,categorias:s.payload.categorias,stockAG:s.payload.myStockAG[0].totalStockAG,stockAG3:s.payload.myStockAG3[0].totalStockAG3,stockDM2:s.payload.myStockDM2[0].totalStockDM2,stockDM3:s.payload.myStockDM3[0].totalStockDM3,stockDM:s.payload.myStockDM[0].totalStockDM,stockA:s.payload.myStockA[0].totalStockA,stockXZ:s.payload.myStockXZ[0].totalStockXZ,stockXZ3:s.payload.myStockXZ3[0].totalStockXZ3,textil:s.payload.textiles[0].totalTextil};case Tr:return{loading:!1,error:s.payload};default:return a}},wr=(a={},s)=>{switch(s.type){case yr:return{loading:!0};case Ir:return{loading:!1,success:!0,procesados:s.payload.procesados};case _r:return{loading:!1,error:s.payload};case Dr:return{};default:return a}},Fr=(a={},s)=>{switch(s.type){case us:return{loading:!0};case ms:return{loading:!1,userInfo:s.payload};case hs:return{loading:!1,error:s.payload};default:return a}},kr=(a={},s)=>{switch(s.type){case ps:return{loading:!0};case Fe:return{loading:!1,userInfo:s.payload};case xs:return{loading:!1,error:s.payload};case js:return{};case gs:return{};default:return a}},Mr=(a={loading:!0},s)=>{switch(s.type){case Es:return{loading:!0};case fs:return{loading:!1,user:s.payload};case Ss:return{loading:!1,error:s.payload};case Ya:return{loading:!0};default:return a}},Br=(a={},s)=>{switch(s.type){case Cs:return{loading:!0};case Ns:return{loading:!1,success:!0};case vs:return{loading:!1,error:s.payload};case ge:return{};default:return a}},Gr=(a={},s)=>{switch(s.type){case Za:return{loading:!0};case Xa:return{loading:!1,success:!0};case Wa:return{loading:!1,error:s.payload};case Ja:return{};default:return a}},Vr=(a={loading:!0,users:[]},s)=>{switch(s.type){case $a:return{loading:!0};case Ha:return{loading:!1,vendedores:s.payload};case Ka:return{loading:!1,error:s.payload};default:return a}},Qr="ORDER_CREATE_REQUEST",qr="ORDER_CREATE_SUCCESS",zr="ORDER_CREATE_FAIL",Yr="ORDER_CREATE_RESET",$r="ORDER_DETAILS_REQUEST",Hr="ORDER_DETAILS_SUCCESS",Kr="ORDER_DETAILS_FAIL",Zr="ORDER_DELETE_REQUEST",Xr="ORDER_DELETE_SUCCESS",Wr="ORDER_DELETE_FAIL",Jr="ORDER_DELETE_RESET",en="ORDER_SUMMARY_REQUEST",sn="ORDER_SUMMARY_SUCCESS",an="ORDER_SUMMARY_FAIL",rn="ORDER_ALL_REQUEST",nn="ORDER_ALL_SUCCESS",tn="ORDER_ALL_FAIL",on="GROUPBYDAY_REQUEST",ln="GROUPBYDAY_SUCCESS",cn="GROUPBYDAY_FAIL",dn="CUADREDIA_REQUEST",un="CUADREDIA_SUCCESS",mn="CUADREDIA_FAIL",hn="ORDER_WEEKLY_REQUEST",pn="ORDER_WEEKLY_SUCCESS",xn="ORDER_WEEKLY_FAIL",gn="ORDER_LIST_REQUEST",jn="ORDER_LIST_SUCCESS",En="ORDER_LIST_FAIL",fn="ORDER_CONSOLIDADO_REQUEST",Sn="ORDER_CONSOLIDADO_SUCCESS",Cn="ORDER_CONSOLIDADO_FAIL",Nn="ARTICULO_CONSOLIDADO_REQUEST",vn="ARTICULO_CONSOLIDADO_SUCCESS",Rn="ARTICULO_CONSOLIDADO_FAIL",An=(a={},s)=>{switch(s.type){case Qr:return{loading:!0};case qr:return{loading:!1,success:!0,order:s.payload};case zr:return{loading:!1,error:s.payload};case Yr:return{};default:return a}},bn=(a={loading:!0},s)=>{switch(s.type){case $r:return{loading:!0};case Hr:return{loading:!1,order:s.payload};case Kr:return{loading:!1,error:s.payload};default:return a}},Tn=(a={},s)=>{switch(s.type){case Zr:return{loading:!0};case Xr:return{loading:!1,success:!0};case Wr:return{loading:!1,error:s.payload};case Jr:return{};default:return a}},yn=(a={loading:!0,summary:{}},s)=>{switch(s.type){case en:return{loading:!0};case sn:return{loading:!1,summary:s.payload};case an:return{loading:!1,error:s.payload};default:return a}},In=(a={cashea:[]},s)=>{switch(s.type){case rn:return{loading:!0};case nn:return{loading:!1,orders:s.payload.cashea,resumen:s.payload.resumenCashea[0]};case tn:return{loading:!1,error:s.payload};default:return a}},_n=(a={loading:!0,dailyOrders:{}},s)=>{switch(s.type){case on:return{loading:!0};case ln:return{loading:!1,dailyOrders:s.payload};case cn:return{loading:!1,error:s.payload};default:return a}},Dn=(a={orders:[],cash:{},puntoPlaza:[],puntoVenezuela:[],puntoBanesco:[]},s)=>{switch(s.type){case dn:return{loading:!0};case un:return{loading:!1,orders:s.payload.orders,cash:s.payload.cash[0],puntoPlaza:s.payload.puntoPlaza,puntoVenezuela:s.payload.puntoVenezuela,puntoBanesco:s.payload.puntoBanesco};case mn:return{loading:!1,error:s.payload};default:return a}},On=(a={orders:[]},s)=>{switch(s.type){case hn:return{loading:!0};case pn:return{loading:!1,orders:s.payload.orders};case xn:return{loading:!1,error:s.payload};default:return a}},Ln=(a={orders:[]},s)=>{switch(s.type){case gn:return{loading:!0};case jn:return{loading:!1,orders:s.payload.orders};case En:return{loading:!1,error:s.payload};default:return a}},Pn=(a={ventasGlobales:[]},s)=>{switch(s.type){case fn:return{loading:!0};case Sn:return{loading:!1,ventasGlobales:s.payload.ventasGlobales};case Cn:return{loading:!1,error:s.payload};default:return a}},Un=(a={ventasGlobales:[]},s)=>{switch(s.type){case Nn:return{loading:!0};case vn:return{loading:!1,ventasGlobales:s.payload.ventasGlobales};case Rn:return{loading:!1,error:s.payload};default:return a}},wn="CLIENTE_REGISTER_REQUEST",Fn="CLIENTE_REGISTER_SUCCESS",kn="CLIENTE_REGISTER_FAIL",Mn="CLIENTE_REGISTER_RESET",Bn="CLIENTE_DETAILS_REQUEST",Gn="CLIENTE_DETAILS_SUCCESS",Vn="CLIENTE_DETAILS_FAIL",Qn="CLIENTE_DETAILS_RESET",qn="CLIENTE_LIST_REQUEST",zn="CLIENTE_LIST_SUCCESS",Yn="CLIENTE_LIST_FAIL",$n="CLIENTE_LIST_RESET",Hn="CLIENTE_UPDATE_PROFILE_REQUEST",Kn="CLIENTE_UPDATE_PROFILE_SUCCESS",Zn="CLIENTE_UPDATE_PROFILE_FAIL",Xn="CLIENTE_UPDATE_PROFILE_RESET",Wn=(a={loading:!0},s)=>{switch(s.type){case wn:return{loading:!0};case Fn:return{loading:!1,cliente:s.payload};case kn:return{loading:!1,error:s.payload};case Mn:return{};default:return a}},Jn=(a={loading:!0},s)=>{switch(s.type){case Bn:return{loading:!0};case Gn:return{loading:!1,cliente:s.payload};case Vn:return{loading:!1,error:s.payload};case Qn:return{};default:return a}},et=(a={},s)=>{switch(s.type){case Hn:return{loading:!0};case Kn:return{loading:!1,success:!0};case Zn:return{loading:!1,error:s.payload};case Xn:return{};default:return a}},st=(a={clientes:[]},s)=>{switch(s.type){case qn:return{loading:!0};case zn:return{loading:!1,clientes:s.payload.clientes};case Yn:return{loading:!1,error:s.payload};case $n:return{};default:return a}},at="REPOSICION_CREATE_REQUEST",rt="REPOSICION_CREATE_SUCCESS",nt="REPOSICION_CREATE_FAIL",tt="REPOSICION_CREATE_RESET",ot="REPOSICION_DETAILS_REQUEST",it="REPOSICION_DETAILS_SUCCESS",lt="REPOSICION_DETAILS_FAIL",ct="REPOSICION_LIST_REQUEST",dt="REPOSICION_LIST_SUCCESS",ut="REPOSICION_LIST_FAIL",mt="REPOSICION_DELETE_REQUEST",ht="REPOSICION_DELETE_SUCCESS",pt="REPOSICION_DELETE_FAIL",xt="REPOSICION_DELETE_RESET",gt="REPOSICION_UPDATE_STATUS_REQUEST",jt="REPOSICION_UPDATE_STATUS_SUCCESS",Et="REPOSICION_UPDATE_STATUS_FAIL",ft="REPOSICION_UPDATE_STATUS_RESET",St=(a={},s)=>{switch(s.type){case at:return{loading:!0};case rt:return console.log("action.payload.reposicion",s.payload.reposicion),{loading:!1,success:!0,reposicion:s.payload};case nt:return{loading:!1,error:s.payload};case tt:return{};default:return a}},Ct=(a={},s)=>{switch(s.type){case ot:return{loading:!0};case it:return{loading:!1,reposicion:s.payload.reposicion};case lt:return{loading:!1,error:s.payload};default:return a}},Nt=(a={reposiciones:[]},s)=>{switch(s.type){case ct:return{loading:!0};case dt:return{loading:!1,reposiciones:s.payload.reposiciones};case ut:return{loading:!1,error:s.payload};default:return a}},vt=(a={},s)=>{switch(s.type){case mt:return{loading:!0};case ht:return{loading:!1,success:!0};case pt:return{loading:!1,error:s.payload};case xt:return{};default:return a}},Rt=(a={},s)=>{switch(s.type){case gt:return{loading:!0};case jt:return{loading:!1,success:!0};case Et:return{loading:!1,error:s.payload};case ft:return{};default:return a}},ye=Oe({reducerPath:"usersApi",baseQuery:Le({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const n=s().userSignin.userInfo.token;return n&&a.set("authorization",`Bearer ${n}`),a}}),endpoints:a=>({getUsers:a.query({query:()=>"/users"}),getVendedores:a.query({query:()=>"/users/vendedores"}),getUser:a.query({query:s=>`/user/${s}`}),registerUser:a.mutation({query:(s,n,i,t,j,m,h)=>({url:"/users/register",method:"POST",body:{nombre:s,rif:n,email:i,celular:t,direccion:j,canal:m,timestamp:h}}),invalidatesTags:["Users"]})})}),{useGetVendedoresQuery:Os}=ye,Ie=Oe({reducerPath:"orderApi",baseQuery:Le({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const n=s().userSignin.userInfo.token;return n&&a.set("Authorization",`Bearer ${n}`),a}}),tagTypes:["Order"],endpoints:a=>({getOrders:a.query({query:()=>"/orders",providesTags:["Order"]}),getCambio:a.query({query:()=>"/orders/cambiobcv"}),getOrder:a.query({query:s=>`/orders/${s}`}),invalidatesTags:["Order"],createOrder:a.mutation({query:s=>({url:"/orders",method:"POST",body:s}),invalidatesTags:["Order"]}),deleteOrder:a.mutation({query:s=>({url:`/orders/${s}`,method:"DELETE"}),invalidatesTags:["Order"]})})}),{useGetOrdersQuery:At,useGetOrderQuery:Ls,useGetCambioQuery:Ps,useCreateOrderMutation:bt}=Ie,Tt={userSignin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Us=Js({reducer:{splash:or,userSignin:kr,userRegister:Fr,userDetails:Mr,userUpdateProfile:Br,userUpdate:Gr,userList:Vr,productCreate:Or,productList:Lr,productDetails:Pr,productAll:Ur,productCargaStock:wr,orderList:Ln,orderCreate:An,orderDetails:bn,orderDelete:Tn,orderSummary:yn,orderAll:In,cuadreDia:Dn,orderGroupDay:_n,weeklyOrdersReport:On,clienteDetails:Jn,clienteUpdateProfile:et,clienteList:st,clienteRegister:Wn,reposicionCreate:St,detailsReposicion:Ct,reposicionList:Nt,reposicionDelete:vt,reposicionUpdateStatus:Rt,consolidadoOrdersReport:Pn,consolidadoArticulosReport:Un,[be.reducerPath]:be.reducer,[Te.reducerPath]:Te.reducer,[ye.reducerPath]:ye.reducer,[Ie.reducerPath]:Ie.reducer},middleware:a=>a().concat(be.middleware,Te.middleware,ye.middleware,Ie.middleware),preloadedState:Tt});ea(Us.dispatch);const yt=()=>{const a=Y(n=>n.userSignin),{userInfo:s}=a;return s?e.jsx(We,{}):e.jsx($s,{to:"/signin"})},ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAANlBMVEVFRUVAQEA6Ojo1NTUxMTGFhYaVlZehoqOysrMkJCTh4eLr6+vU1NXExMVsbG1cXF0VFRVQUFASrDoiAAACRUlEQVR42rXT247rIAwFUNsY2+Hm+P9/9gBJm4w0mrezFRUVFhuqKpD+CN9J84HX9B8+MXy3XsPjn4U9CbsKAgLnAEi0F4kuiBFX1QW9t9YMeKiKSh5Os2RR0FI6Mm1IxN5KrUWYwof0UpoO2qW51donSfSCrY3jPM+Dcq+l50jErnOhE29IROlqbAYp8cRgrWv2hNluOLMgjwVr6znRTDpYuqoEivY6YbohfqGNRCtTqkhGD3lDSqO3qla7SRDhkiAiOu+sG+LdSAtmL8004/qOxEMnDf4NnrmZ6VgOMYWo6Ehayxcipg0Psv0Tlps466S0GvGCiHcjs3ebcjOiBRUWhL31BZHzhJYJkRzGgvErhESiYt2JXGNBc63lgXBDRA5VawakfUN9w5kbwpRjwiK59XgfDRviCxKJ9VKmPbLOoJbn6HcjsFtvs4VZphO+IGz4NM4g59ZKHWeYqY1jQ1wL68Eb7na0VvXg3E0V+QNx4Rsm2PdgL42OsG6zkC643bvxPnyB1rsy4wfCj8aPPDmX1gwO/MA7T+MOk9RaepwEX4hfWPJx/6EwrNZqcCaA5+gHWh4e4SNrm3XjmH3wa+M6zVTVTLMf54GwYa0LfuNXIgAT75f7uzCCH0fnKwcTLYcEgGtXgifhQBQwH4zdAwg+AgEj6GEYpuoknky8O2fVTGsuEFV/QKUsyYOmMEcjMAhlyeyr4Q1dMwFCFhEn86EYCjp2+euOkSXDypjx5Dp1iGTE7DEQniDSNc7sTwIkpHviP+UfbJwh+oK7LY4AAAAASUVORK5CYII=";function It(){const a=ae(),[s,n]=o.useState(""),[i,t]=o.useState(""),[j,m]=o.useState(!1),{search:h}=Je(),c=new URLSearchParams(h).get("redirect"),u=c||"/",x=Y(A=>A.userSignin),{userInfo:p,loading:l,error:d}=x,r=de(),C=A=>{A.preventDefault(),r(sr(s,i))};return o.useEffect(()=>{p&&a(u)},[a,u,p]),o.useEffect(()=>{if(d){const A=setTimeout(()=>{r({type:gs})},4e3);return()=>clearTimeout(A)}},[r,d]),e.jsx("div",{className:"signin-container",children:e.jsxs("form",{className:"signin-form",onSubmit:C,children:[e.jsx("img",{src:ne,alt:"Logo",className:"signin-logo"}),e.jsx("h2",{children:"Iniciar Sesión"}),e.jsxs("div",{className:"input-group",children:[e.jsx(Ne,{className:"input-icon"}),e.jsx("input",{type:"email",placeholder:"Ingrese su Email",required:!0,value:s,onChange:A=>n(A.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Ee,{className:"input-icon"}),e.jsx("input",{type:j?"text":"password",placeholder:"Ingrese su Clave",required:!0,value:i,onChange:A=>t(A.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>m(!j),children:j?e.jsx(fe,{}):e.jsx(ce,{})})]}),d&&e.jsx("p",{className:"signin-error",children:d}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:l,children:[l?e.jsx("div",{className:"spinner"}):e.jsx(ze,{}),e.jsx("span",{children:l?"Verificando...":"Entrar"})]})}),e.jsx("div",{className:"signin-footer",children:e.jsx(Q,{to:`/register?redirect=${u}`,children:"Crear Cuenta"})})]})})}function _t(){const a=ae(),[s,n]=o.useState(""),[i,t]=o.useState(""),[j,m]=o.useState(""),[h,c]=o.useState(""),[u,x]=o.useState(""),[p,l]=o.useState(""),[d,r]=o.useState(""),[C,A]=o.useState(!1),[N,f]=o.useState(!1),[y,S]=o.useState(null),{search:O}=Je(),k=new URLSearchParams(O).get("redirect"),w=k||"/",M=Y(g=>g.userRegister),{userInfo:F,loading:R,error:P}=M,E=de(),_=g=>{g.preventDefault(),p!==d?S("Las contraseñas no coinciden"):(S(null),E(er(s,h,i,j,p,u)))};return o.useEffect(()=>{F&&a(w)},[a,w,F]),o.useEffect(()=>{if(P){const g=setTimeout(()=>{E({type:za})},4e3);return()=>clearTimeout(g)}},[E,P]),e.jsx("div",{className:"signin-container",children:e.jsxs("form",{className:"signin-form",onSubmit:_,style:{gap:"1rem"},children:[e.jsx("img",{src:ne,alt:"Logo",className:"signin-logo"}),e.jsx("h2",{children:"Crear Cuenta"}),e.jsxs("div",{className:"input-group",children:[e.jsx(J,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Nombre",required:!0,value:s,onChange:g=>n(g.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(J,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Apellido",required:!0,value:i,onChange:g=>t(g.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Ne,{className:"input-icon"}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,value:h,onChange:g=>c(g.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Ee,{className:"input-icon"}),e.jsx("input",{type:C?"text":"password",placeholder:"Clave",required:!0,value:p,onChange:g=>l(g.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>A(!C),children:C?e.jsx(fe,{}):e.jsx(ce,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Ee,{className:"input-icon"}),e.jsx("input",{type:N?"text":"password",placeholder:"Confirmar Clave",required:!0,value:d,onChange:g=>r(g.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>f(!N),children:N?e.jsx(fe,{}):e.jsx(ce,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(ss,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Cédula",required:!0,value:j,onChange:g=>m(g.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Pe,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Teléfono",required:!0,value:u,onChange:g=>x(g.target.value)})]}),(P||y)&&e.jsx("p",{className:"signin-error",children:P||y}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:R,children:[R?e.jsx("div",{className:"spinner"}):e.jsx(ze,{}),e.jsx("span",{children:R?"Registrando...":"Registrar"})]})}),e.jsxs("div",{className:"signin-footer",children:[e.jsx("span",{children:"¿Ya tienes una cuenta? "}),e.jsx(Q,{to:`/signin?redirect=${w}`,children:"Inicia Sesión"})]})]})})}function Dt(){const[a,s]=o.useState(""),[n,i]=o.useState(""),[t,j]=o.useState(""),[m,h]=o.useState(""),[c,u]=o.useState(""),[x,p]=o.useState(""),[l,d]=o.useState(""),[r,C]=o.useState(!1),[A,N]=o.useState(!1),[f,y]=o.useState(null),S=Y(I=>I.userSignin),{userInfo:O}=S,k=Y(I=>I.userDetails),{loading:w,error:M,user:F}=k,R=Y(I=>I.userUpdateProfile),{success:P,error:E,loading:_}=R,g=de();o.useEffect(()=>{F?(s(F.nombre||" "),i(F.email||" "),u(F.apellido||" "),p(F.cedula||" "),d(F.telefono||" ")):(g({type:ge}),g(rr(O._id)))},[g,O._id,F,P]);const D=I=>{I.preventDefault(),t!==m?y("Las contraseñas no coinciden"):(y(null),g(nr({userId:F._id,nombre:a,email:n,password:t,apellido:c,cedula:x,telefono:l})))};return o.useEffect(()=>{P&&(b.fire({title:"Datos Actualizado con Exito!",text:"Editar Perfil",imageUrl:ne,imageWidth:70,imageHeight:70,imageAlt:"logo"}),g({type:ge}))},[g,P]),o.useEffect(()=>{E&&(b.fire({title:"error",text:"Editar Perfil",imageUrl:ne,imageWidth:70,imageHeight:70,imageAlt:"logo"}),g({type:ge}))},[g,E]),o.useEffect(()=>{M&&(b.fire("Ocurrio un Error al Actualizar!","",M),g({type:ge}))},[g,M]),e.jsx("div",{className:"signin-container",children:e.jsxs("form",{className:"signin-form",onSubmit:D,style:{gap:"1rem"},children:[e.jsx("img",{src:ne,alt:"Logo",className:"signin-logo"}),e.jsx("h2",{children:"Perfil de Usuario"}),w?e.jsx("p",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx(J,{className:"input-icon"}),e.jsx("input",{id:"nombre",type:"text",placeholder:"Nombre",value:a,onChange:I=>s(I.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(J,{className:"input-icon"}),e.jsx("input",{id:"apellido",type:"text",placeholder:"Apellido",value:c,onChange:I=>u(I.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Ne,{className:"input-icon"}),e.jsx("input",{id:"email",type:"email",placeholder:"Email",value:n,onChange:I=>i(I.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Ee,{className:"input-icon"}),e.jsx("input",{id:"password",type:r?"text":"password",placeholder:"Nueva clave (opcional)",onChange:I=>j(I.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>C(!r),children:r?e.jsx(fe,{}):e.jsx(ce,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Ee,{className:"input-icon"}),e.jsx("input",{id:"confirmPassword",type:A?"text":"password",placeholder:"Confirmar nueva clave",onChange:I=>h(I.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>N(!A),children:A?e.jsx(fe,{}):e.jsx(ce,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(ss,{className:"input-icon"}),e.jsx("input",{id:"cedula",type:"text",placeholder:"Cédula",value:x,onChange:I=>p(I.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Pe,{className:"input-icon"}),e.jsx("input",{id:"telefono",type:"text",placeholder:"Teléfono",value:l,onChange:I=>d(I.target.value)})]}),(E||f)&&e.jsx("p",{className:"signin-error",children:E||f}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:_,children:[_?e.jsx("div",{className:"spinner"}):e.jsx(Ue,{}),e.jsx("span",{children:_?"Actualizando...":"Actualizar Perfil"})]})})]})]})})}const Ot="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAYGBgYGBgYHBwYJCgkKCQ0MCwsMDRQODw4PDhQfExYTExYTHxshGxkbIRsxJiIiJjE4Ly0vOEQ9PURWUVZwcJYBBgYGBgYGBgcHBgkKCQoJDQwLCwwNFA4PDg8OFB8TFhMTFhMfGyEbGRshGzEmIiImMTgvLS84RD09RFZRVnBwlv/CABEIAB4AZAMBEQACEQEDEQH/xAAbAAACAgMBAAAAAAAAAAAAAAAABQQHAwYIAv/aAAgBAQAAAACwap93q+AxZQOVd85s6LfsYDKubDE+/wDOliIJb+ZFhuteawN1wVj7upyAAH//xAAbAQAABwEAAAAAAAAAAAAAAAAAAQIDBQYHBP/aAAgBAhAAAADBroWbwwMOsgK2+6jK45h5NhrZ9dQ1q5nl/Aw/0w83yPVdV3Tm8UCCkGB//8QAGQEAAgMBAAAAAAAAAAAAAAAAAAECAwQF/9oACAEDEAAAAOpmNliABnMzrfMTquiTx0LdMSsqZOeU22kWCD//xAA0EAABBAEDAwIDBAsBAAAAAAACAQMEBQYAERIHEzEhQTJRYRQgIuIWIyQwQlJVVmJyk5T/2gAIAQEAAT8AznPoeGtR2/s6yZr6KTbPLiIgnpzNdL1yt/6HB/6npvrla8x7lDEUPdBeNNY3kMDKKlizhckA1UTAvibMfIF91l9mQHcZeBwN1TkBISbp59U+71jFx3M2Gw9SKBHEE+pEWsmZxPpdi40iVITLizgPA5JUR5DyHirnIvAovwimkZdVtXEaNQTyaCvFNvr410amMwcYyOVJc4MMSldcL5CDW66jZhm8+MxcxMNbdqXSEmmkf/bTZJdkcQfGrLLL6TeSqTGKZiQ9DaA5z8t1W2mVcTcWk4eS1WdQrIyzIbag+yu0cQHXGAc5kZKiqvr446xLJMmvjjPy6utWBIj90ZEOX3FZX2bdFf4tYbf5dUYUcutoIj9fBfluPm8+ouuijikfaEfYdWmdn28eYpITUidbREltDJd7LTDG26m6WqfNn0mWdbkUaLGlRIRTkdiu96O9HD4lH5EOkzfNXal7I2MQjrUdo3mgWRtLVlPDqprGrdy9oKm1dZFo5UcXSAfVB311k7jWZMODuKpAYIC+okWpE3AurVXWO210NVbxG+LiE4Df++3c9CDWbZNiuPYb+g+Ky0lo6W8uQhc0+LmW5+5nrpFXN2mJZPBfQuzLkGwS/Q2dQYfU+sgxKCM3UqzHQGWrUzVVRgPmz7ltqZTZZQ5FZ3OPMRJ7NmDKzIr7nYUHmU4o4C6ocdzSLZZpazzrUm2cZhI+25sAYIqcCHzxHWO4nfN5XXXL1FXUrbDLoyxhP8xnEabfAPoKaoMXta7p9YUL4NfbHWZ4iiHuG76lw9dWXT2wdrsPljAgTplZWhDkwZRfqXh/wP2IV1j2GG4Nytli1RUtyobkRsIZK6+gupsakfjQVXUxihcxdtiqJgIpRW7NXVQlY22RO3/PrGa65pcco602o3djwwbd3Pf8aazPBq3MWGO+6ceUzujMgE5ei+RJPcdL0Jc/uUP/AC/n0HQpeY9zJfw+/GL+fVDRV+N1ketgNqLTe67l6kZF5Il+a/uv/8QALxEAAQMDAgQDBwUAAAAAAAAAAQIDBAAFEQYSISIxQRMUUQcQFWFicXIWF1KBkv/aAAgBAgEBPwDTel3b4pbil7Gk96/b6CMDzJ/zS/Z9EAOJZ3duWrzaXrPMLLp+yvWsj0ofM0ewoBSjgDiadYeYOHEEH0rBPQUcjANdDkUEk960OB8GZ/JVEgHOKGDndWt4rk2421ltOVLyBT2n7BHUuC9dNkoDidnKDUTT9rYhIm3OYUIdJDaUpyTjhmpWlIebX5SZuRLWobyMAAVdrFards8KS54yFoBSpGAqrva7NPuaGpMtSZDrbYSkJyByjrUPSaUvTFzXylmOvbypyVE1cNKoUI8i3OKW04vYQoYUk1+mrEiSm3LuJ8335OXNXu3ot1ykxULylCsA1oU5szYPZSqG3JHrWR1FaymqgXW2SEkbm8mpUrSk19c95xzxFpyWR/L8qYudluVtZh3BxTKo5PhrA3ZSTmp93sKmbRGaWsssLXu7HBq5agtS7a5HTLXJUpSNm9OCgA1MvUJ7UUachavBSG8nHHlABqPq2EJdxbU+tpl5e5t5I4p/qrnqdpsQ/LXB2SptzcorG1Py4V8Q0w7PTdFPrDp4qZx3+9XuVb7hc5UlLqtq1ZHCrBqWRZVLSEb2lYyijr8YQn4ecH66e17tQoiAcj66vF0kXWUZDx4noPSupFK4GgeOfcQdqTms1193D0r/xAAlEQACAgEDAwQDAAAAAAAAAAAAAQIDEQQhMRIiURATFEEyQnH/2gAIAQMBAT8AtuVZ8pi1bK5qxHP2cng8iacdj8Uf1G/36arPUbJDwad4TPdue8YdpK6x7QhuRvsxPMeCu2yXKXBCc4VZiu3LJXrt6OSN0/2W47reXHYjNuKZqc9Q8NDxgoi5QZFXVrpWB12wfUvsjXZmx+SNdinF4IVv2ZRHQ+hEaWm9kON6i0iMbFFIuqUx6deRadY5KoKEcGDBnYz259Xshy3Mn//Z",Xe=({label:a,value:s,icon:n,isError:i})=>{const t=i?"No disponible":`Bs. ${Number(s).toLocaleString("es-VE",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return e.jsxs("div",{className:"cambio-card",children:[n,e.jsxs("span",{className:"cambio-label",children:[a,":"]}),e.jsx("span",{className:`cambio-value ${i?"error":""}`,children:t})]})},ws=()=>{const{data:a,isError:s,isLoading:n}=Ps({},{pollingInterval:3e5});if(n)return null;const i=[e.jsx(Xe,{label:"BCV",value:a==null?void 0:a.cambiobcv,icon:e.jsx(ra,{size:14}),isError:s||!(a!=null&&a.cambiobcv)},"bcv"),e.jsx(Xe,{label:"Euro",value:a==null?void 0:a.euro,icon:e.jsx(na,{size:14}),isError:s||!(a!=null&&a.euro)},"euro")];return e.jsx("div",{className:"cambio-marquee-container",children:e.jsxs("div",{className:"cambio-marquee-content",children:[i,i.map(t=>_e.cloneElement(t,{"aria-hidden":!0}))]})})},Lt=[{to:"/facturacion",icon:e.jsx(ta,{}),label:"Venta Detal",isPrimary:!0},{to:"/enconstruccion",icon:e.jsx(oa,{}),label:"Venta Mayor"},{to:"/enconstruccion",icon:e.jsx(ia,{}),label:"Lista de Ventas"},{to:"/enconstruccion",icon:e.jsx(la,{}),label:"Revendedores",isExternal:!0}],Pt=[{to:"/verproductos",icon:e.jsx(as,{}),label:"Productos"},{to:"/enconstruccion",icon:e.jsx(ca,{}),label:"Crear Producto"},{to:"/enconstruccion",icon:e.jsx(da,{}),label:"Búsqueda"},{to:"/enconstruccion",icon:e.jsx(ua,{}),label:"Reposiciones"},{to:"/enconstruccion",icon:e.jsx(ma,{}),label:"Ajustes"}],Ut=[{to:"/enconstruccion",icon:e.jsx(ha,{}),label:"Dashboard"},{to:"/enconstruccion",icon:e.jsx(pa,{}),label:"Cuadre de Caja"},{to:"/enconstruccion",icon:e.jsx(xa,{}),label:"Gastos"},{to:"/enconstruccion",icon:e.jsx(ga,{}),label:"Clientes"},{to:"/enconstruccion",icon:e.jsx(ja,{}),label:"Top 20"},{to:"/enconstruccion",children:e.jsx("img",{className:"cashea-img-home",src:Ot,alt:"cashea"}),label:"Reporte Cashea"}],wt=({to:a,icon:s,label:n,isPrimary:i,isExternal:t,children:j})=>{const m=`home-card ${i?"primary":""}`,h=e.jsxs(e.Fragment,{children:[s,j,e.jsx("span",{children:n}),t&&e.jsx(Ea,{className:"external-link-icon"})]});return t?e.jsx("a",{href:a,rel:"noopener noreferrer",target:"_blank",className:m,children:h}):e.jsx(Q,{to:a,className:m,children:h})},Qe=({title:a,cards:s})=>e.jsxs("section",{className:"dashboard-section",children:[e.jsx("h2",{className:"section-title",children:a}),e.jsx("div",{className:"section-grid",children:s.map(n=>e.jsx(wt,{...n},n.label))})]});function Ft(){const a=Y(n=>n.userSignin),{userInfo:s}=a;return s?e.jsxs(e.Fragment,{children:[e.jsx(ws,{}),e.jsxs("div",{className:"dashboard-container",children:[e.jsx(Qe,{title:"Ventas y Pedidos",cards:Lt}),e.jsx(Qe,{title:"Inventario",cards:Pt}),e.jsx(Qe,{title:"Reportes y Administración",cards:Ut})]})]}):e.jsxs("div",{className:"not-userinfo",children:[e.jsx("img",{src:Ze,alt:"fachada"}),";"]})}function te(a){return e.jsxs("div",{className:"flx jcenter font-1",children:[e.jsx("div",{className:a.tipo==="mini"?"loader mini":"loader"}),e.jsx("span",{children:a.txt})]})}function kt({currentPage:a,totalPages:s,onPageChange:n}){const i=()=>{a>1&&n(a-1)},t=()=>{a<s&&n(a+1)};return e.jsx("div",{className:"tankstack-pagination-container",children:e.jsxs("div",{className:"tankstack-pagination-botonera",children:[e.jsx("button",{onClick:i,disabled:a===1,children:"Anterior"}),e.jsxs("span",{children:["Página ",a," de ",s]}),e.jsx("button",{onClick:t,disabled:a===s,children:"Siguiente"})]})})}function Mt(){const a=ae(),{data:s,isLoading:n,isError:i,error:t}=bs(),[j,{isLoading:m}]=xr(),[h,c]=o.useState(""),[u,x]=o.useState(1),p=12,l=o.useMemo(()=>s?s.filter(N=>N.nombre.toLowerCase().includes(h.toLowerCase())||N.rif.toLowerCase().includes(h.toLowerCase())):[],[s,h]),d=Math.ceil(l.length/p),r=o.useMemo(()=>{const N=(u-1)*p;return l.slice(N,N+p)},[l,u,p]),C=N=>{c(N.target.value),x(1)},A=(N,f)=>{b.fire({title:`¿Estás seguro de eliminar a ${f}?`,text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async y=>{if(y.isConfirmed)try{await j(N).unwrap(),b.fire("Eliminado","El cliente ha sido eliminado.","success")}catch{b.fire("Error","No se pudo eliminar el cliente.","error")}})};return n?e.jsx(te,{txt:"Cargando clientes..."}):i?e.jsxs("div",{className:"error-message",children:["Error al cargar los clientes: ",t.message]}):e.jsxs("div",{className:"client-report-container",children:[e.jsxs("div",{className:"client-report-header",children:[e.jsx("h2",{className:"section-title",children:"Directorio de Clientes"}),e.jsxs("div",{className:"client-report-actions",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(rs,{className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o RIF...",value:h,onChange:C})]}),e.jsxs("button",{className:"add-client-btn",onClick:()=>a("/cliente/nuevo"),children:[e.jsx(De,{size:20}),e.jsx("span",{children:"Crear Cliente"})]})]})]}),e.jsx("div",{className:"client-grid",children:r.map((N,f)=>e.jsxs("div",{className:"client-card",style:{animationDelay:`${f*40}ms`},children:[e.jsxs("div",{className:"client-card-header",children:[e.jsx("div",{className:"client-avatar",children:e.jsx(J,{size:24})}),e.jsxs("div",{className:"client-info",children:[e.jsx("h3",{className:"client-name",children:N.nombre}),e.jsxs("p",{className:"client-rif",children:["RIF/CI: ",N.rif]})]})]}),e.jsxs("div",{className:"client-card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",N.celular||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dirección:"})," ",N.direccion||"N/A"]})]}),e.jsxs("div",{className:"client-card-footer",children:[e.jsxs("span",{className:"client-date",children:["Creado: ",W(N.timestamp).format("DD/MM/YYYY")]}),e.jsxs("div",{className:"client-card-actions",children:[e.jsx("button",{className:"icon-btn edit-btn",onClick:()=>a(`/cliente/${N._id}/edit`),title:"Editar Cliente",children:e.jsx(ns,{size:18})}),e.jsx("button",{className:"icon-btn delete-btn",onClick:()=>A(N._id,N.nombre),disabled:m,title:"Eliminar Cliente",children:e.jsx(we,{size:18})})]})]})]},N._id))}),l.length===0&&!n&&e.jsxs("div",{className:"empty-state",children:[e.jsx(J,{size:48}),e.jsx("p",{children:h?"No se encontraron clientes que coincidan con la búsqueda.":"No hay clientes registrados."})]}),d>1&&e.jsx(kt,{currentPage:u,totalPages:d,onPageChange:x})]})}const Fs=["","Sin Marca","Otro","Puma","Salomon","Nike","Adidas","Vans","Generico","Louis Vuitton","D&G","Valentino","Prada","Fendi","Phillip Plain","Burberry","Converse","Alexander mcQueen","Balenciaga","Birkenstock","Dior","New Balance","Asics","Polo","Lacoste","Boss","Enporio","Gant","Tommy Hilfiger","Fila","Columbia","Gorila","Under Armon","Calvin Klein","DQ2","Jordan","Gucci","Lagerfeld","Monclear","Palm","Versace","X OFF","Zoom"],ks=["","CALZADO","TEXTILES","ACCESORIOS","UTENSILIOS","JUGUETES","OTROS"],Ms=["","Blanco","Negro","Gris","Azul","Verde","Amarillo","Rojo","Rosado","Morado","Vinotinto","Celeste","Naranja","Fucsia","Marron","Beige","Dorado","Plateado","Varios","Otro"],Bs=["","Archlight","Arizona Eva","Awaiking","Drawstring","Greca","Ikonik","One","Oversized","Portofino","Ramsey","Rivoli","Rocksrunner","Roma","Runnning","San Bartolo","Trainer","VL7N","White Tigreca","Zero","Airforce 1","Jordan 1","Retro 1","Retro 2","Retro 3","Retro 4","Retro 5","Retro 6","Retro 11","AirMax","Bad Bunny","Benito","Superstar","Nike-SB","Otro","Stay Loyal 2","Retro 12","Jordan 13","Sin Modelo","Generico"],Gs=["","Alta Gama","Casual","Deportivo","Sandalias","Camisa","Franela","Short","Mono","Chemise","Sweater","Otro"],Vs=["","Dama","Caballero","Niño","Unisex","N/A"],Bt=["","INSTAGRAM","TIK-TOK","FACEBOOK","REFERIDO","CUENTA-PROPIA","RECOMENDADO","EMISORA-RADIO","TELEVISION","PUBLICIDAD","FLYERS"],Qs=[{value:"T20",label:"20"},{value:"T21",label:"21"},{value:"T22",label:"22"},{value:"T23",label:"23"},{value:"T24",label:"24"},{value:"T25",label:"25"},{value:"T26",label:"26"},{value:"T27",label:"27"},{value:"T28",label:"28"},{value:"T29",label:"29"},{value:"T30",label:"30"},{value:"T31",label:"31"},{value:"T32",label:"32"},{value:"T33",label:"33"},{value:"T34",label:"34"},{value:"T35",label:"35"},{value:"T36",label:"36"},{value:"T37",label:"37"},{value:"T38",label:"38"},{value:"T39",label:"39"},{value:"T40",label:"40"},{value:"T41",label:"41"},{value:"T42",label:"42"},{value:"T43",label:"43"},{value:"T44",label:"44"},{value:"T45",label:"45"},{value:"T46",label:"46"},{value:"T47",label:"47"},{value:"TXS",label:"XS"},{value:"TSS",label:"SS"},{value:"TS",label:"S"},{value:"TM",label:"M"},{value:"TL",label:"L"},{value:"TXL",label:"XL"},{value:"T2XL",label:"2XL"},{value:"T3XL",label:"3XL"},{value:"T4XL",label:"4XL"},{value:"T5XL",label:"5XL"},{value:"T6XL",label:"6XL"},{value:"TU",label:"U"},{value:"TG",label:"G"}];function Gt(a){const s=Se(),n=ae(),{id:i}=s,{data:t,isLoading:j,isError:m}=cr(i),[h,{isLoading:c,isSuccess:u,isError:x,error:p}]=ur(),[l,d]=o.useState(null),[r,C]=o.useState(""),[A,N]=o.useState(""),[f,y]=o.useState(null),[S,O]=o.useState(!1),[k,w]=o.useState(0),M=Qs.flatMap(v=>v.label),F=o.useMemo(()=>[...Fs].sort(),[]),R=o.useMemo(()=>[...Bs].sort(),[]),P=o.useMemo(()=>[...Gs].sort(),[]),E=o.useMemo(()=>[...Ms].sort(),[]),_=o.useMemo(()=>l?Object.values(l.tallas).reduce((v,B)=>v+(Number(B)||0),0):0,[l]);o.useEffect(()=>{t&&(d({codigo:t.codigo||"",categoria:t.categoria||"CALZADO",marca:t.marca||"",modelo:t.modelo||"",color:t.color||"",genero:t.genero||"",preciousd:t.preciousd||"",tipo:t.tipo||"",tallas:t.tallas||{}}),C(t.imageurl||""),y(t.imageurl||null))},[t]),o.useEffect(()=>{if(!A)return;(()=>{O(!0),w(0);const B=new FormData;B.append("file",A),B.append("upload_preset","ronald_preset"),B.append("cloud_name","ronaldimg"),B.append("folder","productos"),fetch("https://api.cloudinary.com/v1_1/ronaldimg/image/upload",{method:"post",body:B}).then(z=>z.json()).then(z=>{w(100),C(z.secure_url)}).catch(z=>{b.fire("Error de Carga","No se pudo subir la imagen a Cloudinary.","error"),console.log(z)})})()},[A]),o.useEffect(()=>{var v;x&&b.fire({title:"Error al Actualizar",text:((v=p==null?void 0:p.data)==null?void 0:v.message)||"Ocurrió un error.",icon:"error"}),u&&b.fire({title:"Producto Actualizado!",text:"La información del producto se ha guardado correctamente.",icon:"success"}).then(()=>{n("/verproductos")})},[u,x,p,n]);const g=async v=>{v.preventDefault();try{await h({_id:i,...l,existencia:_,imageurl:r}).unwrap()}catch(B){console.error("Failed to update product:",B)}},D=v=>{const{name:B,value:z}=v.target;d(ee=>({...ee,[B]:z}))},I=v=>{const{name:B,value:z}=v.target,ee=z===""?0:Number(z);d(se=>{const oe={...se.tallas,[B]:ee};return ee===0&&delete oe[B],{...se,tallas:oe}})};return j?e.jsx("div",{className:"loading",children:"Cargando datos del producto..."}):m?e.jsx("div",{className:"error",children:"Error al cargar la información del producto."}):l?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flx column pad-0 jcenter",children:[e.jsxs("h2",{className:"editar pad-05",children:["EDITAR PRODUCTO ",l.codigo]}),e.jsxs("form",{className:"signin-form",onSubmit:g,style:{maxWidth:"700px",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Información Principal"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Código"}),e.jsx("input",{type:"text",name:"codigo",required:!0,placeholder:"CODIGO",value:l.codigo.toUpperCase(),onChange:D,disabled:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Precio (USD)"}),e.jsx("input",{type:"number",name:"preciousd",required:!0,placeholder:"Ej: 25.00",value:l.preciousd,onChange:D})]})]})]}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Clasificación"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Categoría"}),e.jsxs("select",{name:"categoria",value:l.categoria,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),ks.map(v=>e.jsx("option",{value:v,children:v},v))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Género"}),e.jsxs("select",{name:"genero",value:l.genero,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),Vs.map(v=>e.jsx("option",{value:v,children:v},v))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Marca"}),e.jsxs("select",{name:"marca",value:l.marca,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),F.map(v=>e.jsx("option",{value:v,children:v},v))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Modelo"}),e.jsxs("select",{name:"modelo",value:l.modelo,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),R.map(v=>e.jsx("option",{value:v,children:v},v))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tipo"}),e.jsxs("select",{name:"tipo",value:l.tipo,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),P.map(v=>e.jsx("option",{value:v,children:v},v))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsxs("select",{name:"color",value:l.color,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),E.map(v=>e.jsx("option",{value:v,children:v},v))]})]})]})]}),l.categoria==="CALZADO"&&l.genero&&e.jsxs("div",{className:"form-section w100p",children:[e.jsxs("h3",{children:["Existencia por Talla (",_," unidades)"]}),e.jsx("div",{className:"flx jcenter wrap pad-0",style:{gap:"0.5rem"},children:M.map(v=>l.categoria==="CALZADO"&&(l.genero==="Dama"&&(Number(v)<35||Number(v)>40||isNaN(v))||l.genero==="Caballero"&&(Number(v)<40||isNaN(v))||l.genero==="Niño"&&(Number(v)>35||isNaN(v)))?null:e.jsxs("div",{className:"edit-span-tallas",children:[e.jsx("span",{children:v}),e.jsx("input",{type:"number",value:l.tallas[v]||"",className:"input-talla",name:v,onChange:I,placeholder:"0"})]},v))})]}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Imagen del Producto"}),e.jsxs("div",{className:"edit-image-container mb-1 mtop-1",children:[e.jsxs("div",{className:"input-file-container",onClick:()=>document.querySelector(".input-field").click(),children:[e.jsx("input",{type:"file",accept:"image/*",className:"input-field",hidden:!0,onChange:({target:{files:v}})=>{v&&v[0]&&new ds(v[0],{quality:.6,success:B=>{y(URL.createObjectURL(B)),N(B)}})}}),f?e.jsx("img",{src:f,alt:"Vista previa"}):e.jsxs("div",{className:"upload-icon",children:[e.jsx(ts,{size:48,color:"#888"}),e.jsx("p",{children:"Selecciona una imagen"})]})]}),S&&e.jsx("div",{className:"upload-img-info",children:k<100?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"animate-spin"}),e.jsx("span",{children:"Subiendo..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(os,{color:"green"}),e.jsx("span",{children:"Imagen Cargada"})]})}),e.jsx("p",{className:"font-x centrado",children:"Click en el recuadro para seleccionar o cambiar la imagen"})]})]}),e.jsx("div",{className:"form-actions w100p",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:c||S,children:[c||S?e.jsx("div",{className:"spinner"}):e.jsx(Ue,{}),e.jsx("span",{children:c?"Actualizando...":"Actualizar Producto"})]})})]})]})}):null}const Vt={nombre:"",email:"",rif:"",direccion:"",celular:"",canal:""};function Qt(){const a=ae(),s=Se(),{id:n}=s,i=!!n,[t,j]=o.useState(Vt),[m,h]=o.useState({}),{data:c,isLoading:u}=pr(n,{skip:!i}),[x,{isLoading:p}]=Ts(),[l,{isLoading:d}]=gr();o.useEffect(()=>{i&&c&&j({nombre:c.nombre||"",email:c.email||"",rif:c.rif||"",direccion:c.direccion||"",celular:c.celular||"",canal:c.canal||""})},[c,i]);const r=f=>{const{name:y,value:S}=f.target;j(O=>({...O,[y]:S})),m[y]&&h(O=>({...O,[y]:null}))},C=()=>{const f={};return t.nombre||(f.nombre="El nombre es obligatorio."),t.rif?/^[VJGjvgEPe]\d{6,9}$/i.test(t.rif)||(f.rif="Formato de RIF/CI inválido (Ej: V-12345678, J-123456789)."):f.rif="El RIF/CI es obligatorio.",t.direccion||(f.direccion="La dirección es obligatoria."),t.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(t.email)&&(f.email="Dirección de email inválida."),h(f),Object.keys(f).length===0},A=async f=>{var y;if(f.preventDefault(),!!C())try{i?(await l({id:n,...t}).unwrap(),b.fire("¡Éxito!","Cliente actualizado correctamente.","success")):(await x(t).unwrap(),b.fire("¡Éxito!","Cliente registrado correctamente.","success")),a("/reporteclientes")}catch(S){b.fire("Error",((y=S.data)==null?void 0:y.message)||"No se pudo completar la operación.","error")}};if(u)return e.jsx(te,{txt:"Cargando datos del cliente..."});const N=(f,y,S,O={},k="text")=>e.jsxs("div",{className:`input-group ${O.fullWidth?"full-width":""}`,children:[e.jsx("label",{htmlFor:f,children:y}),e.jsxs("div",{className:"input-with-icon",children:[S,e.jsx("input",{id:f,name:f,type:k,value:t[f],onChange:r,...O})]}),m[f]&&e.jsx("span",{className:"error-message",children:m[f]})]});return e.jsx("div",{className:"form-container client-form",children:e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h2",{children:i?"Editar Cliente":"Registrar Nuevo Cliente"}),e.jsx(Q,{to:"/reporteclientes",className:"back-link",children:"Volver al Directorio"})]}),e.jsxs("div",{className:"form-body",children:[N("nombre","Nombre o Razón Social",e.jsx(J,{}),{required:!0,fullWidth:!0}),N("rif","RIF / Cédula",e.jsx(Sa,{}),{required:!0,placeholder:"Ej: V12345678"}),N("celular","Teléfono Celular",e.jsx(Pe,{})),N("direccion","Dirección Fiscal",e.jsx(is,{}),{required:!0,fullWidth:!0}),N("email","Correo Electrónico",e.jsx(Ne,{}),{type:"email",fullWidth:!0}),e.jsxs("div",{className:"input-group full-width",children:[e.jsx("label",{htmlFor:"canal",children:"Canal de Difusión"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx(fa,{}),e.jsxs("select",{id:"canal",name:"canal",value:t.canal,onChange:r,children:[e.jsx("option",{value:"",children:"-- Seleccione un canal --"}),Bt.map(f=>e.jsx("option",{value:f,children:f},f))]})]})]})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"submit-button",disabled:p||d,children:p||d?"Guardando...":i?"Actualizar Cliente":"Crear Cliente"})})]})})}function $({children:a,text:s}){return e.jsxs("div",{className:"tooltip",children:[a,e.jsx("span",{className:"tooltip__box",children:s})]})}function qt({data:a,columns:s}){const[n,i]=o.useState([]),[t,j]=o.useState([]),[m,h]=o.useState({pageIndex:0,pageSize:20}),[c,u]=_e.useState(""),[x,p]=_e.useState([]),l=ka({data:a,columns:s,state:{grouping:n,sorting:t,pagination:m,columnFilters:x,globalFilter:c},onColumnFiltersChange:p,onGlobalFilterChange:u,onGroupingChange:i,getExpandedRowModel:qa(),getGroupedRowModel:Qa(),getCoreRowModel:Va(),getPaginationRowModel:Ga(),getFilteredRowModel:Ba(),getSortedRowModel:Ma(),onSortingChange:j,onPaginationChange:h});return e.jsxs("div",{className:"tankstack-table-container",children:[e.jsxs("div",{className:"flx pad-0 jcenter",children:[e.jsx("input",{type:"text",className:"mr",value:c,placeholder:"Buscar",onChange:d=>u(d.target.value)}),e.jsxs("span",{className:"font-x negrita",children:["Pagina ",l.getState().pagination.pageIndex+1," de ",l.getPageCount()]})]}),e.jsxs("div",{children:[e.jsxs("table",{className:"styled-table",children:[e.jsx("thead",{children:l.getHeaderGroups().map(d=>e.jsx("tr",{children:d.headers.map(r=>e.jsx("th",{colSpan:r.colSpan,children:r.isPlaceholder?null:e.jsxs("div",{className:"flx pad-0 gap05 jcenter",children:[r.column.getCanGroup()?e.jsx($,{text:"agrupar",children:e.jsx("button",{onClick:r.column.getToggleGroupingHandler(),style:{cursor:"pointer",backgroundColor:"transparent",border:"none"},className:r.column.getIsGrouped()?"th-ungroup-btn":"th-group-btn",children:r.column.getIsGrouped()?e.jsx(ls,{style:{color:"grey"}}):e.jsx(Ca,{style:{color:"grey"}})})}):null," ",xe(r.column.columnDef.header,r.getContext()),e.jsx($,{text:"ordenar",children:e.jsx("button",{style:{cursor:"pointer",backgroundColor:"transparent",border:"none",minWidth:"20px",padding:0,margin:"0"},onClick:r.column.getToggleSortingHandler(),children:{asc:" 🔼",desc:" 🔽"}[r.column.getIsSorted()]??e.jsx(Na,{})})})]})},r.id))},d.id))}),e.jsx("tbody",{children:l.getRowModel().rows.map(d=>e.jsx("tr",{children:d.getVisibleCells().map((r,C)=>e.jsx("td",{style:{background:r.getIsGrouped()?"#dedede":r.getIsAggregated()||r.getIsPlaceholder()?"#bebdbd":"white"},children:r.getIsGrouped()?e.jsx(e.Fragment,{children:e.jsxs("button",{onClick:d.getToggleExpandedHandler(),style:{cursor:d.getCanExpand()?"pointer":"normal"},className:"td-group-btn",children:[d.getIsExpanded()?e.jsx(va,{}):e.jsx(De,{className:"td-group-icon"})," ",xe(r.column.columnDef.cell,r.getContext())," (",d.subRows.length,")"]})}):r.getIsAggregated()?xe(r.column.columnDef.aggregatedCell??r.column.columnDef.cell,r.getContext()):r.getIsPlaceholder()?null:xe(r.column.columnDef.cell,r.getContext())},C))},d.id))}),e.jsx("tfoot",{children:l.getFooterGroups().map(d=>e.jsx("tr",{children:d.headers.map(r=>e.jsx("th",{children:xe(r.column.columnDef.footer,r.getContext())},r.id))},d.id))})]}),e.jsx("div",{className:"tankstack-pagination-container",children:e.jsxs("div",{className:"tankstack-pagination-botonera",children:[e.jsx("button",{onClick:()=>l.setPageIndex(0),disabled:!l.getCanPreviousPage(),children:"primero"}),e.jsx("button",{onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"anterior"}),e.jsx("button",{onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"siguiente"}),e.jsx("button",{onClick:()=>l.setPageIndex(l.getPageCount()-1),disabled:!l.getCanNextPage(),children:"ultimo"})]})})]})]})}function zt(){const{data:a,isLoading:s}=As(),n=ae(),i=Y(x=>x.userSignin),{userInfo:t}=i,[j,{isLoading:m}]=mr(),h=x=>{if(!t.isAdmin)return b.fire({title:"Necesita Permisos de Administrador",text:"Editar Producto ",icon:"warning"}),"";n(`/product/${x}/edit`)},c=async(x,p)=>{var d;if(!t.isAdmin)return b.fire({title:"Necesita Permisos de Administrador",text:"Eliminar Producto",icon:"warning"});if((await b.fire({title:`¿Estás seguro de eliminar ${p}?`,text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await j(x).unwrap(),b.fire("Eliminado",`El producto ${p} ha sido eliminado.`,"success")}catch(r){b.fire("Error",`No se pudo eliminar el producto. ${((d=r.data)==null?void 0:d.message)||""}`,"error")}},u=[{header:"Codigo",accessorKey:"codigo",enableGrouping:!1,cell:x=>{const{codigo:p,_id:l,nombre:d}=x.row.original;return e.jsxs("div",{className:"flx pad-0 column",children:[e.jsx("h3",{children:p}),t.email==="frank.uah@gmail.com"?e.jsxs("div",{className:"flx gap-1 bg-grey pad-05",children:[e.jsx($,{text:"Editar",children:e.jsx(ns,{size:20,onClick:()=>h(l)})}),e.jsx($,{text:"Conteo Rapido",children:e.jsx(Ra,{size:20,onClick:()=>n(`/conteorapido/${l}`)})}),e.jsx($,{text:"Eliminar",children:e.jsx(we,{size:20,onClick:()=>c(l,p),disabled:m})})]}):""]})},aggregationFn:"count"},{header:"Imagen",accessorKey:"imageurl",enableGrouping:!1,enableSorting:!0,cell:x=>e.jsx("img",{className:"table-img",src:x.getValue()||"./src/assets/logo.png",loading:"lazy"})},{header:"Precio",accessorKey:"preciousd",aggregatedCell:({getValue:x})=>Math.round(x()*100)/100,aggregationFn:"median",cell:x=>"$"+Number(x.getValue()).toFixed(2),footer:({table:x})=>x.getFilteredRowModel().rows.reduce((l,d)=>l+d.getValue("existencia")*d.getValue("preciousd"),0)},{header:"Marca",accessorKey:"marca"},{header:"Modelo",accessorKey:"modelo"},{header:"Color",accessorKey:"color"},{header:"Genero",accessorKey:"genero"},{header:"Existencia",accessorKey:"existencia",footer:({table:x})=>"Unidades: "+x.getFilteredRowModel().rows.reduce((p,l)=>p+l.getValue("existencia"),0)},{header:"Tallas",accessorKey:"tallas",enableGrouping:!1,enableSorting:!1,cell:x=>{const{tallas:p}=x.row.original;if(p===void 0)return"";const l=Object.values(p).reduce((d,r)=>d+r,0);return p?l<=0?e.jsx("span",{className:"negrita",children:"No Disponible"}):e.jsx("div",{className:"flx column pad-0 font-x negrita azul-brand",children:e.jsx("div",{className:"flx jcenter pad-0 mtop-1",children:Object.keys(p).map((d,r)=>p[d]===0?"":e.jsxs("div",{className:"flx column astart pad-0 font-14",children:[e.jsx("p",{className:"centrado minw-20 negrita subrayado",children:d}),e.jsx("p",{className:"centrado minw-20 font-12 color-negro",children:p[d]})]},r))})}):""},footer:""}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flx column jcenter mtop-1",children:[e.jsx("h2",{className:"centrado",children:"PRODUCTOS"}),e.jsx("p",{className:"negrita",children:"Almacen Principal"})]}),s?e.jsx(te,{txt:"Actualizando Productos"}):e.jsx("div",{children:a.length>0?e.jsx(qt,{data:a,columns:u}):""})]})}function Yt(a,s){return a.setHours(a.getHours()-s),a}const $t=()=>{const[a]=o.useState(Yt(new Date,6)),[s,n]=o.useState(0),[i,t]=o.useState(""),[j,m]=o.useState(null),[h,c]=o.useState("68fbc1e95cd3e9dbbc679344"),[u,x]=o.useState("Contado"),[p,l]=o.useState([]),[d,r]=o.useState([]),[C,A]=o.useState(0),[N,f]=o.useState(0),[y,S]=o.useState(""),[O,k]=o.useState(!1),[w,M]=o.useState(!1),[F,R]=o.useState(!1),[P,E]=o.useState(!1),[_,g]=o.useState(!1),[D,I]=o.useState(!1),[v,B]=o.useState(null),z=ae(),{userInfo:ee}=Y(U=>U.userSignin),{data:se,isError:oe}=Ps({}),{data:ue}=Os(),[ke,{isLoading:Me}]=bt(),[ie]=ys(),H=o.useMemo(()=>p.reduce((U,L)=>U+L.precio*L.qty,0),[p]),le=o.useMemo(()=>H*0,[H]),Z=o.useMemo(()=>Math.max(0,H-C+le+Number(N)),[H,C,le,N]),me=o.useMemo(()=>d.reduce((U,L)=>U+L.monto,0),[d]),he=()=>{m(null),t(""),c(""),x("Contado"),l([]),r([]),A(0),f(0),S("")},ve=async()=>{if(s>0)return s;let U=0;if(se&&se.cambiobcv&&!oe)U=Number(se.cambiobcv);else{const{value:L}=await b.fire({title:"Tasa de Cambio BCV no disponible",text:"Por favor, ingrese la tasa de cambio del día manualmente:",input:"number",inputPlaceholder:"Ej: 36.50",showCancelButton:!0,inputValidator:K=>!K||isNaN(K)||parseFloat(K)<=0&&"Debe ingresar un valor numérico positivo."});L&&(U=parseFloat(L))}return n(U),U},Be=async()=>{var U;if((u==="Donacion"||u==="Intercambio")&&!y.trim())return b.fire("Campo Requerido","El campo 'Memo / Notas' es obligatorio.","warning");if(u!=="Credito"&&Math.abs(Z-me).toFixed(2)!=="0.00")return b.fire("Monto Incompleto","El total pagado no coincide con el total de la orden.","warning");if(!s||s===0)return b.fire("Operación Cancelada","No se puede crear la orden sin una tasa de cambio válida.","error");try{const{data:L}=await ke({fecha:a,clienteInfo:j,orderItems:p,pago:d,totalItems:p.reduce((K,pe)=>K+pe.qty,0),subtotal:H,descuento:C,delivery:N,totalVenta:Z,cambioDia:s,condicion:u,vendedor:h,user:ee,memo:y,iva:le});he(),z(`/print/order/${L.order._id}`)}catch(L){b.fire("Error al Crear la Orden",((U=L.data)==null?void 0:U.message)||L.error||"Ocurrió un error.","error")}},Ge=U=>{l(L=>[...L,U]),R(!1)},Ve=U=>{l(L=>L.filter((K,pe)=>pe!==U))},T=U=>{let L=Number(U.target.value);L<0&&(L=0),L>H&&(L=H,b.fire("Atención","El descuento no puede ser mayor que el subtotal.","warning")),A(L)},G=U=>{const L=U.target.value;x(L),L==="Credito"?r([]):L==="Contado"&&Z>0&&me<Z&&E(!0)},X=async()=>{await ve()>0?E(!0):b.fire("Acción cancelada","Se requiere una tasa de cambio para gestionar los pagos.","info")},re=o.useCallback(U=>{r(U),E(!1),U.length>0&&b.fire("Guardado","Métodos de pago actualizados.","success")},[]);return o.useEffect(()=>{(async()=>{Z>0&&s===0&&await ve()})()},[Z,s]),o.useEffect(()=>{(async()=>{const L="V99999999",{data:K,isSuccess:pe}=await ie(L);pe&&K&&(m(K),t(L))})()},[ie]),{fecha:a,cambioDia:s,rif:i,setRif:t,clienteInfo:j,setClienteInfo:m,vendedor:h,setVendedor:c,condicion:u,ordenItems:p,metodosPago:d,descuento:C,delivery:N,setDelivery:f,memo:y,setMemo:S,subtotal:H,impuesto:le,totalOrden:Z,totalPagado:me,vendedores:ue,isCreatingOrder:Me,showClienteSearchModal:O,setShowClientSearchModal:k,showNewClientModal:w,setShowNewClientModal:M,showProductSearchModal:F,setShowProductSearchModal:R,showProductViewerModal:_,setShowProductViewerModal:g,showClientViewerModal:D,setShowClientViewerModal:I,showMetodoPagoModal:P,setShowMetodoPagoModal:E,imagenAmpliadaUrl:v,setImagenAmpliadaUrl:B,handleCondicionChange:G,handleDescuentoChange:T,addItemToOrder:Ge,deleteItemFromOrder:Ve,setOrdenItems:l,handleOpenPagoModal:X,handleSavePagos:re,createOrderHandler:Be}},qs=o.forwardRef(({onClientFound:a,onNewClient:s,onCancel:n},i)=>{const[t]=ys(),j=async()=>{try{const{value:m}=await b.fire({title:"RIF o Cedula",input:"text",inputPlaceholder:"Ejemplo: V999999999 - J999999999",showCancelButton:!0,confirmButtonText:"Buscar",cancelButtonText:"Cancelar",inputValidator:h=>{if(!h)return"Debe ingresar Cedula o RIF";const c=h.trim().toUpperCase(),u=c.charAt(0),x=u==="J"||u==="G",p=u==="V"||u==="E";if(x){if(!/^[JG][0-9]{9}$/.test(c))return"Formato de RIF incorrecto. Debe ser J o G seguido de 9 dígitos."}else if(p){if(!/^[VE][0-9]{6,8}$/.test(c))return"Formato de Cédula incorrecto. Debe ser V o E seguido de 6 a 8 dígitos."}else return"El identificador debe comenzar con V, E, J o G."}});if(m){const{data:h,error:c}=await t(m.toUpperCase());h&&b.fire({title:`${h.nombre+" - "+h.rif}`,icon:"success",confirmButtonText:"OK",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(u=>{u.isConfirmed?a(h):n()}),c?b.fire({title:"Cliente No Encontrado",icon:"error",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Agregar"}).then(u=>{u.isConfirmed?s(m.toUpperCase()):n()}):h||(console.error("Respuesta inesperada de la API: ni datos ni error."),b.fire("Error Inesperado","No se recibió respuesta del servidor.","error"),n())}else n()}catch(m){b.fire({title:"Error",text:"Ocurrió un error durante la búsqueda "+m,icon:"error",confirmButtonText:"OK"}),n()}};return o.useImperativeHandle(i,()=>({show:j})),null});function Ht({identificacion:a,onRegisterSuccess:s,onCancel:n}){const[i,{isLoading:t,isSuccess:j}]=Ts(),[m]=o.useState(a||""),[h,c]=o.useState({nombre:"",direccion:"",celular:"",email:"",canal:""}),[u,x]=o.useState({}),p=r=>{const{name:C,value:A,type:N,checked:f}=r.target;c(y=>({...y,[C]:N==="checkbox"?f:A})),u[C]&&x(y=>({...y,[C]:""}))},l=()=>{const r={};h.nombre.trim()||(r.nombre="El Nombre O Razon Social es requerido"),h.direccion.trim()||(r.direccion="La Direccion es requerida"),h.canal.trim()||(r.canal="El Canal de Divulgacion es requerido");const C=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return h.email&&!C.test(h.email)&&(r.email="Por favor ingrese una direccion de Email valida"),h.celular&&!/^\d{10,15}$/.test(h.celular.replace(/\D/g,""))&&(r.celular="Por favor ingrese su telefono en forma correcta"),x(r),Object.keys(r).length===0},d=async r=>{var C;if(r.preventDefault(),l())try{await i({...h,rif:m}).unwrap().then(A=>{b.fire("Agregado","Cliente registrado exitosamente","success"),c({nombre:"",direccion:"",email:"",celular:"",canal:""}),s(A)}).catch(A=>{b.fire("Error","Ocurrio un Error","error")})}catch(A){b.fire("Error",((C=A.data)==null?void 0:C.message)||"Failed to register client","error")}};return e.jsxs("div",{className:"form-container",children:[e.jsxs("div",{className:"modal-close-container",children:[e.jsx($e,{className:"close-icon light",onClick:n}),e.jsxs("p",{children:["RIF / CEDULA: ",m]})]}),e.jsxs("form",{onSubmit:d,className:"form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Registrar Cliente"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre o Razon Social *"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",value:h.nombre,onChange:p,className:u.nombre?"error":"",placeholder:"Ingrese su Nombre o Razon Social"}),u.nombre&&e.jsx("span",{className:"error-message",children:u.nombre})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"direccion",children:"Direccion *"}),e.jsx("input",{type:"text",id:"direccion",name:"direccion",value:h.direccion,onChange:p,className:u.direccion?"error":"",placeholder:"Enter your last name"}),u.direccion&&e.jsx("span",{className:"error-message",children:u.direccion})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"celular",children:"Telefono"}),e.jsx("input",{type:"tel",id:"celular",name:"celular",value:h.celular,onChange:p,className:u.celular?"error":"",placeholder:"Ej: 0412-999-9999"}),u.celular&&e.jsx("span",{className:"error-message",children:u.celular})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:h.email,onChange:p,className:u.email?"error":"",placeholder:"Ingrese su email"}),u.email&&e.jsx("span",{className:"error-message",children:u.email})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"gender",children:"Como se entero de nosotros"}),e.jsxs("select",{id:"canal",name:"canal",value:h.canal,onChange:p,children:[e.jsx("option",{value:"",children:"Selecionar"}),e.jsx("option",{value:"INICIATIVA",children:"INICIATIVA"}),e.jsx("option",{value:"RECOMENDADO",children:"RECOMENDADO"}),e.jsx("option",{value:"INSTAGRAM",children:"INSTAGRAM"}),e.jsx("option",{value:"TIKTOK",children:"TIKTOK"}),e.jsx("option",{value:"FACEBOOK",children:"FACEBOOK"})]})]})]}),e.jsx("button",{type:"submit",className:"submit-button",children:"Registrar Cliente"})]})]})}const Kt=({onProductFound:a,onCancel:s})=>{const[n,{data:i,isLoading:t,isError:j}]=hr(),[m,h]=o.useState(""),[c,u]=o.useState(null),[x,p]=o.useState(""),[l,d]=o.useState(1),r=o.useCallback(S=>{S.trim()!==""&&S.length>2&&n(S)},[n]);o.useEffect(()=>{const S=setTimeout(()=>{r(m)},500);return()=>{clearTimeout(S)}},[m,r]);const C=S=>{h(S.target.value.toUpperCase())},A=S=>{c===S?u(null):(u(S),p(""),d(1))},N=S=>{p(S.target.value),d(1)},f=S=>{d(Number(S.target.value))},y=S=>{if(console.log("producto ",S),!x){alert("Por favor, seleccione una talla.");return}const{nombre:O,tallas:k,_id:w,preciousd:M,...F}=S;a({...F,talla:x,producto:w,precio:M,qty:l})};return e.jsxs("div",{className:"responsive-top-margin",children:[e.jsxs("div",{className:"modal-close-container",children:[e.jsx($e,{className:"close-icon light",onClick:s}),e.jsx("div",{className:"cancel-div",onClick:s,children:"Cancelar"}),e.jsx(Aa,{})]}),e.jsxs("div",{className:"product-search-container",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"product-search-input",children:"Código de Producto"}),e.jsx("input",{type:"text",id:"product-search-input",name:"product-search",value:m,onChange:C,placeholder:"Buscar producto...",autoFocus:!0})]}),e.jsxs("div",{className:"product-search-results",children:[t&&e.jsxs("div",{className:"loading-container",children:[e.jsx(Ye,{className:"animate-spin"})," Buscando..."]}),j&&e.jsx("p",{className:"error-message",children:"Error al buscar productos."}),i&&i.length===0&&m&&!t&&e.jsx("p",{children:"No se encontraron productos."}),i&&i.length>0&&e.jsx("div",{children:e.jsx("ul",{className:"product-search-list",children:i.map(S=>e.jsxs("li",{className:"product-search-item",children:[e.jsxs("div",{className:"product-info-clickable",onClick:()=>A(S._id),children:[e.jsx("img",{src:S.imageurl,alt:S.nombre,width:"50",className:"product-search-image"}),e.jsxs("div",{className:"product-search-info",children:[e.jsx("p",{children:S.codigo}),e.jsxs("p",{children:[S.marca," - ",S.modelo]}),e.jsxs("p",{children:["$",Number(S.preciousd).toFixed(2)]})]}),e.jsx(es,{className:`expand-icon ${c===S._id?"expanded":""}`})]}),e.jsxs("div",{className:`tallas-selector ${c===S._id?"expanded":""}`,children:[e.jsxs("div",{className:"form-group-inline",children:[e.jsx("label",{htmlFor:`talla-select-${S._id}`,children:"Disponibilidad"}),e.jsxs("select",{className:"w-70",id:`talla-select-${S._id}`,value:x,onChange:N,children:[e.jsx("option",{value:"",disabled:!0,children:"Talla"}),Object.entries(S.tallas||{}).filter(([,O])=>O>0).map(([O])=>e.jsx("option",{value:O,children:O},O))]})]}),x&&S.tallas[x]>0&&e.jsxs("div",{className:"form-group-inline",children:[e.jsx("label",{htmlFor:`quantity-select-${S._id}`,children:"Cantidad"}),e.jsx("select",{id:`quantity-select-${S._id}`,value:l,onChange:f,children:Array.from({length:S.tallas[x]},(O,k)=>k+1).map(O=>e.jsx("option",{value:O,children:O},O))})]}),e.jsx("button",{className:"add-product-btn",onClick:()=>y(S),disabled:!x,children:"Agregar al Pedido"})]})]},S._id))})})]})]})]})},zs={metodo:"",monto:"",referencia:"",bancoOrigen:"",bancoDestino:"",memo:""};function Zt(a,s){switch(s.type){case"SET_FIELD":return{...a,[s.field]:s.value};case"RESET":return zs;default:return a}}function Xt({onCancel:a,onSave:s,totalOrden:n,totalOrdenBs:i}){const[t,j]=o.useState([]),[m,h]=o.useReducer(Zt,zs),{metodo:c,monto:u,referencia:x,bancoOrigen:p,bancoDestino:l,memo:d}=m,r=[{value:"PAGOMOVIL",label:"Pago Móvil"},{value:"TDB",label:"Tarjeta de Débito"},{value:"TDC",label:"Tarjeta de Crédito"},{value:"EUROS",label:"Divisas (Euros)"},{value:"DOLARES",label:"Divisas (Dólares)"},{value:"BOLIVARES",label:"Efectivo (Bolívares)"},{value:"ZELLE",label:"Zelle"},{value:"TRANSFERENCIA",label:"Transferencia"},{value:"PAGOCASHEA",label:"Pago Cashea"}],C=["PAGOMOVIL","TDB","TDC","BOLIVARES","TRANSFERENCIA"],A=["Venezuela","Banesco","Mercantil","Provincial","BNC","Banco Plaza"],N=o.useMemo(()=>n>0?i/n:0,[n,i]),f=["PAGOMOVIL","TDB","TDC","ZELLE","TRANSFERENCIA","PAGOCASHEA"].includes(c),y=["PAGOMOVIL","TDB","TDC","TRANSFERENCIA"].includes(c),S=["PAGOMOVIL","TDB","TDC","TRANSFERENCIA"].includes(c),O=C.includes(c),k=o.useMemo(()=>t.reduce((g,D)=>g+parseFloat(D.montoUSD),0),[t]),w=o.useMemo(()=>n-k,[n,k]),M=o.useMemo(()=>w*N,[w,N]),F=O?"Bs.":"$",R=(g,D)=>{h({type:"SET_FIELD",field:g,value:D})},P=()=>{if(!c||!u||parseFloat(u)<=0){b.fire("Atención","Debe seleccionar un método de pago y un monto válido.","warning");return}if(f&&!x.trim()){const I=c==="PAGOCASHEA"?"Número de Orden":"Referencia";b.fire("Campo Requerido",`Por favor, ingrese el campo '${I}'.`,"warning");return}if(y&&!p){b.fire("Campo Requerido","Por favor, seleccione un 'Banco Origen'.","warning");return}if(S&&!l){b.fire("Campo Requerido","Por favor, seleccione un 'Banco Destino'.","warning");return}let g;const D=parseFloat(u);if(O){if(N===0){b.fire("Error","No hay tasa de cambio para pagos en Bolívares.","error");return}const I=D/N;if(k+I>n+.001){b.fire("Monto Excedido",`El monto a pagar no puede ser mayor al restante. Restan: $${w.toFixed(2)}`,"error");return}g={tipo:c,monto:D,moneda:"Bs.",montoUSD:I}}else{if(k+D>n+.001){b.fire("Monto Excedido",`El monto a pagar no puede ser mayor al restante. Restan: $${w.toFixed(2)}`,"error");return}g={tipo:c,monto:D,moneda:"$",montoUSD:D}}Object.assign(g,{...f&&x&&{referencia:x},...y&&p&&{bancoOrigen:p},...S&&l&&{bancoDestino:l},...d&&{memo:d}}),j([...t,g]),h({type:"RESET"})},E=g=>{j(t.filter((D,I)=>I!==g))},_=()=>{if(Math.abs(w).toFixed(2)!=="0.00"){b.fire("Verifique los montos",`El total pagado ($${k.toFixed(2)}) no coincide con el total de la orden ($${n.toFixed(2)}). Restan: $${w.toFixed(2)}`,"error");return}s(t)};return e.jsx("div",{className:"modal-container",children:e.jsxs("div",{className:"form-container",style:{maxHeight:"calc(100vh - 100px)",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-close-container",children:[e.jsx($e,{className:"close-icon light",onClick:a}),e.jsxs("div",{children:["Total Orden:"," ",e.jsxs("strong",{children:["$",n.toFixed(2)," (Bs. ",i.toFixed(2),")"]})]}),e.jsx("h3",{className:"white",children:"Gestión de Pagos"})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Método de Pago"}),e.jsxs("select",{value:c,onChange:g=>R("metodo",g.target.value),children:[e.jsx("option",{value:"",children:"Seleccione un método..."}),r.map(g=>{const I=C.includes(g.value)&&N===0;return e.jsxs("option",{value:g.value,disabled:I,children:[g.label," ",I?"(Tasa no disp.)":""]},g.value)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Monto (",F,")"]}),e.jsxs("div",{className:"input-with-button",children:[e.jsx("input",{type:"number",value:u,onChange:g=>R("monto",g.target.value),placeholder:O?M.toFixed(2):w.toFixed(2)}),e.jsx("button",{type:"button",className:"link-like-btn",title:"Usar monto restante",onClick:()=>{const g=O?M.toFixed(2):w.toFixed(2);R("monto",g)},children:e.jsx(ba,{size:16})})]})]})]}),e.jsxs("div",{className:"form-row",children:[y&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Banco Origen"}),e.jsxs("select",{value:p,onChange:g=>R("bancoOrigen",g.target.value),children:[e.jsx("option",{value:"",children:"Seleccione..."}),A.map(g=>e.jsx("option",{value:g,children:g},g))]})]}),S&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Banco Destino"}),e.jsxs("select",{value:l,onChange:g=>R("bancoDestino",g.target.value),children:[e.jsx("option",{value:"",children:"Seleccione..."}),A.map(g=>e.jsx("option",{value:g,children:g},g))]})]})]}),f&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Referencia"}),e.jsx("input",{type:"text",value:x,onChange:g=>R("referencia",g.target.value),maxLength:c==="PAGOCASHEA"?"20":"12",placeholder:c==="PAGOCASHEA"?"Número de Orden Cashea":""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Memo (Opcional)"}),e.jsx("input",{type:"text",value:d,onChange:g=>R("memo",g.target.value),placeholder:"Información adicional sobre el pago..."})]}),e.jsxs("button",{type:"button",className:"add-button",onClick:P,children:[e.jsx(Ta,{size:18})," Agregar Pago"]}),e.jsxs("div",{className:"payment-summary",children:[e.jsx("h4",{className:"centrado",children:"Pagos Agregados"}),e.jsxs("div",{className:"payment-list",children:[t.map((g,D)=>e.jsxs("div",{className:"payment-item",children:[e.jsxs("span",{children:[g.tipo,": ",e.jsxs("strong",{children:[g.moneda," ",g.monto.toFixed(2)]}),g.referencia&&` (Ref: ${g.referencia})`]}),e.jsx(we,{className:"delete-item-icon",onClick:()=>E(D)})]},D)),t.length===0&&e.jsx("p",{className:"no-payment-message",children:"Aún no se han agregado pagos."})]}),e.jsxs("div",{className:"payment-totals",children:[e.jsxs("div",{children:["Total Pagado: ",e.jsxs("strong",{children:["$",k.toFixed(2)]})]}),e.jsxs("div",{className:w.toFixed(2)!=="0.00"?"restante-pendiente":"restante-ok",children:["Restante: ",e.jsxs("strong",{children:["$",w.toFixed(2)]})]})]})]})]}),e.jsxs("button",{onClick:_,className:"submit-button",disabled:t.length===0,children:[e.jsx(Ue,{size:18})," Guardar Pagos y Cerrar"]})]})})}const Wt=({showNewClientModal:a,showClienteSearchModal:s,showProductSearchModal:n,showMetodoPagoModal:i,setShowNewClientModal:t,setShowClientSearchModal:j,setShowProductSearchModal:m,setShowMetodoPagoModal:h,rif:c,setRif:u,setClienteInfo:x,ordenItems:p,handleUpdateQuantity:l,addItemToOrder:d,handleSavePagos:r,totalOrden:C,cambioDia:A})=>{const N=f=>{m(!1);const y=p.findIndex(S=>S.codigo===f.codigo&&S.talla===f.talla);y>-1?p[y].qty===f.qty?b.fire({title:"Producto ya existe",html:`El producto <strong>${f.nombre} (Talla ${f.talla})</strong> con cantidad <strong>${f.qty}</strong> ya se encuentra en la orden.`,icon:"info"}):l(y,f.qty):d(f)};return e.jsxs(e.Fragment,{children:[a&&e.jsx("div",{className:"modal-container",children:e.jsx(Ht,{identificacion:c,onRegisterSuccess:f=>{x(f),t(!1),j(!1)},onCancel:()=>t(!1)})}),s&&e.jsx(qs,{onClientFound:f=>x(f),onNewClient:f=>{u(f),t(!0)},onCancel:()=>{u(""),x(null),j(!1)}}),n&&e.jsx("div",{className:"modal-container",children:e.jsx(Kt,{onProductFound:N,onCancel:()=>m(!1)})}),i&&C>0&&e.jsx("div",{className:"modal-container",children:e.jsx(Xt,{onSave:r,onCancel:()=>h(!1),totalOrden:C,totalOrdenBs:C*A})})]})},Jt=({isOpen:a,onClose:s})=>{const{data:n=[],isLoading:i}=As(),[t,j]=o.useState(""),[m,h]=o.useState(1),c=10,u=o.useMemo(()=>{if(!n)return[];const r=t.toLowerCase();return n.filter(C=>C.codigo.toLowerCase().includes(r)||C.marca.toLowerCase().includes(r)||C.categoria&&C.categoria.toLowerCase().includes(r))},[n,t]),x=Math.ceil(u.length/c),p=o.useMemo(()=>{const r=(m-1)*c;return u.slice(r,r+c)},[u,m,c]),l=r=>{r>=1&&r<=x&&h(r)};if(!a)return null;const d=r=>(console.log("tallas",r),!r||Object.keys(r).length===0?"N/A":Object.entries(r).filter(([,C])=>C>0).map(([C,A])=>C+" : "+A).join(", "));return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content-viewer",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Visor de Productos"}),e.jsx("button",{onClick:s,className:"close-button",children:e.jsx(He,{size:24})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"viewer-controls",children:e.jsx("input",{type:"text",placeholder:"Filtrar por código, marca o categoría...",value:t,onChange:r=>j(r.target.value),className:"viewer-search-input"})}),i?e.jsx(te,{txt:"Cargando productos..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive-container",children:e.jsxs("table",{className:"viewer-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Imagen"}),e.jsx("th",{children:"Código"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Marca"}),e.jsx("th",{children:"Tallas Disp."})]})}),e.jsx("tbody",{children:p.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:r.imageurl,alt:r.codigo,className:"viewer-product-image"})}),e.jsx("td",{children:r.codigo}),e.jsxs("td",{children:["$",Number(r.preciousd).toFixed(2)]}),e.jsx("td",{children:r.marca}),e.jsx("td",{children:d(r.tallas)})]},r._id))})]})}),x>1&&e.jsxs("div",{className:"viewer-pagination",children:[e.jsx("button",{onClick:()=>l(m-1),disabled:m===1,children:"Anterior"}),e.jsxs("span",{children:["Página ",m," de ",x]}),e.jsx("button",{onClick:()=>l(m+1),disabled:m===x,children:"Siguiente"})]})]})]})]})})},eo=({isOpen:a,onClose:s,onSelectClient:n})=>{const{data:i=[],isLoading:t}=bs(),[j,m]=o.useState(""),[h,c]=o.useState(1),u=10,x=o.useMemo(()=>{if(!i)return[];const r=j.toLowerCase();return i.filter(C=>C.nombre.toLowerCase().includes(r)||C.rif.toLowerCase().includes(r))},[i,j]),p=Math.ceil(x.length/u),l=o.useMemo(()=>{const r=(h-1)*u;return x.slice(r,r+u)},[x,h,u]),d=r=>{r>=1&&r<=p&&c(r)};return a?e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content-viewer",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Lista de Clientes"}),e.jsx("button",{onClick:s,className:"close-button",children:e.jsx(He,{size:24})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"viewer-controls",children:e.jsx("input",{type:"text",placeholder:"Filtrar por nombre o RIF/CI...",value:j,onChange:r=>m(r.target.value),className:"viewer-search-input"})}),t?e.jsx(te,{txt:"Cargando clientes..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive-container",children:e.jsxs("table",{className:"viewer-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre / Razón Social"}),e.jsx("th",{children:"RIF / CI"}),e.jsx("th",{children:"Teléfono"}),e.jsx("th",{children:"Dirección"})]})}),e.jsx("tbody",{children:l.map(r=>e.jsxs("tr",{onClick:()=>n(r),style:{cursor:"pointer"},children:[e.jsx("td",{children:r==null?void 0:r.nombre.toUpperCase()}),e.jsx("td",{children:r.rif}),e.jsx("td",{children:r.celular||"N/A"}),e.jsx("td",{children:r.direccion||"N/A"})]},r._id))})]})}),p>1&&e.jsxs("div",{className:"viewer-pagination",children:[e.jsx("button",{onClick:()=>d(h-1),disabled:h===1,children:"Anterior"}),e.jsxs("span",{children:["Página ",h," de ",p]}),e.jsx("button",{onClick:()=>d(h+1),disabled:h===p,children:"Siguiente"})]})]})]})]})}):null},so=({isOpen:a,onClose:s,onSelectVendedor:n,selectedVendedorId:i})=>{const{data:t,isLoading:j,isError:m}=Os(),[h,c]=o.useState(""),u=o.useMemo(()=>{if(!t)return[];const p=h.toLowerCase();return t.filter(l=>{var d,r,C;return(((d=l.nombre)==null?void 0:d.toLowerCase())??"").includes(p)||(((r=l.apellido)==null?void 0:r.toLowerCase())??"").includes(p)||(((C=l.cedula)==null?void 0:C.toLowerCase())??"").includes(p)})},[t,h]);if(!a)return null;const x=p=>{n(p)};return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},children:[e.jsx("div",{className:"modal-header",children:e.jsx("h3",{children:"Seleccionar Vendedor"})}),e.jsxs("div",{className:"modal-body",style:{overflowY:"auto"},children:[e.jsx("div",{className:"search-bar-container",children:e.jsx("input",{type:"text",placeholder:"Filtrar por nombre, apellido o cédula...",className:"search-input",value:h,onChange:p=>c(p.target.value)})}),j&&e.jsx("p",{children:"Cargando vendedores..."}),m&&e.jsx("p",{children:"Error al cargar los vendedores."}),e.jsx("div",{className:"viewer-table-container",children:e.jsxs("table",{className:"viewer-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Apellido"}),e.jsx("th",{children:"Cédula"})]})}),e.jsx("tbody",{children:u.length>0?u.map(p=>e.jsxs("tr",{onClick:()=>x(p),className:`clickable-row ${p._id===i?"active-row":""}`,children:[e.jsx("td",{children:p.nombre}),e.jsx("td",{children:p.apellido}),e.jsx("td",{children:p.cedula})]},p._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",style:{textAlign:"center"},children:"No se encontraron vendedores."})})})]})})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{onClick:s,className:"btn btn-secondary",children:"Cerrar"})})]})})};function ao(){const{fecha:a,cambioDia:s,rif:n,setRif:i,clienteInfo:t,setClienteInfo:j,vendedor:m,setVendedor:h,condicion:c,ordenItems:u,metodosPago:x,descuento:p,delivery:l,setDelivery:d,memo:r,setMemo:C,setOrdenItems:A,subtotal:N,totalOrden:f,totalPagado:y,vendedores:S,isCreatingOrder:O,showNewClientModal:k,setShowNewClientModal:w,showProductSearchModal:M,setShowProductSearchModal:F,showProductViewerModal:R,setShowProductViewerModal:P,showClientViewerModal:E,setShowClientViewerModal:_,showMetodoPagoModal:g,setShowMetodoPagoModal:D,imagenAmpliadaUrl:I,setImagenAmpliadaUrl:v,handleCondicionChange:B,handleDescuentoChange:z,addItemToOrder:ee,deleteItemFromOrder:se,handleOpenPagoModal:oe,handleSavePagos:ue,createOrderHandler:ke}=$t(),[Me,ie]=o.useState(!1),H=o.useRef(null),le=T=>{j(T),b.close()},Z=T=>{i(T),w(!0)},me=()=>{console.log("Búsqueda de cliente cancelada.")},he=S==null?void 0:S.find(T=>T._id===m);o.useEffect(()=>{f===0&&ue([])},[f,ue]);const ve=(T,G)=>{const X=[...u],re=X[T];X[T]={...re,qty:G},A(X),b.fire("Cantidad Actualizada",`<strong>${re.codigo} (Talla ${re.talla})</strong>.`,"success")},Be=(T,G)=>{b.fire({title:"¿Estás seguro?",text:`Se eliminará el producto ${G.codigo} (Talla ${G.talla}) de la orden.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(X=>{X.isConfirmed&&(se(T),b.fire("Producto Eliminado!","success"))})},Ge=()=>{window.print()},Ve=()=>e.jsxs("div",{className:"print-header-container",children:[e.jsx("img",{src:ne,alt:"Logo Tienda",className:"print-logo"}),e.jsxs("div",{className:"print-store-info",style:{flexShrink:0},children:[e.jsx("h4",{children:"DEMODA"}),e.jsx("p",{children:"RIF: J-12345678-9"}),e.jsx("p",{children:"Almacen Principal"}),e.jsx("p",{children:"Facturacion Detal"})]})]});return e.jsxs("div",{className:"facturacion-container",children:[e.jsx(ws,{}),e.jsx(Ve,{}),e.jsx("div",{className:"info-cliente",style:{padding:"0.5rem 1rem",border:"1px solid #ccc"},children:e.jsxs("div",{className:"order-header",style:{justifyContent:"space-around"},children:[e.jsx($,{text:"Lista Clientes",children:e.jsx(ya,{className:"add-product-icon border",size:36,onClick:()=>_(!0)})}),e.jsx($,{text:"Lista Productos",children:e.jsx(as,{className:"add-product-icon border",size:36,onClick:()=>P(!0)})})]})}),e.jsxs("div",{className:`info-cliente ${t?"":"alerta-sin-cliente"}`,children:[e.jsxs("div",{className:"order-header",children:[e.jsxs("h3",{children:["PEDIDO ",new Date(a).toLocaleDateString("es-VE")]}),e.jsx("div",{className:"detail-item",onClick:T=>T.stopPropagation(),children:e.jsxs("select",{id:"condicion-select",value:c,onChange:B,children:[e.jsx("option",{value:"Contado",children:"Contado"}),e.jsx("option",{value:"Credito",children:"Crédito"}),e.jsx("option",{value:"Intercambio",children:"Intercambio"}),e.jsx("option",{value:"Donacion",children:"Donación"})]})}),u.length>0&&e.jsx(Ke,{className:"add-product-icon print-button",onClick:Ge})]}),e.jsxs("details",{className:"details-collapsible full-width",children:[e.jsxs("summary",{className:"details-summary",children:[" ","Cliente",e.jsx($,{text:"Buscar/Cambiar Cliente",children:e.jsx(Ia,{width:20,className:"add-product-icon",style:{color:t?"green":"#7c0505",marginLeft:"25px"},onClick:T=>{var G;T.preventDefault(),(G=H.current)==null||G.show()}})})]}),t&&e.jsxs("div",{className:"client-order-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Nombre o Razon Social"}),e.jsx("span",{className:"detail-value",children:t.nombre})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Teléfono"}),e.jsx("span",{className:"detail-value",children:t.celular})]}),e.jsxs("div",{className:"detail-item full-width",children:[e.jsx("span",{className:"detail-label",children:"Dirección"}),e.jsx("span",{className:"detail-value",children:t.direccion})]})]})]}),e.jsxs("details",{className:"details-collapsible full-width",children:[e.jsxs("summary",{className:"details-summary",children:["Vendedor"," ",e.jsx($,{text:"Asignar Vendedor",children:e.jsx(_a,{className:"add-product-icon",onClick:()=>ie(!0)})})]}),e.jsx("div",{className:"client-order-details",children:he?e.jsxs("div",{className:"detail-item vendedor",children:[e.jsx("span",{className:"detail-label",children:"Asignado a"}),e.jsxs("span",{className:"detail-value",children:[he.nombre," ",he.apellido]})]}):e.jsx("div",{className:"detail-item",children:e.jsx("span",{className:"detail-value alerta-sin-cliente",style:{padding:"0.2rem"},children:"No se ha asignado un vendedor."})})})]})]}),e.jsxs("div",{className:"info-productos",children:[e.jsxs("div",{className:"order-header",children:[e.jsx("div",{className:"flx",style:{gap:"0.5rem"},children:e.jsx("h3",{children:"Productos"})}),e.jsx("div",{children:e.jsx($,{text:"Agregar Producto",children:e.jsx(De,{className:"add-product-icon",size:28,onClick:()=>F(!0)})})})]}),u.length>0?e.jsx("div",{className:"order-items-list",children:u.map((T,G)=>e.jsxs("div",{className:`order-item-row ${G===u.length-1?"new-item":""}`,children:[e.jsx("img",{src:T.imageurl,alt:T.nombre,className:"order-item-image",onClick:()=>v(T.imageurl)}),e.jsxs("div",{className:"order-item-details",children:[e.jsx("p",{className:"item-name",children:T.nombre}),e.jsxs("p",{className:"item-meta",children:[T.marca," ",T.modelo," ",T.color," Talla ",T.talla," (",T.codigo,")"]})]}),e.jsxs("div",{className:"order-item-price",children:["$",Number(T.precio).toFixed(2)]}),e.jsxs("div",{className:"order-item-quantity",children:["x ",T.qty]}),e.jsxs("div",{className:"order-item-total",children:["$",(T.precio*T.qty).toFixed(2)]}),e.jsx("div",{className:"order-item-actions",children:e.jsx(we,{onClick:()=>Be(G,T),className:"delete-item-icon"})})]},`${T._id}-${T.talla}`))}):e.jsxs("div",{className:"empty-cart-message",children:[e.jsx(Da,{size:48}),e.jsx("p",{children:"Tu orden está vacía"}),e.jsx("span",{children:"Agrega productos para comenzar."})]})]}),N>0&&e.jsxs("div",{className:"info-resumen",children:[e.jsx("h3",{children:"Resumen"}),e.jsxs("div",{className:"summary-row",style:{fontSize:"1.3rem"},children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"facturacion-subtotal-value",children:["$",N.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row",style:{fontSize:"1.3rem"},children:[e.jsx("label",{htmlFor:"descuento",children:"Descuento (-)"}),e.jsx("input",{id:"descuento",type:"number",value:p.toFixed(2),onChange:z,style:{width:"90px",textAlign:"right",padding:"2px 5px",fontSize:"1.3rem",border:"1px solid #ccc",borderRadius:"4px"}})]}),e.jsxs("div",{className:"summary-row",style:{fontSize:"1.3rem"},children:[e.jsx("label",{htmlFor:"delivery",children:"Delivery (+)"}),e.jsx("div",{className:"select-wrapper-left",style:{width:"100px"},children:e.jsxs("select",{id:"delivery",value:l,onChange:T=>d(Number(T.target.value)),style:{textAlign:"right",padding:"2px 5px",fontSize:"1.3rem",border:"1px solid #ccc",borderRadius:"4px"},children:[e.jsx("option",{value:0,children:"$0.00"}),Array.from({length:10},(T,G)=>(G+1)*5).map(T=>e.jsxs("option",{value:T,children:["$",T.toFixed(2)]},T))]})})]}),e.jsxs("div",{className:"summary-row total",style:{fontSize:"1.4rem",marginTop:"0.5rem"},children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",f.toFixed(2)]})]}),s>0&&e.jsxs("div",{className:"summary-row",style:{color:"#007bff",fontWeight:"bold",marginTop:"0.5rem",fontSize:"1.3rem"},children:[e.jsxs("span",{children:["Total Bs. (BCV: ",s,")"]}),e.jsxs("span",{children:["Bs. ",(f*s).toLocaleString("es-VE",{minimumFractionDigits:2})]})]})]}),f>0&&e.jsxs("div",{className:"info-pagos",children:[e.jsxs("div",{className:"order-header",children:[e.jsx("h3",{children:"Metodos de Pagos"}),e.jsx($,{text:"Gestionar Métodos de Pago",children:e.jsx(De,{className:"add-product-icon",onClick:oe})})]}),e.jsx("div",{className:"payment-list-summary",children:x.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("details",{className:"details-collapsible full-width",children:[e.jsxs("summary",{className:"details-summary",children:[" ",e.jsx("span",{children:e.jsxs("strong",{children:["Total Pagado: $",y.toFixed(2)]})}),s>0&&e.jsx("span",{children:e.jsxs("strong",{children:["(Bs. ",(y*s).toLocaleString("es-VE",{minimumFractionDigits:2}),")"]})})]}),(()=>{const T=["PAGOMOVIL","TDB","TDC","BOLIVARES","TRANSFERENCIA"];return x.map((G,X)=>{const re=T.includes(G.tipo||G.metodo);let U;if(re)U=`Bs. ${(G.monto*s).toLocaleString("es-VE",{minimumFractionDigits:2})}`;else{const L=G.monto,K=L*s;U=`$${L.toLocaleString("es-VE",{minimumFractionDigits:2})} (Bs. ${K.toLocaleString("es-VE",{minimumFractionDigits:2})})`}return e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{className:"detail-label",style:{textTransform:"none",fontSize:"1.2rem"},children:G.tipo||G.metodo}),e.jsx("span",{children:U})]},X)})})()]}),f-y>.009&&c!=="Credito"&&e.jsxs("div",{className:"summary-row restante-pendiente",style:{marginTop:"0.5rem"},children:[e.jsx("span",{children:e.jsx("strong",{children:"Falta por Pagar"})}),e.jsx("span",{children:e.jsxs("strong",{children:["$",(f-y).toFixed(2)]})})]})]}):e.jsx("p",{className:"no-payment-message",children:"No se han agregado métodos de pago."})})]}),f>0&&e.jsxs("div",{className:`info-memo ${(c==="Donacion"||c==="Intercambio")&&!r.trim()?"alerta-sin-cliente":""}`,children:[e.jsx("h3",{children:"Memo / Notas"}),e.jsx("textarea",{id:"memo-input",value:r,onChange:T=>C(T.target.value),rows:"2",style:{width:"100%",borderRadius:"5px",border:"1px solid #ced4da",padding:"8px"},placeholder:"Información adicional sobre la orden..."})]}),e.jsx(qs,{ref:H,onClientFound:le,onNewClient:Z,onCancel:me}),e.jsx(Wt,{showNewClientModal:k,setShowNewClientModal:w,showClienteSearchModal:!1,setShowClientSearchModal:()=>{},showProductSearchModal:M,setShowProductSearchModal:F,showMetodoPagoModal:g,setShowMetodoPagoModal:D,rif:n,setRif:i,setClienteInfo:j,ordenItems:u,handleUpdateQuantity:ve,addItemToOrder:ee,handleSavePagos:ue,totalOrden:f,cambioDia:s}),e.jsx(Jt,{isOpen:R,onClose:()=>P(!1)}),e.jsx(so,{isOpen:Me,onClose:()=>ie(!1),onSelectVendedor:T=>{h(T._id),ie(!1)},selectedVendedorId:m}),e.jsx(eo,{isOpen:E,onClose:()=>_(!1),onSelectClient:T=>{j(T),_(!1)}}),e.jsx("button",{className:"checkout-button",onClick:ke,disabled:u.length===0||!t||!m||O,children:"Crear Orden"}),I&&e.jsx("div",{className:"backdrop-imagen-ampliada",onClick:()=>v(null),children:e.jsx("img",{src:I,alt:"Imagen Ampliada",className:"imagen-ampliada"})})]})}function ro(){return e.jsxs("div",{children:[e.jsx("h2",{className:"centrado",children:"ADMINISTRADOR DEMODA"}),e.jsx("h3",{className:"centrado font-x",children:"Links Directo a Aplicaciones"}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Tablas Dinamicas Consolidadas"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsx(Q,{to:"/consolidadoventas",children:e.jsx("p",{className:"span-admin-consolidado",children:"Ventas Consolidadas (analitics)"})})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsx(Q,{to:"/consolidadoarticulos",children:e.jsx("p",{className:"span-admin-consolidado",children:"Ventas por Articulos (analitics)"})})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Front-End (ventas al detal)"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://front-chacao-ems84m3vx-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Front-End Tienda Chacao"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://front-merpoeste-di4orofvq-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Front-End Tienda Merpoeste"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://planner-b4ey3we1w-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Planificador Tienda Chacao"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://horario-p9wma9x58-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Horarios Tienda Chacao"})]})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Control de Gastos"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://a-vite-project-q2dooo892-skynetfrank.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Control de Gastos Los Frailes"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://gastos-chacao2app-r0fuei42i-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Control de Gastos Chacao "})]})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Otros"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://intranet-v2-9drcsb58h-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Chat Intranet Demoda"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://admin-reseller-2vba5qtd7-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Administrador de Revendedores"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://preorder-atn4pwqy4-skynetfrank.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Administrador de Preorden "})]})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route pd",children:[e.jsx("label",{children:"Plaza Dental"}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://plazadental-v2-j2g1jnntr-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Plaza Dental 2025 (nuevo)"})]})]}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://plaza-dental-ihm65vu3k-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Plaza Dental (Antiguo)"})]})]}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://plaza-stock-cpbxmd5c6-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Inventario Plaza Dental"})]})]}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://planner-plaza-9tp7wnvii-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Planificador Plaza Dental"})]})]})]})})]})}const no=()=>{var A;const{id:a}=Se(),{data:s,isLoading:n,isError:i,error:t}=Ls(a),j=()=>{window.print()};if(n)return e.jsx("div",{className:"loading-container",children:"Cargando orden..."});if(i)return e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"Error al cargar la orden"}),e.jsx("p",{children:((A=t==null?void 0:t.data)==null?void 0:A.message)||t.error}),e.jsxs(Q,{to:"/facturacion",className:"back-link",children:[e.jsx(je,{})," Volver"]})]});if(!s)return e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"No se encontró la orden"}),e.jsxs(Q,{to:"/facturacion",className:"back-link",children:[e.jsx(je,{})," Volver"]})]});const{fecha:m,clienteInfo:h,orderItems:c,subtotal:u,descuento:x,iva:p,delivery:l,totalVenta:d,_id:r,pago:C}=s;return e.jsxs("div",{className:"print-order-container",children:[e.jsxs("div",{className:"print-controls",children:[e.jsxs(Q,{to:"/facturacion",className:"back-button",children:[e.jsx(je,{})," Volver a Facturación"]}),e.jsxs("button",{onClick:j,className:"print-button",children:[e.jsx(Ke,{})," Imprimir"]})]}),e.jsxs("div",{className:"invoice-paper",children:[e.jsxs("header",{className:"invoice-header",children:[e.jsx("img",{src:ne,alt:"Logo de la Tienda",className:"invoice-logo"}),e.jsxs("div",{className:"store-details",children:[e.jsx("h2",{children:"DEMODA"}),e.jsx("p",{children:"RIF: J-12345678-9"}),e.jsx("p",{children:"Dirección de la tienda"}),e.jsx("p",{children:"Teléfono: (0212) 555-1234"})]})]}),e.jsxs("section",{className:"order-info",children:[e.jsxs("div",{className:"order-meta",children:[e.jsx("h3",{children:"Orden de Venta"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nº:"})," ",r.slice(-6).toUpperCase()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha:"})," ",new Date(m).toLocaleDateString("es-VE")]})]}),e.jsxs("div",{className:"client-details",children:[e.jsx("h3",{children:"Cliente"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",h.nombre]}),e.jsxs("p",{children:[e.jsx("strong",{children:"RIF/CI:"})," ",h.rif]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",h.telefono]})]})]}),e.jsx("section",{className:"order-items",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Código"}),e.jsx("th",{children:"Descripción"}),e.jsx("th",{children:"Cant."}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Total"})]})}),e.jsx("tbody",{children:c.map(N=>e.jsxs("tr",{children:[e.jsx("td",{children:N.codigo}),e.jsxs("td",{children:[N.nombre," (Talla: ",N.talla,")"]}),e.jsx("td",{children:N.qty}),e.jsxs("td",{children:["$",Number(N.precio).toFixed(2)]}),e.jsxs("td",{children:["$",(N.qty*N.precio).toFixed(2)]})]},N._id))})]})}),e.jsx("section",{className:"order-summary",children:e.jsxs("div",{className:"summary-details",children:[e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["$",Number(u).toFixed(2)]})]}),x>0&&e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Descuento:"}),e.jsxs("span",{children:["-$",Number(x).toFixed(2)]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"IVA (16%):"}),e.jsxs("span",{children:["$",Number(p).toFixed(2)]})]}),l>0&&e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Delivery:"}),e.jsxs("span",{children:["$",Number(l).toFixed(2)]})]}),e.jsxs("div",{className:"summary-row total",children:[e.jsx("span",{children:"Total a Pagar:"}),e.jsxs("span",{children:["$",Number(d).toFixed(2)]})]})]})}),e.jsx("footer",{className:"invoice-footer",children:e.jsx("p",{children:"Gracias por su compra"})})]})]})};function to(a){const s=ae(),[n,i]=o.useState({codigo:"",categoria:"CALZADO",marca:"",modelo:"",color:"",genero:"",preciousd:"",tipo:"",tallas:{}}),[t,j]=o.useState(""),[m,h]=o.useState(""),[c,u]=o.useState(null),[x,p]=o.useState(!1),[l,d]=o.useState(0),[r,{isLoading:C,isSuccess:A,isError:N,error:f}]=dr(),y=Qs.flatMap(E=>E.label),S=o.useMemo(()=>[...Fs].sort(),[]),O=o.useMemo(()=>[...Bs].sort(),[]),k=o.useMemo(()=>[...Gs].sort(),[]),w=o.useMemo(()=>[...Ms].sort(),[]),M=o.useMemo(()=>Object.values(n.tallas).reduce((E,_)=>E+(Number(_)||0),0),[n.tallas]);o.useEffect(()=>{var E;N&&b.fire({title:"Codigo Ya Existe",text:((E=f==null?void 0:f.data)==null?void 0:E.message)||"Ocurrió un error al crear el producto.",icon:"error"}),A&&b.fire({title:"Producto Creado con Exito!",text:"Crear Producto",icon:"success"}).then(_=>{s("/verproductos")})},[A,N,f,s]),o.useEffect(()=>{if(!m)return;(()=>{p(!0);const _=new FormData;_.append("file",m),_.append("upload_preset","ronald_preset"),_.append("cloud_name","ronaldimg"),_.append("folder","productos"),fetch("https://api.cloudinary.com/v1_1/ronaldimg/image/upload",{method:"post",body:_}).then(g=>g.json()).then(g=>{d(100),j(g.secure_url)}).catch(g=>{b.fire("Error de Carga","No se pudo subir la imagen a Cloudinary.","error"),console.log(g)})})()},[m]);const F=async E=>{if(E.preventDefault(),!n.codigo){b.fire({title:"Falta el Codigo",text:"Crear Producto",icon:"warning"});return}if(n.codigo.length<5){b.fire({title:"Codigo Invalido..Verifique",text:"Crear Producto",icon:"warning"});return}if(!t){b.fire({title:"Debe Asociar una Imagen al Producto",text:"Crear Producto",icon:"warning"});return}try{await r({...n,existencia:M,imageurl:t}).unwrap()}catch(_){console.error("Fallo al crear el producto:",_)}},R=E=>{const{name:_,value:g}=E.target;i(D=>({...D,[_]:g}))},P=E=>{const{name:_,value:g}=E.target,D=g===""?0:Number(g);i(I=>{const v={...I.tallas,[_]:D};return D===0&&delete v[_],{...I,tallas:v}})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flx column pad-0 jcenter",children:[e.jsx("h2",{className:"editar pad-05",children:"NUEVO PRODUCTO"})," ",e.jsxs("form",{className:"signin-form",onSubmit:F,style:{maxWidth:"700px",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Información Principal"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Código"}),e.jsx("input",{type:"text",name:"codigo",required:!0,placeholder:"CODIGO",value:n.codigo.toUpperCase(),onChange:R})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Precio (USD)"}),e.jsx("input",{type:"number",name:"preciousd",required:!0,placeholder:"Ej: 25.00",value:n.preciousd,onChange:R})]})]})]}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Clasificación"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Categoría"}),e.jsx("select",{name:"categoria",value:n.categoria,onChange:R,required:!0,children:ks.map(E=>e.jsx("option",{value:E,children:E},E))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Género"}),e.jsxs("select",{name:"genero",value:n.genero,onChange:R,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),Vs.map(E=>e.jsx("option",{value:E,children:E},E))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Marca"}),e.jsxs("select",{name:"marca",value:n.marca,onChange:R,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),S.map(E=>e.jsx("option",{value:E,children:E},E))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Modelo"}),e.jsxs("select",{name:"modelo",value:n.modelo,onChange:R,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),O.map(E=>e.jsx("option",{value:E,children:E},E))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tipo"}),e.jsxs("select",{name:"tipo",value:n.tipo,onChange:R,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),k.map(E=>e.jsx("option",{value:E,children:E},E))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsxs("select",{name:"color",value:n.color,onChange:R,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),w.map(E=>e.jsx("option",{value:E,children:E},E))]})]})]})]}),n.categoria==="CALZADO"&&n.genero&&e.jsxs("div",{className:"form-section w100p",children:[e.jsxs("h3",{children:["Existencia por Talla (",M," unidades)"]}),e.jsx("div",{className:"flx jcenter wrap pad-0",style:{gap:"0.5rem"},children:y.map(E=>n.categoria==="CALZADO"&&(n.genero==="Dama"&&(Number(E)<35||Number(E)>40||isNaN(E))||n.genero==="Caballero"&&(Number(E)<40||isNaN(E))||n.genero==="Niño"&&(Number(E)>35||isNaN(E)))?null:e.jsxs("div",{className:"edit-span-tallas",children:[e.jsx("span",{children:E}),e.jsx("input",{type:"number",value:n.tallas[E]||"",className:"input-talla",name:E,onChange:P,placeholder:"0"})]},E))})]}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Imagen del Producto"}),e.jsxs("div",{className:"edit-image-container mb-1 mtop-1",children:[e.jsxs("div",{className:"input-file-container",onClick:()=>document.querySelector(".input-field").click(),children:[e.jsx("input",{type:"file",accept:"image/*",className:"input-field",hidden:!0,onChange:({target:{files:E}})=>{E&&E[0]&&new ds(E[0],{quality:.6,success:_=>{u(URL.createObjectURL(_)),h(_)}})}}),c?e.jsx("img",{src:c,alt:"Vista previa"}):e.jsxs("div",{className:"upload-icon",children:[e.jsx(ts,{size:48,color:"#888"}),e.jsx("p",{children:"Selecciona una imagen"})]})]}),x&&e.jsx("div",{className:"upload-img-info",children:l<100?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"animate-spin"}),e.jsx("span",{children:"Subiendo..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(os,{color:"green"}),e.jsx("span",{children:"Imagen Cargada"})]})}),e.jsx("p",{className:"font-x centrado",children:"Click en el recuadro para seleccionar o cambiar la imagen"})]})]}),e.jsx("div",{className:"form-actions w100p",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:C||x,children:[C||x?e.jsx("div",{className:"spinner"}):e.jsx(Ue,{}),e.jsx("span",{children:C?"Guardando...":"Guardar Producto"})]})})]})]})})}const qe={container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100vh - 200px)",textAlign:"center",backgroundColor:"#f8f9fa",borderRadius:"8px",margin:"1rem",padding:"2rem",color:"#495057"},title:{fontSize:"2.5rem",fontWeight:"bold",marginTop:"1rem"},text:{fontSize:"1.1rem",maxWidth:"500px",lineHeight:"1.6"}};function oo(){return e.jsxs("div",{style:qe.container,children:[e.jsx(Oa,{size:64,color:"#ffc107"}),e.jsx("h1",{style:qe.title,children:"Página en Construcción"}),e.jsxs("p",{style:qe.text,children:["Estamos trabajando para tener esta sección lista lo antes posible.",e.jsx("br",{}),"Ofrecemos disculpas por las molestias."]}),e.jsx(Q,{to:"/",className:"header-login-button",style:{marginTop:"2rem"},children:"Volver al Inicio"})]})}function io(){var d;const{id:a}=Se(),{data:s,isLoading:n,isError:i,error:t}=Ls(a);if(n)return e.jsx(te,{txt:"Cargando detalles de la orden..."});if(i)return e.jsxs("div",{className:"empty-state",children:[e.jsx(cs,{size:48,color:"#dc3545"}),e.jsx("h2",{style:{color:"#dc3545"},children:"Error al Cargar la Orden"}),e.jsx("p",{children:((d=t==null?void 0:t.data)==null?void 0:d.message)||"No se pudo encontrar la orden especificada."}),e.jsxs(Q,{to:"/verpedidos",className:"back-button-error",children:[e.jsx(je,{size:18})," Volver al listado"]})]});const{orderItems:j,subtotal:m,iva:h,totalVenta:c,delivery:u,clienteInfo:x,createdAt:p,pago:l}=s;return console.log("order",s),e.jsxs("div",{className:"order-detail-container",children:[e.jsxs("div",{className:"invoice-header",children:[e.jsx("img",{src:Ze,alt:"Logo de la Tienda",className:"invoice-logo"}),e.jsxs("div",{className:"store-details",children:[e.jsx("h2",{children:"DEMODA"}),e.jsx("p",{children:"RIF: J-50151733-9"}),e.jsx("p",{children:"Edif. Los Frailes, Piso 6. Chuao. Caracas"}),e.jsx("p",{children:"Teléfono: (0412) 611-3970"})]})]}),e.jsxs("div",{className:"order-detail-header",children:[e.jsxs("h1",{children:["Orden ",e.jsxs("span",{children:["...",s._id.substring(s._id.length-6)]})]}),e.jsxs("p",{className:"order-date",children:["Fecha: ",W(p).format("DD/MM/YYYY")]}),e.jsxs(Q,{to:"/verpedidos",className:"back-button",children:[e.jsx(je,{size:18}),e.jsx("span",{children:"Volver al listado"})]})]}),e.jsxs("div",{className:"order-detail-grid",children:[e.jsxs("div",{className:"order-detail-main",children:[e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Cliente"}),e.jsxs("div",{className:"client-details-list",children:[e.jsxs("p",{children:[e.jsx(J,{size:16})," ",e.jsx("strong",{children:x.nombre})]}),e.jsxs("p",{children:[e.jsx(La,{size:16})," RIF/CI: ",x.rif]}),e.jsxs("p",{children:[e.jsx(Ne,{size:16})," ",e.jsx("a",{href:`mailto:${x.email}`,children:x.email||"N/A"})]}),e.jsxs("p",{children:[e.jsx(Pe,{size:16})," ",x.celular||"N/A"]}),e.jsxs("p",{children:[e.jsx(is,{size:16})," ",x.direccion||"N/A"]})]})]}),e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Artículos del Pedido"}),e.jsx("div",{className:"order-items-list-detail",children:j.map(r=>e.jsxs("div",{className:"order-item-detail",children:[e.jsx("img",{src:r.imageurl,alt:r.nombre,className:"order-item-image-detail"}),e.jsxs("div",{className:"order-item-info-detail",children:[e.jsx("p",{className:"item-name",children:r.marca}),e.jsxs("p",{className:"item-meta",children:[r.qty," x $",r.precio.toFixed(2)]})]}),e.jsxs("p",{className:"order-item-total-detail",children:["$",(r.qty*r.precio).toFixed(2)]})]},r._id))})]})]}),e.jsxs("div",{className:"order-detail-sidebar",children:[e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Resumen del Pedido"}),e.jsxs("div",{className:"summary-list",children:[e.jsxs("div",{className:"summary-row-detail",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",m.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row-detail",children:[e.jsx("span",{children:"Envío"}),e.jsxs("span",{children:["$",u.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row-detail",children:[e.jsx("span",{children:"IVA"}),e.jsxs("span",{children:["$",h.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row-detail total",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",c.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Estado del Pago"}),(l==null?void 0:l.length)>0?e.jsx("div",{className:"payment-details-list",children:l.map((r,C)=>e.jsxs("div",{className:"status-box paid",children:[e.jsx(Pa,{size:20}),e.jsxs("div",{children:[e.jsxs("p",{className:"status-title",children:[r.tipo,": $",r.monto.toFixed(2)]}),e.jsxs("p",{className:"status-text",children:["Realizado el ",W(r.fecha).format("DD/MM/YYYY")]})]})]},C))}):e.jsxs("div",{className:"status-box pending",children:[e.jsx(ls,{size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"status-title",children:"Estado del Pago"}),e.jsx("p",{className:"status-text",children:"Pendiente de Pago"})]})]})]})]})]})]})}const lo=({currentPage:a,totalPages:s,onPageChange:n})=>{if(s<=1)return null;const i=()=>{a>1&&n(a-1)},t=()=>{a<s&&n(a+1)},j=()=>{const m=[];if(s<=5)for(let c=1;c<=s;c++)m.push(c);else{let c=Math.max(1,a-2),u=Math.min(s,a+2);a<=3?(c=1,u=5):a>=s-2&&(c=s-5+1,u=s);for(let x=c;x<=u;x++)m.push(x)}return m};return e.jsxs("div",{className:"pagination-container",children:[e.jsxs("button",{onClick:i,disabled:a===1,className:"pagination-button",children:[e.jsx(Ua,{size:18})," Anterior"]}),j().map(m=>e.jsx("button",{onClick:()=>n(m),className:`pagination-button ${a===m?"active":""}`,children:m},m)),e.jsxs("button",{onClick:t,disabled:a===s,className:"pagination-button",children:["Siguiente ",e.jsx(wa,{size:18})]})]})};function co(){var F;const{data:a,isLoading:s,isError:n,error:i}=At(),[t,j]=o.useState(1),[m]=o.useState(15),[h,c]=o.useState(""),[u,x]=o.useState(""),[p,l]=o.useState(""),[d,r]=o.useState({key:"fecha",direction:"descending"}),C=o.useMemo(()=>{let R=a?[...a]:[];return d.key!==null&&R.sort((P,E)=>{var D,I;const _=d.key==="cliente"?(D=P.clienteInfo)==null?void 0:D.nombre:P[d.key],g=d.key==="cliente"?(I=E.clienteInfo)==null?void 0:I.nombre:E[d.key];return _<g?d.direction==="ascending"?-1:1:_>g?d.direction==="ascending"?1:-1:0}),R},[a,d]);if(s)return e.jsx(te,{txt:"Cargando órdenes..."});if(n)return e.jsxs("div",{className:"empty-state",children:[e.jsx(cs,{size:48,color:"#dc3545"}),e.jsx("h2",{style:{color:"#dc3545"},children:"Error al Cargar Órdenes"}),e.jsx("p",{children:((F=i==null?void 0:i.data)==null?void 0:F.message)||i.error})]});const A=C?C.filter(R=>{var D;const P=W(R.fecha),E=(D=R.clienteInfo)==null?void 0:D.nombre.toLowerCase().includes(h.toLowerCase()),_=u?P.isAfter(W(u).startOf("day").subtract(1,"second")):!0,g=p?P.isBefore(W(p).endOf("day")):!0;return E&&_&&g}):[],N=Math.ceil(A.length/m),f=t*m,y=f-m,S=A.slice(y,f),O=R=>{j(R)},k=R=>{c(R.target.value),j(1)},w=()=>{c(""),x(""),l(""),j(1),r({key:"fecha",direction:"descending"})},M=R=>{let P="ascending";d.key===R&&d.direction==="ascending"&&(P="descending"),r({key:R,direction:P}),j(1)};return e.jsxs("div",{className:"order-list-container",children:[e.jsxs("div",{className:"order-list-header",children:[e.jsx("h1",{className:"section-title",children:"Historial de Órdenes"}),e.jsxs("div",{className:"filters-container",children:[e.jsxs("div",{className:"date-filter-container",children:[e.jsx("label",{htmlFor:"startDate",children:"Desde:"}),e.jsx("input",{type:"date",id:"startDate",value:u,onChange:R=>x(R.target.value)}),e.jsx("label",{htmlFor:"endDate",children:"Hasta:"}),e.jsx("input",{type:"date",id:"endDate",value:p,onChange:R=>l(R.target.value)})]}),e.jsxs("div",{className:"search-input-container",children:[e.jsx(rs,{className:"search-input-icon"}),e.jsx("input",{type:"text",placeholder:"Buscar por cliente...",value:h,onChange:k})]}),e.jsxs("button",{onClick:w,className:"clear-filters-btn",children:[e.jsx(He,{size:16})," Limpiar"]})]})]}),a&&a.length>0?e.jsxs("div",{className:"table-responsive-container",children:[e.jsxs("table",{className:"order-list-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"sortable-header",onClick:()=>M("_id"),children:["ID Orden"," ",d.key==="_id"&&(d.direction==="ascending"?e.jsx(Re,{size:14}):e.jsx(Ae,{size:14}))]}),e.jsxs("th",{className:"sortable-header",onClick:()=>M("fecha"),children:["Fecha"," ",d.key==="fecha"&&(d.direction==="ascending"?e.jsx(Re,{size:14}):e.jsx(Ae,{size:14}))]}),e.jsxs("th",{className:"sortable-header",onClick:()=>M("cliente"),children:["Cliente"," ",d.key==="cliente"&&(d.direction==="ascending"?e.jsx(Re,{size:14}):e.jsx(Ae,{size:14}))]}),e.jsxs("th",{className:"sortable-header",onClick:()=>M("totalVenta"),children:["Total"," ",d.key==="totalVenta"&&(d.direction==="ascending"?e.jsx(Re,{size:14}):e.jsx(Ae,{size:14}))]}),e.jsx("th",{children:"Pagado"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:S.map(R=>{var P,E;return e.jsxs("tr",{children:[e.jsxs("td",{children:["...",R._id.substring(R._id.length-6)]}),e.jsx("td",{children:W(R.fecha).format("DD/MM/YYYY")}),e.jsx("td",{children:(P=R.clienteInfo)==null?void 0:P.nombre.toUpperCase()}),e.jsxs("td",{className:"total-amount",children:["$",(E=R==null?void 0:R.totalVenta)==null?void 0:E.toFixed(2)]}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${R.isPaid?"status-paid":"status-pending"}`,children:R.isPaid?"Pagado":"Pendiente"})}),e.jsx("td",{children:e.jsx($,{text:"Ver Detalles",children:e.jsx(Q,{to:`/order/${R._id}`,className:"action-btn",children:e.jsx(ce,{size:20})})})})]},R._id)})})]}),A.length>0?e.jsx(lo,{currentPage:t,totalPages:N,onPageChange:O}):e.jsx("p",{className:"no-results-message",children:"No se encontraron órdenes que coincidan con la búsqueda."})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx(Fa,{size:48}),e.jsx("p",{children:"Aún no se han registrado órdenes."})]})]})}const uo=a=>async s=>{s({type:Is,payload:a});try{const{data:n}=await Ce.get(`/api/productos/${a}`);s({type:_s,payload:n})}catch(n){s({type:Ds,payload:n.response&&n.response.data.message?n.response.data.message:n.message})}};function mo(a){const s=Se(),{id:n}=s;o.useRef("");const[i,t]=o.useState(0),j=Y(l=>l.userSignin),{userInfo:m}=j,h=Y(l=>l.productDetails),{product:c}=h,u=de();o.useEffect(()=>{(!c||c._id!==n)&&u(uo(n))},[u,c,n]);const x=()=>{window.print()},p=()=>{var l=document.getElementById("inputs").children;let d=[];Array.from(l).forEach(function(r){d.push(r.children[0].value)}),t(d.reduce((r,C)=>r+Number(C),0))};return e.jsxs("div",{children:[e.jsx("div",{className:"flx sb",children:e.jsx(Q,{to:"/",className:"back-link",children:"volver"})}),c?e.jsxs("div",{className:"flx column",children:[e.jsx("h2",{children:"Inversiones Paul 2428, C.A."}),e.jsx("h2",{children:"Conteo Rapido"}),e.jsxs("p",{children:["Realizado por: ",(m==null?void 0:m.nombre)+" "+(m==null?void 0:m.apellido)]}),e.jsxs("p",{children:["Fecha: ",W(new Date).format("DD/MM/YYYY  hh:mm a")]}),e.jsx("button",{className:"btn-icon-container",onClick:x,children:e.jsx(Ke,{})}),e.jsxs("div",{className:" flx column astart mtop-2 mb",children:[e.jsxs("h1",{children:["Codigo: ",c==null?void 0:c.codigo]}),e.jsxs("h1",{children:["Marca: ",c==null?void 0:c.marca]}),e.jsxs("h1",{children:["Modelo: ",c==null?void 0:c.modelo," "]}),e.jsxs("h1",{children:["Color: ",c==null?void 0:c.color," "]})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"mb centrado",children:["Contados: ",i," pares"]}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("tr",{children:Object.keys(c.tallas).map((l,d)=>e.jsx("th",{children:l},d))})}),e.jsx("tbody",{children:e.jsx("tr",{id:"inputs",children:Object.keys(c.tallas).map((l,d)=>e.jsx("td",{children:e.jsx("input",{type:"number",className:"w-40 txt-align-r",onChange:()=>p()})},d))})})]})]}),e.jsxs("div",{className:"mtop-3",children:[e.jsx("p",{className:"",children:"Observaciones:"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"})]})]}):""]})}const ho=Hs(Ks(e.jsxs(V,{path:"/",element:e.jsx(lr,{}),children:[e.jsx(V,{index:!0,element:e.jsx(Ft,{})}),e.jsx(V,{path:"/verproductos",element:e.jsx(zt,{})}),e.jsx(V,{path:"/verpedidos",element:e.jsx(co,{})}),e.jsx(V,{path:"/signin",element:e.jsx(It,{})}),e.jsx(V,{path:"/register",element:e.jsx(_t,{})}),e.jsxs(V,{path:"",element:e.jsx(yt,{}),children:[e.jsx(V,{path:"/admin-menu",element:e.jsx(ro,{})}),e.jsx(V,{path:"/profile",element:e.jsx(Dt,{})}),e.jsx(V,{path:"/reporteclientes",element:e.jsx(Mt,{})})]}),e.jsx(V,{path:"/product/:id/edit",element:e.jsx(Gt,{})}),e.jsx(V,{path:"/cliente/:id/edit",element:e.jsx(Qt,{})}),e.jsx(V,{path:"/facturacion",element:e.jsx(ao,{})}),e.jsx(V,{path:"/order/:id",element:e.jsx(io,{})}),e.jsx(V,{path:"/print/order/:id",element:e.jsx(no,{})}),e.jsx(V,{path:"/crearproducto",element:e.jsx(to,{})}),e.jsx(V,{path:"/enconstruccion",element:e.jsx(oo,{})}),e.jsx(V,{path:"/conteorapido/:id",element:e.jsx(mo,{})})]})));Ys.createRoot(document.getElementById("root")).render(e.jsx(Xs,{store:Us,children:e.jsx(_e.StrictMode,{children:e.jsx(Zs,{router:ho})})}));

import{r as o,j as e,R as Ae}from"./react-DOKUib4L.js";import{R as Zs}from"./react-dom-BITIQLb-.js";import{L as z,O as Ze,N as ea,u as ae,a as es,b as Ce,c as sa,d as aa,R as ra,e as B}from"./react-router-BxJrM2TX.js";import{a as Q,c as oe,P as na}from"./react-redux-C2QVzL3I.js";import{a as Ne}from"./axios-xsH4HHeE.js";import{d as ee}from"./dayjs-zjxybqXZ.js";import{c as ta,a as Oe,f as Le,b as oa,s as ia}from"./@reduxjs-DExfEvEv.js";import{C as qe,U as se,S as la,P as ca,L as $e,M as ve,a as fe,E as Se,b as de,F as ss,c as Pe,d as Ue,T as da,e as ua,B as ma,f as ha,g as as,h as pa,i as xa,j as ga,k as rs,l as De,m as ns,n as we,o as ts,p as Qe,q as os,r as ja,s as Ea,t as is,u as ls,v as fa,A as Sa,w as Ca,x as Na,y as Ye,z as va,W as Ra,D as ba,X as Ke,G as Ta,H as He,I as ya,J as Ia,K as q,N as je,O as _a,Q as cs,R as Aa,V as Da,Y as Oa,Z as ds,_ as be,$ as Te,a0 as La}from"./lucide-react-Bk1NliVR.js";import{S as I}from"./sweetalert2-9Qm2jZ7z.js";import{C as us}from"./compressorjs-C46f8uP2.js";import{u as ms,f as ne,g as hs,a as ps,b as xs,c as gs,d as Pa,e as js}from"./@tanstack-C1bE7405.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./use-sync-external-store-ruIS0Fp4.js";import"./redux-BXkGT1VS.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./@standard-schema-DjkmAgHD.js";import"./reselect-utOO-l3Z.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const g of t)if(g.type==="childList")for(const l of g.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(t){const g={};return t.integrity&&(g.integrity=t.integrity),t.referrerPolicy&&(g.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?g.credentials="include":t.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function i(t){if(t.ep)return;t.ep=!0;const g=r(t);fetch(t.href,g)}})();const Es="USER_REGISTER_REQUEST",fs="USER_REGISTER_SUCCESS",Ss="USER_REGISTER_FAIL",Ua="USER_REGISTER_RESET",Cs="USER_SIGNIN_REQUEST",Fe="USER_SIGNIN_SUCCESS",Ns="USER_SIGNIN_FAIL",vs="USER_SIGNIN_RESET",Rs="USER_SIGNOUT",bs="USER_DETAILS_REQUEST",Ts="USER_DETAILS_SUCCESS",ys="USER_DETAILS_FAIL",wa="USER_DETAILS_RESET",Fa="USER_LIST_REQUEST",ka="USER_LIST_SUCCESS",Ma="USER_LIST_FAIL",Is="USER_UPDATE_PROFILE_REQUEST",_s="USER_UPDATE_PROFILE_SUCCESS",As="USER_UPDATE_PROFILE_FAIL",ge="USER_UPDATE_PROFILE_RESET",Ga="USER_UPDATE_REQUEST",Va="USER_UPDATE_SUCCESS",Ba="USER_UPDATE_FAIL",za="USER_UPDATE_RESET",qa=(a,s,r,i,t,g)=>async l=>{l({type:Es,payload:{email:s,password:t}});try{const{data:h}=await Ne.post("/api/users/register",{nombre:a,email:s,apellido:r,cedula:i,password:t,telefono:g});l({type:fs,payload:h}),l({type:Fe,payload:h}),localStorage.setItem("userInfo",JSON.stringify(h))}catch(h){l({type:Ss,payload:h.response&&h.response.data.message?h.response.data.message:h.message})}},$a=(a,s)=>async r=>{r({type:Cs,payload:{email:a,password:s}});try{const{data:i}=await Ne.post("/api/users/signin",{email:a,password:s});r({type:Fe,payload:i}),localStorage.setItem("userInfo",JSON.stringify(i))}catch(i){r({type:Ns,payload:i.response&&i.response.data.message?i.response.data.message:i.message})}},Qa=()=>a=>{localStorage.removeItem("userInfo"),localStorage.removeItem("cartItems"),localStorage.removeItem("shippingAddress"),a({type:Rs}),document.location.href="/signin"},Ya=a=>async(s,r)=>{s({type:bs,payload:a});const{userSignin:{userInfo:i}}=r();try{const{data:t}=await Ne.get(`/api/users/${a}`,{headers:{Authorization:`Bearer ${i.token}`}});s({type:Ts,payload:t})}catch(t){const g=t.response&&t.response.data.message?t.response.data.message:t.message;s({type:ys,payload:g})}},Ka=a=>async(s,r)=>{s({type:Is,payload:a});const{userSignin:{userInfo:i}}=r();try{const{data:t}=await Ne.put("/api/users/profile",a,{headers:{Authorization:`Bearer ${i.token}`}});s({type:_s,payload:t}),s({type:Fe,payload:t}),localStorage.setItem("userInfo",JSON.stringify(t))}catch(t){const g=t.response&&t.response.data.message?t.response.data.message:t.message;s({type:As,payload:g})}},Xe="/assets/logo2-tAg73i7j.png",Ds=ta({name:"splash",initialState:{isVisible:sessionStorage.getItem("splashShown")!=="true"},reducers:{hideSplash:a=>{a.isVisible=!1,sessionStorage.setItem("splashShown","true")}}}),{hideSplash:Ha}=Ds.actions,Xa=Ds.reducer,Wa=()=>{const a=Q(g=>g.splash.isVisible),s=oe(),[r,i]=o.useState(!1);if(o.useEffect(()=>{if(a){const l=setTimeout(()=>{i(!0),setTimeout(()=>{s(Ha())},500)},2500);return()=>clearTimeout(l)}},[a,s]),!a)return null;const t=`splash-screen splash-screen-fade-in ${r?"splash-screen-fade-out":""}`;return e.jsxs("div",{className:t,children:[e.jsx("img",{src:"/logosplash.jpg",alt:"Logo Manager Demoda",className:"splash-logo"}),e.jsx("h1",{className:"splash-text",children:"MANAGER"})]})};function Ja(){const[a]=o.useState(new Date),s=Q(u=>u.userSignin),r=Q(u=>u.splash.isVisible),{userInfo:i}=s,t=oe(),[g,l]=o.useState(!1),h=o.useRef(null),c=()=>{t(Qa()),l(!1)};return o.useEffect(()=>{const u=x=>{h.current&&!h.current.contains(x.target)&&l(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[h]),r?e.jsx(Wa,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid-container",children:[e.jsxs("header",{className:"app-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx(z,{to:"/",children:e.jsx("img",{className:"img-logo",src:Xe,alt:"logo"})}),e.jsxs("div",{className:"header-title-group",children:[e.jsx("h2",{className:"title-manager",children:"YULIET-APP"}),e.jsxs("span",{className:"negrita font-1 header-date",children:["caracas, ",ee(a.toISOString()).format("DD-MM-YYYY")]})]})]}),e.jsx("div",{className:"header-right",children:i?e.jsxs("div",{className:"user-menu",ref:h,children:[e.jsxs("button",{className:"user-menu-trigger",onClick:()=>l(!g),children:[e.jsx("span",{children:(i==null?void 0:i.nombre)&&i.nombre.substring(0,10)}),e.jsx(qe,{size:16,className:`chevron-icon ${g?"open":""}`})]}),g&&e.jsxs("div",{className:"user-dropdown",children:[e.jsxs(z,{to:"/profile",className:"dropdown-item",onClick:()=>l(!1),children:[e.jsx(se,{size:16}),e.jsx("span",{children:"Mi Perfil"})]}),i.isAdmin&&e.jsxs(z,{to:"/admin-menu",className:"dropdown-item",onClick:()=>l(!1),children:[e.jsx(la,{size:16}),e.jsx("span",{children:"Admin"})]}),e.jsxs("button",{onClick:c,className:"dropdown-item signout",children:[e.jsx(ca,{size:16}),e.jsx("span",{children:"Cerrar Sesión"})]})]})]}):e.jsxs(z,{to:"/signin",className:"header-login-button",children:[e.jsx($e,{size:18}),e.jsx("span",{children:"Iniciar Sesión"})]})})]}),e.jsx("main",{children:e.jsx(Ze,{})}),e.jsx("footer",{className:"app-footer",children:e.jsxs("span",{children:["© ",new Date().getFullYear()," D'moda-Manager. Todos los derechos reservados."]})})]})})}const Ee=Oe({reducerPath:"productosApi",baseQuery:Le({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const r=s().userSignin.userInfo.token;return r&&a.set("Authorization",`Bearer ${r}`),a}}),tagTypes:["Product"],endpoints:a=>({getProducts:a.query({query:()=>"/productos",providesTags:["Product"]}),getProductById:a.query({query:s=>`/productos/${s}`,providesTags:(s,r,i)=>[{type:"Product",id:i}]}),getProductByCode:a.query({query:s=>`/productos/buscarporcodigo/${s}`}),addProduct:a.mutation({query:s=>({url:"/productos",method:"POST",body:s}),invalidatesTags:["Product"]}),updateProduct:a.mutation({query:s=>({url:`/productos/${s._id}`,method:"PUT",body:s}),invalidatesTags:["Product"]}),deleteProduct:a.mutation({query:s=>({url:`/productos/${s}`,method:"DELETE"}),invalidatesTags:["Product"]})})}),{useGetProductsQuery:Os,useGetProductByIdQuery:Za,useAddProductMutation:er,useUpdateProductMutation:sr,useDeleteProductMutation:ar,useLazyGetProductByCodeQuery:rr}=Ee,ye=Oe({reducerPath:"clienteApi",baseQuery:Le({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const r=s().userSignin.userInfo.token;return r&&a.set("Authorization",`Bearer ${r}`),a}}),tagTypes:["Cliente"],endpoints:a=>({getClientes:a.query({query:()=>"/clientes",providesTags:s=>s?[...s.map(({_id:r})=>({type:"Cliente",id:r})),{type:"Cliente",id:"LIST"}]:[{type:"Cliente",id:"LIST"}]}),getCliente:a.query({query:s=>`/clientes/${s}`,providesTags:(s,r,i)=>[{type:"Cliente",id:i}]}),registerCliente:a.mutation({query:s=>({url:"/clientes/register",method:"POST",body:s}),invalidatesTags:[{type:"Cliente",id:"LIST"}]}),updateCliente:a.mutation({query:({id:s,...r})=>({url:`/clientes/${s}`,method:"PUT",body:r}),invalidatesTags:(s,r,{id:i})=>[{type:"Cliente",id:i},{type:"Cliente",id:"LIST"}]}),getClienteByRif:a.query({query:s=>`/clientes/rif/${s}`}),deleteCliente:a.mutation({query:s=>({url:`/clientes/${s}`,method:"DELETE"}),invalidatesTags:(s,r,i)=>[{type:"Cliente",id:i}]})})}),{useGetClientesQuery:Ls,useGetClienteQuery:nr,useRegisterClienteMutation:Ps,useDeleteClienteMutation:tr,useUpdateClienteMutation:or,useLazyGetClienteByRifQuery:Us}=ye,ir="PRODUCT_CREATE_REQUEST",lr="PRODUCT_CREATE_SUCCESS",cr="PRODUCT_CREATE_FAIL",dr="PRODUCT_CREATE_RESET",ur="PRODUCT_LIST_REQUEST",mr="PRODUCT_LIST_SUCCESS",hr="PRODUCT_LIST_FAIL",pr="PRODUCT_LIST_RESET",ws="PRODUCT_DETAILS_REQUEST",Fs="PRODUCT_DETAILS_SUCCESS",ks="PRODUCT_DETAILS_FAIL",xr="PRODUCT_ALL_REQUEST",gr="PRODUCT_ALL_SUCCESS",jr="PRODUCT_ALL_FAIL",Er="PRODUCT_CARGASTOCK_REQUEST",fr="PRODUCT_CARGASTOCK_SUCCESS",Sr="PRODUCT_CARGASTOCK_FAIL",Cr="PRODUCT_CARCGASTOCK_RESET",Nr=(a={},s)=>{switch(s.type){case ir:return{loading:!0};case lr:return{loading:!1,success:!0,product:s.payload};case cr:return{loading:!1,error:s.payload};case dr:return{};default:return a}},vr=(a={loading:!0,productos:[]},s)=>{switch(s.type){case ur:return{loading:!0};case mr:return{loading:!1,productos:s.payload.productos};case hr:return{loading:!1,error:s.payload};case pr:return{};default:return a}},Rr=(a={loading:!0},s)=>{switch(s.type){case ws:return{loading:!0};case Fs:return{loading:!1,product:s.payload};case ks:return{loading:!1,error:s.payload};default:return a}},br=(a={productos:[]},s)=>{switch(s.type){case xr:return{loading:!0};case gr:return{loading:!1,productos:s.payload.productos,unidades:s.payload.unidades,valor:s.payload.valor,categorias:s.payload.categorias,stockAG:s.payload.myStockAG[0].totalStockAG,stockAG3:s.payload.myStockAG3[0].totalStockAG3,stockDM2:s.payload.myStockDM2[0].totalStockDM2,stockDM3:s.payload.myStockDM3[0].totalStockDM3,stockDM:s.payload.myStockDM[0].totalStockDM,stockA:s.payload.myStockA[0].totalStockA,stockXZ:s.payload.myStockXZ[0].totalStockXZ,stockXZ3:s.payload.myStockXZ3[0].totalStockXZ3,textil:s.payload.textiles[0].totalTextil};case jr:return{loading:!1,error:s.payload};default:return a}},Tr=(a={},s)=>{switch(s.type){case Er:return{loading:!0};case fr:return{loading:!1,success:!0,procesados:s.payload.procesados};case Sr:return{loading:!1,error:s.payload};case Cr:return{};default:return a}},yr=(a={},s)=>{switch(s.type){case Es:return{loading:!0};case fs:return{loading:!1,userInfo:s.payload};case Ss:return{loading:!1,error:s.payload};default:return a}},Ir=(a={},s)=>{switch(s.type){case Cs:return{loading:!0};case Fe:return{loading:!1,userInfo:s.payload};case Ns:return{loading:!1,error:s.payload};case Rs:return{};case vs:return{};default:return a}},_r=(a={loading:!0},s)=>{switch(s.type){case bs:return{loading:!0};case Ts:return{loading:!1,user:s.payload};case ys:return{loading:!1,error:s.payload};case wa:return{loading:!0};default:return a}},Ar=(a={},s)=>{switch(s.type){case Is:return{loading:!0};case _s:return{loading:!1,success:!0};case As:return{loading:!1,error:s.payload};case ge:return{};default:return a}},Dr=(a={},s)=>{switch(s.type){case Ga:return{loading:!0};case Va:return{loading:!1,success:!0};case Ba:return{loading:!1,error:s.payload};case za:return{};default:return a}},Or=(a={loading:!0,users:[]},s)=>{switch(s.type){case Fa:return{loading:!0};case ka:return{loading:!1,vendedores:s.payload};case Ma:return{loading:!1,error:s.payload};default:return a}},Lr="ORDER_CREATE_REQUEST",Pr="ORDER_CREATE_SUCCESS",Ur="ORDER_CREATE_FAIL",wr="ORDER_CREATE_RESET",Fr="ORDER_DETAILS_REQUEST",kr="ORDER_DETAILS_SUCCESS",Mr="ORDER_DETAILS_FAIL",Gr="ORDER_DELETE_REQUEST",Vr="ORDER_DELETE_SUCCESS",Br="ORDER_DELETE_FAIL",zr="ORDER_DELETE_RESET",qr="ORDER_SUMMARY_REQUEST",$r="ORDER_SUMMARY_SUCCESS",Qr="ORDER_SUMMARY_FAIL",Yr="ORDER_ALL_REQUEST",Kr="ORDER_ALL_SUCCESS",Hr="ORDER_ALL_FAIL",Xr="GROUPBYDAY_REQUEST",Wr="GROUPBYDAY_SUCCESS",Jr="GROUPBYDAY_FAIL",Zr="CUADREDIA_REQUEST",en="CUADREDIA_SUCCESS",sn="CUADREDIA_FAIL",an="ORDER_WEEKLY_REQUEST",rn="ORDER_WEEKLY_SUCCESS",nn="ORDER_WEEKLY_FAIL",tn="ORDER_LIST_REQUEST",on="ORDER_LIST_SUCCESS",ln="ORDER_LIST_FAIL",cn="ORDER_CONSOLIDADO_REQUEST",dn="ORDER_CONSOLIDADO_SUCCESS",un="ORDER_CONSOLIDADO_FAIL",mn="ARTICULO_CONSOLIDADO_REQUEST",hn="ARTICULO_CONSOLIDADO_SUCCESS",pn="ARTICULO_CONSOLIDADO_FAIL",xn=(a={},s)=>{switch(s.type){case Lr:return{loading:!0};case Pr:return{loading:!1,success:!0,order:s.payload};case Ur:return{loading:!1,error:s.payload};case wr:return{};default:return a}},gn=(a={loading:!0},s)=>{switch(s.type){case Fr:return{loading:!0};case kr:return{loading:!1,order:s.payload};case Mr:return{loading:!1,error:s.payload};default:return a}},jn=(a={},s)=>{switch(s.type){case Gr:return{loading:!0};case Vr:return{loading:!1,success:!0};case Br:return{loading:!1,error:s.payload};case zr:return{};default:return a}},En=(a={loading:!0,summary:{}},s)=>{switch(s.type){case qr:return{loading:!0};case $r:return{loading:!1,summary:s.payload};case Qr:return{loading:!1,error:s.payload};default:return a}},fn=(a={cashea:[]},s)=>{switch(s.type){case Yr:return{loading:!0};case Kr:return{loading:!1,orders:s.payload.cashea,resumen:s.payload.resumenCashea[0]};case Hr:return{loading:!1,error:s.payload};default:return a}},Sn=(a={loading:!0,dailyOrders:{}},s)=>{switch(s.type){case Xr:return{loading:!0};case Wr:return{loading:!1,dailyOrders:s.payload};case Jr:return{loading:!1,error:s.payload};default:return a}},Cn=(a={orders:[],cash:{},puntoPlaza:[],puntoVenezuela:[],puntoBanesco:[]},s)=>{switch(s.type){case Zr:return{loading:!0};case en:return{loading:!1,orders:s.payload.orders,cash:s.payload.cash[0],puntoPlaza:s.payload.puntoPlaza,puntoVenezuela:s.payload.puntoVenezuela,puntoBanesco:s.payload.puntoBanesco};case sn:return{loading:!1,error:s.payload};default:return a}},Nn=(a={orders:[]},s)=>{switch(s.type){case an:return{loading:!0};case rn:return{loading:!1,orders:s.payload.orders};case nn:return{loading:!1,error:s.payload};default:return a}},vn=(a={orders:[]},s)=>{switch(s.type){case tn:return{loading:!0};case on:return{loading:!1,orders:s.payload.orders};case ln:return{loading:!1,error:s.payload};default:return a}},Rn=(a={ventasGlobales:[]},s)=>{switch(s.type){case cn:return{loading:!0};case dn:return{loading:!1,ventasGlobales:s.payload.ventasGlobales};case un:return{loading:!1,error:s.payload};default:return a}},bn=(a={ventasGlobales:[]},s)=>{switch(s.type){case mn:return{loading:!0};case hn:return{loading:!1,ventasGlobales:s.payload.ventasGlobales};case pn:return{loading:!1,error:s.payload};default:return a}},Tn="CLIENTE_REGISTER_REQUEST",yn="CLIENTE_REGISTER_SUCCESS",In="CLIENTE_REGISTER_FAIL",_n="CLIENTE_REGISTER_RESET",An="CLIENTE_DETAILS_REQUEST",Dn="CLIENTE_DETAILS_SUCCESS",On="CLIENTE_DETAILS_FAIL",Ln="CLIENTE_DETAILS_RESET",Pn="CLIENTE_LIST_REQUEST",Un="CLIENTE_LIST_SUCCESS",wn="CLIENTE_LIST_FAIL",Fn="CLIENTE_LIST_RESET",kn="CLIENTE_UPDATE_PROFILE_REQUEST",Mn="CLIENTE_UPDATE_PROFILE_SUCCESS",Gn="CLIENTE_UPDATE_PROFILE_FAIL",Vn="CLIENTE_UPDATE_PROFILE_RESET",Bn=(a={loading:!0},s)=>{switch(s.type){case Tn:return{loading:!0};case yn:return{loading:!1,cliente:s.payload};case In:return{loading:!1,error:s.payload};case _n:return{};default:return a}},zn=(a={loading:!0},s)=>{switch(s.type){case An:return{loading:!0};case Dn:return{loading:!1,cliente:s.payload};case On:return{loading:!1,error:s.payload};case Ln:return{};default:return a}},qn=(a={},s)=>{switch(s.type){case kn:return{loading:!0};case Mn:return{loading:!1,success:!0};case Gn:return{loading:!1,error:s.payload};case Vn:return{};default:return a}},$n=(a={clientes:[]},s)=>{switch(s.type){case Pn:return{loading:!0};case Un:return{loading:!1,clientes:s.payload.clientes};case wn:return{loading:!1,error:s.payload};case Fn:return{};default:return a}},Qn="REPOSICION_CREATE_REQUEST",Yn="REPOSICION_CREATE_SUCCESS",Kn="REPOSICION_CREATE_FAIL",Hn="REPOSICION_CREATE_RESET",Xn="REPOSICION_DETAILS_REQUEST",Wn="REPOSICION_DETAILS_SUCCESS",Jn="REPOSICION_DETAILS_FAIL",Zn="REPOSICION_LIST_REQUEST",et="REPOSICION_LIST_SUCCESS",st="REPOSICION_LIST_FAIL",at="REPOSICION_DELETE_REQUEST",rt="REPOSICION_DELETE_SUCCESS",nt="REPOSICION_DELETE_FAIL",tt="REPOSICION_DELETE_RESET",ot="REPOSICION_UPDATE_STATUS_REQUEST",it="REPOSICION_UPDATE_STATUS_SUCCESS",lt="REPOSICION_UPDATE_STATUS_FAIL",ct="REPOSICION_UPDATE_STATUS_RESET",dt=(a={},s)=>{switch(s.type){case Qn:return{loading:!0};case Yn:return console.log("action.payload.reposicion",s.payload.reposicion),{loading:!1,success:!0,reposicion:s.payload};case Kn:return{loading:!1,error:s.payload};case Hn:return{};default:return a}},ut=(a={},s)=>{switch(s.type){case Xn:return{loading:!0};case Wn:return{loading:!1,reposicion:s.payload.reposicion};case Jn:return{loading:!1,error:s.payload};default:return a}},mt=(a={reposiciones:[]},s)=>{switch(s.type){case Zn:return{loading:!0};case et:return{loading:!1,reposiciones:s.payload.reposiciones};case st:return{loading:!1,error:s.payload};default:return a}},ht=(a={},s)=>{switch(s.type){case at:return{loading:!0};case rt:return{loading:!1,success:!0};case nt:return{loading:!1,error:s.payload};case tt:return{};default:return a}},pt=(a={},s)=>{switch(s.type){case ot:return{loading:!0};case it:return{loading:!1,success:!0};case lt:return{loading:!1,error:s.payload};case ct:return{};default:return a}},Ie=Oe({reducerPath:"usersApi",baseQuery:Le({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const r=s().userSignin.userInfo.token;return r&&a.set("authorization",`Bearer ${r}`),a}}),endpoints:a=>({getUsers:a.query({query:()=>"/users"}),getVendedores:a.query({query:()=>"/users/vendedores"}),getUser:a.query({query:s=>`/user/${s}`}),registerUser:a.mutation({query:(s,r,i,t,g,l,h)=>({url:"/users/register",method:"POST",body:{nombre:s,rif:r,email:i,celular:t,direccion:g,canal:l,timestamp:h}}),invalidatesTags:["Users"]})})}),{useGetVendedoresQuery:Ms}=Ie,_e=Oe({reducerPath:"orderApi",baseQuery:Le({baseUrl:"/api",prepareHeaders:(a,{getState:s})=>{const r=s().userSignin.userInfo.token;return r&&a.set("Authorization",`Bearer ${r}`),a}}),tagTypes:["Order"],endpoints:a=>({getOrders:a.query({query:()=>"/orders",providesTags:["Order"]}),getCambio:a.query({query:()=>"/orders/cambiobcv"}),getOrder:a.query({query:s=>`/orders/${s}`,providesTags:(s,r,i)=>[{type:"Order",id:i}]}),getCuadreDiario:a.query({query:s=>({url:"/orders/cuadrediario",params:{fecha:s}})}),getGroupedByDay:a.query({query:()=>"/orders/groupedbyday",providesTags:["Order"]}),createOrder:a.mutation({query:s=>({url:"/orders",method:"POST",body:s}),invalidatesTags:["Order"]}),deleteOrder:a.mutation({query:s=>({url:`/orders/${s}`,method:"DELETE"}),invalidatesTags:["Order"]})})}),{useGetOrdersQuery:xt,useGetOrderQuery:Gs,useGetCambioQuery:Vs,useCreateOrderMutation:gt,useGetGroupedByDayQuery:jt}=_e,Et={userSignin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Bs=oa({reducer:{splash:Xa,userSignin:Ir,userRegister:yr,userDetails:_r,userUpdateProfile:Ar,userUpdate:Dr,userList:Or,productCreate:Nr,productList:vr,productDetails:Rr,productAll:br,productCargaStock:Tr,orderList:vn,orderCreate:xn,orderDetails:gn,orderDelete:jn,orderSummary:En,orderAll:fn,cuadreDia:Cn,orderGroupDay:Sn,weeklyOrdersReport:Nn,clienteDetails:zn,clienteUpdateProfile:qn,clienteList:$n,clienteRegister:Bn,reposicionCreate:dt,detailsReposicion:ut,reposicionList:mt,reposicionDelete:ht,reposicionUpdateStatus:pt,consolidadoOrdersReport:Rn,consolidadoArticulosReport:bn,[Ee.reducerPath]:Ee.reducer,[ye.reducerPath]:ye.reducer,[Ie.reducerPath]:Ie.reducer,[_e.reducerPath]:_e.reducer},middleware:a=>a().concat(Ee.middleware,ye.middleware,Ie.middleware,_e.middleware),preloadedState:Et});ia(Bs.dispatch);const ft=()=>{const a=Q(r=>r.userSignin),{userInfo:s}=a;return s?e.jsx(Ze,{}):e.jsx(ea,{to:"/signin"})},te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAANlBMVEVFRUVAQEA6Ojo1NTUxMTGFhYaVlZehoqOysrMkJCTh4eLr6+vU1NXExMVsbG1cXF0VFRVQUFASrDoiAAACRUlEQVR42rXT247rIAwFUNsY2+Hm+P9/9gBJm4w0mrezFRUVFhuqKpD+CN9J84HX9B8+MXy3XsPjn4U9CbsKAgLnAEi0F4kuiBFX1QW9t9YMeKiKSh5Os2RR0FI6Mm1IxN5KrUWYwof0UpoO2qW51donSfSCrY3jPM+Dcq+l50jErnOhE29IROlqbAYp8cRgrWv2hNluOLMgjwVr6znRTDpYuqoEivY6YbohfqGNRCtTqkhGD3lDSqO3qla7SRDhkiAiOu+sG+LdSAtmL8004/qOxEMnDf4NnrmZ6VgOMYWo6Ehayxcipg0Psv0Tlps466S0GvGCiHcjs3ebcjOiBRUWhL31BZHzhJYJkRzGgvErhESiYt2JXGNBc63lgXBDRA5VawakfUN9w5kbwpRjwiK59XgfDRviCxKJ9VKmPbLOoJbn6HcjsFtvs4VZphO+IGz4NM4g59ZKHWeYqY1jQ1wL68Eb7na0VvXg3E0V+QNx4Rsm2PdgL42OsG6zkC643bvxPnyB1rsy4wfCj8aPPDmX1gwO/MA7T+MOk9RaepwEX4hfWPJx/6EwrNZqcCaA5+gHWh4e4SNrm3XjmH3wa+M6zVTVTLMf54GwYa0LfuNXIgAT75f7uzCCH0fnKwcTLYcEgGtXgifhQBQwH4zdAwg+AgEj6GEYpuoknky8O2fVTGsuEFV/QKUsyYOmMEcjMAhlyeyr4Q1dMwFCFhEn86EYCjp2+euOkSXDypjx5Dp1iGTE7DEQniDSNc7sTwIkpHviP+UfbJwh+oK7LY4AAAAASUVORK5CYII=";function St(){const a=ae(),[s,r]=o.useState(""),[i,t]=o.useState(""),[g,l]=o.useState(!1),{search:h}=es(),c=new URLSearchParams(h).get("redirect"),u=c||"/",x=Q(R=>R.userSignin),{userInfo:p,loading:d,error:m}=x,n=oe(),S=R=>{R.preventDefault(),n($a(s,i))};return o.useEffect(()=>{p&&a(u)},[a,u,p]),o.useEffect(()=>{if(m){const R=setTimeout(()=>{n({type:vs})},4e3);return()=>clearTimeout(R)}},[n,m]),e.jsx("div",{className:"signin-container",children:e.jsxs("form",{className:"signin-form",onSubmit:S,children:[e.jsx("img",{src:te,alt:"Logo",className:"signin-logo"}),e.jsx("h2",{children:"Iniciar Sesión"}),e.jsxs("div",{className:"input-group",children:[e.jsx(ve,{className:"input-icon"}),e.jsx("input",{type:"email",placeholder:"Ingrese su Email",required:!0,value:s,onChange:R=>r(R.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(fe,{className:"input-icon"}),e.jsx("input",{type:g?"text":"password",placeholder:"Ingrese su Clave",required:!0,value:i,onChange:R=>t(R.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>l(!g),children:g?e.jsx(Se,{}):e.jsx(de,{})})]}),m&&e.jsx("p",{className:"signin-error",children:m}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:d,children:[d?e.jsx("div",{className:"spinner"}):e.jsx($e,{}),e.jsx("span",{children:d?"Verificando...":"Entrar"})]})}),e.jsx("div",{className:"signin-footer",children:e.jsx(z,{to:`/register?redirect=${u}`,children:"Crear Cuenta"})})]})})}function Ct(){const a=ae(),[s,r]=o.useState(""),[i,t]=o.useState(""),[g,l]=o.useState(""),[h,c]=o.useState(""),[u,x]=o.useState(""),[p,d]=o.useState(""),[m,n]=o.useState(""),[S,R]=o.useState(!1),[v,j]=o.useState(!1),[T,f]=o.useState(null),{search:A}=es(),U=new URLSearchParams(A).get("redirect"),M=U||"/",k=Q(N=>N.userRegister),{userInfo:w,loading:y,error:L}=k,E=oe(),C=N=>{N.preventDefault(),p!==m?f("Las contraseñas no coinciden"):(f(null),E(qa(s,h,i,g,p,u)))};return o.useEffect(()=>{w&&a(M)},[a,M,w]),o.useEffect(()=>{if(L){const N=setTimeout(()=>{E({type:Ua})},4e3);return()=>clearTimeout(N)}},[E,L]),e.jsx("div",{className:"signin-container",children:e.jsxs("form",{className:"signin-form",onSubmit:C,style:{gap:"1rem"},children:[e.jsx("img",{src:te,alt:"Logo",className:"signin-logo"}),e.jsx("h2",{children:"Crear Cuenta"}),e.jsxs("div",{className:"input-group",children:[e.jsx(se,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Nombre",required:!0,value:s,onChange:N=>r(N.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(se,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Apellido",required:!0,value:i,onChange:N=>t(N.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(ve,{className:"input-icon"}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,value:h,onChange:N=>c(N.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(fe,{className:"input-icon"}),e.jsx("input",{type:S?"text":"password",placeholder:"Clave",required:!0,value:p,onChange:N=>d(N.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>R(!S),children:S?e.jsx(Se,{}):e.jsx(de,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(fe,{className:"input-icon"}),e.jsx("input",{type:v?"text":"password",placeholder:"Confirmar Clave",required:!0,value:m,onChange:N=>n(N.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>j(!v),children:v?e.jsx(Se,{}):e.jsx(de,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(ss,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Cédula",required:!0,value:g,onChange:N=>l(N.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Pe,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Teléfono",required:!0,value:u,onChange:N=>x(N.target.value)})]}),(L||T)&&e.jsx("p",{className:"signin-error",children:L||T}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:y,children:[y?e.jsx("div",{className:"spinner"}):e.jsx($e,{}),e.jsx("span",{children:y?"Registrando...":"Registrar"})]})}),e.jsxs("div",{className:"signin-footer",children:[e.jsx("span",{children:"¿Ya tienes una cuenta? "}),e.jsx(z,{to:`/signin?redirect=${M}`,children:"Inicia Sesión"})]})]})})}function Nt(){const[a,s]=o.useState(""),[r,i]=o.useState(""),[t,g]=o.useState(""),[l,h]=o.useState(""),[c,u]=o.useState(""),[x,p]=o.useState(""),[d,m]=o.useState(""),[n,S]=o.useState(!1),[R,v]=o.useState(!1),[j,T]=o.useState(null),f=Q(D=>D.userSignin),{userInfo:A}=f,U=Q(D=>D.userDetails),{loading:M,error:k,user:w}=U,y=Q(D=>D.userUpdateProfile),{success:L,error:E,loading:C}=y,N=oe();o.useEffect(()=>{w?(s(w.nombre||" "),i(w.email||" "),u(w.apellido||" "),p(w.cedula||" "),m(w.telefono||" ")):(N({type:ge}),N(Ya(A._id)))},[N,A._id,w,L]);const F=D=>{D.preventDefault(),t!==l?T("Las contraseñas no coinciden"):(T(null),N(Ka({userId:w._id,nombre:a,email:r,password:t,apellido:c,cedula:x,telefono:d})))};return o.useEffect(()=>{L&&(I.fire({title:"Datos Actualizado con Exito!",text:"Editar Perfil",imageUrl:te,imageWidth:70,imageHeight:70,imageAlt:"logo"}),N({type:ge}))},[N,L]),o.useEffect(()=>{E&&(I.fire({title:"error",text:"Editar Perfil",imageUrl:te,imageWidth:70,imageHeight:70,imageAlt:"logo"}),N({type:ge}))},[N,E]),o.useEffect(()=>{k&&(I.fire("Ocurrio un Error al Actualizar!","",k),N({type:ge}))},[N,k]),e.jsx("div",{className:"signin-container",children:e.jsxs("form",{className:"signin-form",onSubmit:F,style:{gap:"1rem"},children:[e.jsx("img",{src:te,alt:"Logo",className:"signin-logo"}),e.jsx("h2",{children:"Perfil de Usuario"}),M?e.jsx("p",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx(se,{className:"input-icon"}),e.jsx("input",{id:"nombre",type:"text",placeholder:"Nombre",value:a,onChange:D=>s(D.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(se,{className:"input-icon"}),e.jsx("input",{id:"apellido",type:"text",placeholder:"Apellido",value:c,onChange:D=>u(D.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(ve,{className:"input-icon"}),e.jsx("input",{id:"email",type:"email",placeholder:"Email",value:r,onChange:D=>i(D.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(fe,{className:"input-icon"}),e.jsx("input",{id:"password",type:n?"text":"password",placeholder:"Nueva clave (opcional)",onChange:D=>g(D.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>S(!n),children:n?e.jsx(Se,{}):e.jsx(de,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(fe,{className:"input-icon"}),e.jsx("input",{id:"confirmPassword",type:R?"text":"password",placeholder:"Confirmar nueva clave",onChange:D=>h(D.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>v(!R),children:R?e.jsx(Se,{}):e.jsx(de,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(ss,{className:"input-icon"}),e.jsx("input",{id:"cedula",type:"text",placeholder:"Cédula",value:x,onChange:D=>p(D.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Pe,{className:"input-icon"}),e.jsx("input",{id:"telefono",type:"text",placeholder:"Teléfono",value:d,onChange:D=>m(D.target.value)})]}),(E||j)&&e.jsx("p",{className:"signin-error",children:E||j}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:C,children:[C?e.jsx("div",{className:"spinner"}):e.jsx(Ue,{}),e.jsx("span",{children:C?"Actualizando...":"Actualizar Perfil"})]})})]})]})})}const We=({label:a,value:s,icon:r,isError:i})=>{const t=i?"No disponible":`Bs. ${Number(s).toLocaleString("es-VE",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return e.jsxs("div",{className:"cambio-card",children:[r,e.jsxs("span",{className:"cambio-label",children:[a,":"]}),e.jsx("span",{className:`cambio-value ${i?"error":""}`,children:t})]})},zs=()=>{const{data:a,isError:s,isLoading:r}=Vs({},{pollingInterval:3e5});if(r)return null;const i=[e.jsx(We,{label:"BCV",value:a==null?void 0:a.cambiobcv,icon:e.jsx(da,{size:14}),isError:s||!(a!=null&&a.cambiobcv)},"bcv"),e.jsx(We,{label:"Euro",value:a==null?void 0:a.euro,icon:e.jsx(ua,{size:14}),isError:s||!(a!=null&&a.euro)},"euro")];return e.jsx("div",{className:"cambio-marquee-container",children:e.jsxs("div",{className:"cambio-marquee-content",children:[i,i.map(t=>Ae.cloneElement(t,{"aria-hidden":!0}))]})})},vt=[{to:"/facturacion",icon:e.jsx(ma,{}),label:"Venta Detal",isPrimary:!0},{to:"/verpedidos",icon:e.jsx(ha,{}),label:"Lista de Ventas"},{to:"/verproductos",icon:e.jsx(as,{}),label:"Catalogo"},{to:"/ventasdiarias",icon:e.jsx(pa,{}),label:"Ventas Diarias"},{to:"/enconstruccion",icon:e.jsx(xa,{}),label:"Dashboard"}],Rt=({to:a,icon:s,label:r,isPrimary:i,isExternal:t,children:g})=>{const l=`home-card ${i?"primary":""}`,h=e.jsxs(e.Fragment,{children:[s,g,e.jsx("span",{children:r}),t&&e.jsx(ga,{className:"external-link-icon"})]});return t?e.jsx("a",{href:a,rel:"noopener noreferrer",target:"_blank",className:l,children:h}):e.jsx(z,{to:a,className:l,children:h})},bt=({title:a,cards:s})=>e.jsxs("section",{className:"dashboard-section",children:[e.jsx("h2",{className:"section-title",children:a}),e.jsx("div",{className:"section-grid",children:s.map(r=>e.jsx(Rt,{...r},r.label))})]});function Tt(){const a=Q(r=>r.userSignin),{userInfo:s}=a;return s?e.jsxs(e.Fragment,{children:[e.jsx(zs,{}),e.jsx("div",{className:"dashboard-container",children:e.jsx(bt,{title:"Ventas y Pedidos",cards:vt})})]}):e.jsxs("div",{className:"not-userinfo",children:[e.jsx("img",{src:Xe,alt:"fachada"}),";"]})}function ie(a){return e.jsxs("div",{className:"flx jcenter font-1",children:[e.jsx("div",{className:a.tipo==="mini"?"loader mini":"loader"}),e.jsx("span",{children:a.txt})]})}function yt({currentPage:a,totalPages:s,onPageChange:r}){const i=()=>{a>1&&r(a-1)},t=()=>{a<s&&r(a+1)};return e.jsx("div",{className:"tankstack-pagination-container",children:e.jsxs("div",{className:"tankstack-pagination-botonera",children:[e.jsx("button",{onClick:i,disabled:a===1,children:"Anterior"}),e.jsxs("span",{children:["Página ",a," de ",s]}),e.jsx("button",{onClick:t,disabled:a===s,children:"Siguiente"})]})})}function It(){const a=ae(),{data:s,isLoading:r,isError:i,error:t}=Ls(),[g,{isLoading:l}]=tr(),[h,c]=o.useState(""),[u,x]=o.useState(1),p=12,d=o.useMemo(()=>s?s.filter(v=>v.nombre.toLowerCase().includes(h.toLowerCase())||v.rif.toLowerCase().includes(h.toLowerCase())):[],[s,h]),m=Math.ceil(d.length/p),n=o.useMemo(()=>{const v=(u-1)*p;return d.slice(v,v+p)},[d,u,p]),S=v=>{c(v.target.value),x(1)},R=(v,j)=>{I.fire({title:`¿Estás seguro de eliminar a ${j}?`,text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async T=>{if(T.isConfirmed)try{await g(v).unwrap(),I.fire("Eliminado","El cliente ha sido eliminado.","success")}catch{I.fire("Error","No se pudo eliminar el cliente.","error")}})};return r?e.jsx(ie,{txt:"Cargando clientes..."}):i?e.jsxs("div",{className:"error-message",children:["Error al cargar los clientes: ",t.message]}):e.jsxs("div",{className:"client-report-container",children:[e.jsxs("div",{className:"client-report-header",children:[e.jsx("h2",{className:"section-title",children:"Directorio de Clientes"}),e.jsxs("div",{className:"client-report-actions",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(rs,{className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o RIF...",value:h,onChange:S})]}),e.jsxs("button",{className:"add-client-btn",onClick:()=>a("/cliente/nuevo"),children:[e.jsx(De,{size:20}),e.jsx("span",{children:"Crear Cliente"})]})]})]}),e.jsx("div",{className:"client-grid",children:n.map((v,j)=>e.jsxs("div",{className:"client-card",style:{animationDelay:`${j*40}ms`},children:[e.jsxs("div",{className:"client-card-header",children:[e.jsx("div",{className:"client-avatar",children:e.jsx(se,{size:24})}),e.jsxs("div",{className:"client-info",children:[e.jsx("h3",{className:"client-name",children:v.nombre}),e.jsxs("p",{className:"client-rif",children:["RIF/CI: ",v.rif]})]})]}),e.jsxs("div",{className:"client-card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",v.celular||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dirección:"})," ",v.direccion||"N/A"]})]}),e.jsxs("div",{className:"client-card-footer",children:[e.jsxs("span",{className:"client-date",children:["Creado: ",ee(v.timestamp).format("DD/MM/YYYY")]}),e.jsxs("div",{className:"client-card-actions",children:[e.jsx("button",{className:"icon-btn edit-btn",onClick:()=>a(`/cliente/${v._id}/edit`),title:"Editar Cliente",children:e.jsx(ns,{size:18})}),e.jsx("button",{className:"icon-btn delete-btn",onClick:()=>R(v._id,v.nombre),disabled:l,title:"Eliminar Cliente",children:e.jsx(we,{size:18})})]})]})]},v._id))}),d.length===0&&!r&&e.jsxs("div",{className:"empty-state",children:[e.jsx(se,{size:48}),e.jsx("p",{children:h?"No se encontraron clientes que coincidan con la búsqueda.":"No hay clientes registrados."})]}),m>1&&e.jsx(yt,{currentPage:u,totalPages:m,onPageChange:x})]})}const qs=["","Sin Marca","Otro","Puma","Salomon","Nike","Adidas","Vans","Generico","Louis Vuitton","D&G","Valentino","Prada","Fendi","Phillip Plain","Burberry","Converse","Alexander mcQueen","Balenciaga","Birkenstock","Dior","New Balance","Asics","Polo","Lacoste","Boss","Enporio","Gant","Tommy Hilfiger","Fila","Columbia","Gorila","Under Armon","Calvin Klein","DQ2","Jordan","Gucci","Lagerfeld","Monclear","Palm","Versace","X OFF","Zoom"],$s=["","CALZADO","TEXTILES","ACCESORIOS","UTENSILIOS","JUGUETES","OTROS"],Qs=["","Blanco","Negro","Gris","Azul","Verde","Amarillo","Rojo","Rosado","Morado","Vinotinto","Celeste","Naranja","Fucsia","Marron","Beige","Dorado","Plateado","Varios","Otro"],Ys=["","Archlight","Arizona Eva","Awaiking","Drawstring","Greca","Ikonik","One","Oversized","Portofino","Ramsey","Rivoli","Rocksrunner","Roma","Runnning","San Bartolo","Trainer","VL7N","White Tigreca","Zero","Airforce 1","Jordan 1","Retro 1","Retro 2","Retro 3","Retro 4","Retro 5","Retro 6","Retro 11","AirMax","Bad Bunny","Benito","Superstar","Nike-SB","Otro","Stay Loyal 2","Retro 12","Jordan 13","Sin Modelo","Generico"],Ks=["","Alta Gama","Casual","Deportivo","Sandalias","Camisa","Franela","Short","Mono","Chemise","Sweater","Otro"],Hs=["","Dama","Caballero","Niño","Unisex","N/A"],_t=["","INSTAGRAM","TIK-TOK","FACEBOOK","REFERIDO","CUENTA-PROPIA","RECOMENDADO","EMISORA-RADIO","TELEVISION","PUBLICIDAD","FLYERS"],Xs=[{value:"T20",label:"20"},{value:"T21",label:"21"},{value:"T22",label:"22"},{value:"T23",label:"23"},{value:"T24",label:"24"},{value:"T25",label:"25"},{value:"T26",label:"26"},{value:"T27",label:"27"},{value:"T28",label:"28"},{value:"T29",label:"29"},{value:"T30",label:"30"},{value:"T31",label:"31"},{value:"T32",label:"32"},{value:"T33",label:"33"},{value:"T34",label:"34"},{value:"T35",label:"35"},{value:"T36",label:"36"},{value:"T37",label:"37"},{value:"T38",label:"38"},{value:"T39",label:"39"},{value:"T40",label:"40"},{value:"T41",label:"41"},{value:"T42",label:"42"},{value:"T43",label:"43"},{value:"T44",label:"44"},{value:"T45",label:"45"},{value:"T46",label:"46"},{value:"T47",label:"47"},{value:"TXS",label:"XS"},{value:"TSS",label:"SS"},{value:"TS",label:"S"},{value:"TM",label:"M"},{value:"TL",label:"L"},{value:"TXL",label:"XL"},{value:"T2XL",label:"2XL"},{value:"T3XL",label:"3XL"},{value:"T4XL",label:"4XL"},{value:"T5XL",label:"5XL"},{value:"T6XL",label:"6XL"},{value:"TU",label:"U"},{value:"TG",label:"G"}];function At(a){const s=Ce(),r=ae(),{id:i}=s,{data:t,isLoading:g,isError:l}=Za(i),[h,{isLoading:c,isSuccess:u,isError:x,error:p}]=sr(),[d,m]=o.useState({codigo:"",categoria:"CALZADO",marca:"",modelo:"",color:"",genero:"",preciousd:"",tipo:"",tallas:{}}),n=oe(),[S,R]=o.useState(""),[v,j]=o.useState(""),[T,f]=o.useState(null),[A,U]=o.useState(!1),[M,k]=o.useState(0),w=Xs.flatMap(b=>b.label),y=o.useMemo(()=>[...qs].sort(),[]),L=o.useMemo(()=>[...Ys].sort(),[]),E=o.useMemo(()=>[...Ks].sort(),[]),C=o.useMemo(()=>[...Qs].sort(),[]),N=o.useMemo(()=>d?Object.values(d.tallas||{}).reduce((b,V)=>b+(Number(V)||0),0):0,[d]);o.useEffect(()=>{t&&(m({codigo:t.codigo||"",categoria:t.categoria||"CALZADO",marca:t.marca||"",modelo:t.modelo||"",color:t.color||"",genero:t.genero||"",preciousd:t.preciousd||"",tipo:t.tipo||"",tallas:t.tallas||{}}),R(t.imageurl||""),f(t.imageurl||null))},[t]),o.useEffect(()=>{if(!v)return;(()=>{U(!0),k(0);const V=new FormData;V.append("file",v),V.append("upload_preset","ronald_preset"),V.append("cloud_name","ronaldimg"),V.append("folder","productos"),fetch("https://api.cloudinary.com/v1_1/ronaldimg/image/upload",{method:"post",body:V}).then($=>$.json()).then($=>{k(100),R($.secure_url)}).catch($=>{I.fire("Error de Carga","No se pudo subir la imagen a Cloudinary.","error"),console.log($)})})()},[v]),o.useEffect(()=>{var b;x&&I.fire({title:"Error al Actualizar",text:((b=p==null?void 0:p.data)==null?void 0:b.message)||"Ocurrió un error.",icon:"error"}),u&&I.fire({title:"Producto Actualizado!",text:"La información del producto se ha guardado correctamente.",icon:"success"}).then(()=>{r("/verproductos")})},[u,x,p,r]);const F=async b=>{b.preventDefault();try{await h({_id:i,...d,existencia:N,imageurl:S}).unwrap(),n(Ee.util.invalidateTags(["Product"]))}catch(V){console.error("Failed to update product:",V)}},D=b=>{const{name:V,value:$}=b.target;m(W=>({...W,[V]:$}))},X=b=>{const{name:V,value:$}=b.target,W=$===""?0:Number($);m(le=>({...le,tallas:{...le.tallas,[V]:W}}))};return g?e.jsx("div",{className:"loading",children:"Cargando datos del producto..."}):l?e.jsx("div",{className:"error",children:"Error al cargar la información del producto."}):d.codigo?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flx column pad-0 jcenter",children:[e.jsxs("h2",{className:"editar pad-05",children:["EDITAR PRODUCTO ",d==null?void 0:d.codigo]}),e.jsxs("form",{className:"signin-form",onSubmit:F,style:{maxWidth:"700px",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Información Principal"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Código"}),e.jsx("input",{type:"text",name:"codigo",required:!0,placeholder:"CODIGO",value:d.codigo.toUpperCase(),onChange:D,disabled:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Precio (USD)"}),e.jsx("input",{type:"number",name:"preciousd",required:!0,placeholder:"Ej: 25.00",value:d.preciousd,onChange:D})]})]})]}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Clasificación"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Categoría"}),e.jsxs("select",{name:"categoria",value:d.categoria,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),$s.map(b=>e.jsx("option",{value:b,children:b},b))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Género"}),e.jsxs("select",{name:"genero",value:d.genero,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),Hs.map(b=>e.jsx("option",{value:b,children:b},b))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Marca"}),e.jsxs("select",{name:"marca",value:d.marca,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),y.map(b=>e.jsx("option",{value:b,children:b},b))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Modelo"}),e.jsxs("select",{name:"modelo",value:d.modelo,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),L.map(b=>e.jsx("option",{value:b,children:b},b))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tipo"}),e.jsxs("select",{name:"tipo",value:d.tipo,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),E.map(b=>e.jsx("option",{value:b,children:b},b))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsxs("select",{name:"color",value:d.color,onChange:D,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),C.map(b=>e.jsx("option",{value:b,children:b},b))]})]})]})]}),(d.categoria==="CALZADO"||d.categoria==="TEXTILES")&&d.genero&&e.jsxs("div",{className:"form-section w100p",children:[e.jsxs("h3",{children:["Existencia por Talla (",N," unidades)"]}),e.jsx("div",{className:"flx jcenter wrap pad-0",style:{gap:"0.5rem"},children:w.map(b=>d.categoria==="CALZADO"&&(d.genero==="Dama"&&(Number(b)<35||Number(b)>40||isNaN(b))||d.genero==="Caballero"&&(Number(b)<40||isNaN(b))||d.genero==="Niño"&&(Number(b)>35||isNaN(b)))?null:e.jsxs("div",{className:"edit-span-tallas",children:[e.jsx("span",{children:b}),e.jsx("input",{type:"number",value:d.tallas[b]||"",className:"input-talla",name:b,onChange:X,placeholder:"0"})]},b))})]}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Imagen del Producto"}),e.jsxs("div",{className:"edit-image-container mb-1 mtop-1",children:[e.jsxs("div",{className:"input-file-container",onClick:()=>document.querySelector(".input-field").click(),children:[e.jsx("input",{type:"file",accept:"image/*",className:"input-field",hidden:!0,onChange:({target:{files:b}})=>{b&&b[0]&&new us(b[0],{quality:.6,success:V=>{f(URL.createObjectURL(V)),j(V)}})}}),T?e.jsx("img",{src:T,alt:"Vista previa"}):e.jsxs("div",{className:"upload-icon",children:[e.jsx(ts,{size:48,color:"#888"}),e.jsx("p",{children:"Selecciona una imagen"})]})]}),A&&e.jsx("div",{className:"upload-img-info",children:M<100?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"animate-spin"}),e.jsx("span",{children:"Subiendo..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(os,{color:"green"}),e.jsx("span",{children:"Imagen Cargada"})]})}),e.jsx("p",{className:"font-x centrado",children:"Click en el recuadro para seleccionar o cambiar la imagen"})]})]}),e.jsx("div",{className:"form-actions w100p",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:c||A,children:[c||A?e.jsx("div",{className:"spinner"}):e.jsx(Ue,{}),e.jsx("span",{children:c?"Actualizando...":"Actualizar Producto"})]})})]})]})}):null}const Dt={nombre:"",email:"",rif:"",direccion:"",celular:"",canal:""};function Ot(){const a=ae(),s=Ce(),{id:r}=s,i=!!r,[t,g]=o.useState(Dt),[l,h]=o.useState({}),{data:c,isLoading:u}=nr(r,{skip:!i}),[x,{isLoading:p}]=Ps(),[d,{isLoading:m}]=or();o.useEffect(()=>{i&&c&&g({nombre:c.nombre||"",email:c.email||"",rif:c.rif||"",direccion:c.direccion||"",celular:c.celular||"",canal:c.canal||""})},[c,i]);const n=j=>{const{name:T,value:f}=j.target;g(A=>({...A,[T]:f})),l[T]&&h(A=>({...A,[T]:null}))},S=()=>{const j={};return t.nombre||(j.nombre="El nombre es obligatorio."),t.rif?/^[VJGjvgEPe]\d{6,9}$/i.test(t.rif)||(j.rif="Formato de RIF/CI inválido (Ej: V-12345678, J-123456789)."):j.rif="El RIF/CI es obligatorio.",t.direccion||(j.direccion="La dirección es obligatoria."),t.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(t.email)&&(j.email="Dirección de email inválida."),h(j),Object.keys(j).length===0},R=async j=>{var T;if(j.preventDefault(),!!S())try{i?(await d({id:r,...t}).unwrap(),I.fire("¡Éxito!","Cliente actualizado correctamente.","success")):(await x(t).unwrap(),I.fire("¡Éxito!","Cliente registrado correctamente.","success")),a("/reporteclientes")}catch(f){I.fire("Error",((T=f.data)==null?void 0:T.message)||"No se pudo completar la operación.","error")}};if(u)return e.jsx(ie,{txt:"Cargando datos del cliente..."});const v=(j,T,f,A={},U="text")=>e.jsxs("div",{className:`input-group ${A.fullWidth?"full-width":""}`,children:[e.jsx("label",{htmlFor:j,children:T}),e.jsxs("div",{className:"input-with-icon",children:[f,e.jsx("input",{id:j,name:j,type:U,value:t[j],onChange:n,...A})]}),l[j]&&e.jsx("span",{className:"error-message",children:l[j]})]});return e.jsx("div",{className:"form-container client-form",children:e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h2",{children:i?"Editar Cliente":"Registrar Nuevo Cliente"}),e.jsx(z,{to:"/reporteclientes",className:"back-link",children:"Volver al Directorio"})]}),e.jsxs("div",{className:"form-body",children:[v("nombre","Nombre o Razón Social",e.jsx(se,{}),{required:!0,fullWidth:!0}),v("rif","RIF / Cédula",e.jsx(Ea,{}),{required:!0,placeholder:"Ej: V12345678"}),v("celular","Teléfono Celular",e.jsx(Pe,{})),v("direccion","Dirección Fiscal",e.jsx(is,{}),{required:!0,fullWidth:!0}),v("email","Correo Electrónico",e.jsx(ve,{}),{type:"email",fullWidth:!0}),e.jsxs("div",{className:"input-group full-width",children:[e.jsx("label",{htmlFor:"canal",children:"Canal de Difusión"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx(ja,{}),e.jsxs("select",{id:"canal",name:"canal",value:t.canal,onChange:n,children:[e.jsx("option",{value:"",children:"-- Seleccione un canal --"}),_t.map(j=>e.jsx("option",{value:j,children:j},j))]})]})]})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"submit-button",disabled:p||m,children:p||m?"Guardando...":i?"Actualizar Cliente":"Crear Cliente"})})]})})}function H({children:a,text:s}){return e.jsxs("div",{className:"tooltip",children:[a,e.jsx("span",{className:"tooltip__box",children:s})]})}function Lt({data:a,columns:s}){const[r,i]=o.useState([]),[t,g]=o.useState([]),[l,h]=o.useState({pageIndex:0,pageSize:20}),[c,u]=Ae.useState(""),[x,p]=Ae.useState([]),d=ms({data:a,columns:s,state:{grouping:r,sorting:t,pagination:l,columnFilters:x,globalFilter:c},onColumnFiltersChange:p,onGlobalFilterChange:u,onGroupingChange:i,getExpandedRowModel:js(),getGroupedRowModel:Pa(),getCoreRowModel:gs(),getPaginationRowModel:xs(),getFilteredRowModel:ps(),getSortedRowModel:hs(),onSortingChange:g,onPaginationChange:h});return e.jsxs("div",{className:"tankstack-table-container",children:[e.jsxs("div",{className:"flx pad-0 jcenter",children:[e.jsx("input",{type:"text",className:"mr",value:c,placeholder:"Buscar",onChange:m=>u(m.target.value)}),e.jsxs("span",{className:"font-x negrita",children:["Pagina ",d.getState().pagination.pageIndex+1," de ",d.getPageCount()]})]}),e.jsxs("div",{children:[e.jsxs("table",{className:"styled-table",children:[e.jsx("thead",{children:d.getHeaderGroups().map(m=>e.jsx("tr",{children:m.headers.map(n=>e.jsx("th",{colSpan:n.colSpan,children:n.isPlaceholder?null:e.jsxs("div",{className:"flx pad-0 gap05 jcenter",children:[n.column.getCanGroup()?e.jsx(H,{text:"agrupar",children:e.jsx("button",{onClick:n.column.getToggleGroupingHandler(),style:{cursor:"pointer",backgroundColor:"transparent",border:"none"},className:n.column.getIsGrouped()?"th-ungroup-btn":"th-group-btn",children:n.column.getIsGrouped()?e.jsx(ls,{style:{color:"grey"}}):e.jsx(fa,{style:{color:"grey"}})})}):null," ",ne(n.column.columnDef.header,n.getContext()),e.jsx(H,{text:"ordenar",children:e.jsx("button",{style:{cursor:"pointer",backgroundColor:"transparent",border:"none",minWidth:"20px",padding:0,margin:"0"},onClick:n.column.getToggleSortingHandler(),children:{asc:" 🔼",desc:" 🔽"}[n.column.getIsSorted()]??e.jsx(Sa,{})})})]})},n.id))},m.id))}),e.jsx("tbody",{children:d.getRowModel().rows.map(m=>e.jsx("tr",{children:m.getVisibleCells().map((n,S)=>e.jsx("td",{style:{background:n.getIsGrouped()?"#dedede":n.getIsAggregated()||n.getIsPlaceholder()?"#bebdbd":"white"},children:n.getIsGrouped()?e.jsx(e.Fragment,{children:e.jsxs("button",{onClick:m.getToggleExpandedHandler(),style:{cursor:m.getCanExpand()?"pointer":"normal"},className:"td-group-btn",children:[m.getIsExpanded()?e.jsx(Ca,{}):e.jsx(De,{className:"td-group-icon"})," ",ne(n.column.columnDef.cell,n.getContext())," (",m.subRows.length,")"]})}):n.getIsAggregated()?ne(n.column.columnDef.aggregatedCell??n.column.columnDef.cell,n.getContext()):n.getIsPlaceholder()?null:ne(n.column.columnDef.cell,n.getContext())},S))},m.id))}),e.jsx("tfoot",{children:d.getFooterGroups().map(m=>e.jsx("tr",{children:m.headers.map(n=>e.jsx("th",{children:ne(n.column.columnDef.footer,n.getContext())},n.id))},m.id))})]}),e.jsx("div",{className:"tankstack-pagination-container",children:e.jsxs("div",{className:"tankstack-pagination-botonera",children:[e.jsx("button",{onClick:()=>d.setPageIndex(0),disabled:!d.getCanPreviousPage(),children:"primero"}),e.jsx("button",{onClick:()=>d.previousPage(),disabled:!d.getCanPreviousPage(),children:"anterior"}),e.jsx("button",{onClick:()=>d.nextPage(),disabled:!d.getCanNextPage(),children:"siguiente"}),e.jsx("button",{onClick:()=>d.setPageIndex(d.getPageCount()-1),disabled:!d.getCanNextPage(),children:"ultimo"})]})})]})]})}function Pt(){const{data:a,isLoading:s}=Os(),r=ae(),i=Q(x=>x.userSignin),{userInfo:t}=i,[g,{isLoading:l}]=ar(),h=x=>{if(!t.isAdmin)return I.fire({title:"Necesita Permisos de Administrador",text:"Editar Producto ",icon:"warning"}),"";r(`/product/${x}/edit`)},c=async(x,p)=>{var m;if(!t.isAdmin)return I.fire({title:"Necesita Permisos de Administrador",text:"Eliminar Producto",icon:"warning"});if((await I.fire({title:`¿Estás seguro de eliminar ${p}?`,text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await g(x).unwrap(),I.fire("Eliminado",`El producto ${p} ha sido eliminado.`,"success")}catch(n){I.fire("Error",`No se pudo eliminar el producto. ${((m=n.data)==null?void 0:m.message)||""}`,"error")}},u=[{header:"Codigo",accessorKey:"codigo",enableGrouping:!1,cell:x=>{const{codigo:p,_id:d,nombre:m}=x.row.original;return e.jsxs("div",{className:"flx pad-0 column",children:[e.jsx("h3",{children:p}),t.email==="frank.uah@gmail.com"?e.jsxs("div",{className:"flx gap-1 bg-grey pad-05",children:[e.jsx(H,{text:"Editar",children:e.jsx(ns,{size:20,onClick:()=>h(d)})}),e.jsx(H,{text:"Conteo Rapido",children:e.jsx(Na,{size:20,onClick:()=>r(`/conteorapido/${d}`)})}),e.jsx(H,{text:"Eliminar",children:e.jsx(we,{size:20,onClick:()=>c(d,p),disabled:l})})]}):""]})},aggregationFn:"count"},{header:"Imagen",accessorKey:"imageurl",enableGrouping:!1,enableSorting:!0,cell:x=>e.jsx("img",{className:"table-img",src:x.getValue()||"./src/assets/logo.png",loading:"lazy"})},{header:"Precio",accessorKey:"preciousd",aggregatedCell:({getValue:x})=>Math.round(x()*100)/100,aggregationFn:"median",cell:x=>"$"+Number(x.getValue()).toFixed(2),footer:({table:x})=>x.getFilteredRowModel().rows.reduce((d,m)=>d+m.getValue("existencia")*m.getValue("preciousd"),0)},{header:"Marca",accessorKey:"marca"},{header:"Modelo",accessorKey:"modelo"},{header:"Color",accessorKey:"color"},{header:"Genero",accessorKey:"genero"},{header:"Existencia",accessorKey:"existencia",footer:({table:x})=>"Unidades: "+x.getFilteredRowModel().rows.reduce((p,d)=>p+d.getValue("existencia"),0)},{header:"Tallas",accessorKey:"tallas",enableGrouping:!1,enableSorting:!1,cell:x=>{const{tallas:p}=x.row.original;if(p===void 0)return"";const d=Object.values(p).reduce((m,n)=>m+n,0);return p?d<=0?e.jsx("span",{className:"negrita",children:"No Disponible"}):e.jsx("div",{className:"flx column pad-0 font-x negrita azul-brand",children:e.jsx("div",{className:"flx jcenter pad-0 mtop-1",children:Object.keys(p).map((m,n)=>p[m]===0?"":e.jsxs("div",{className:"flx column astart pad-0 font-14",children:[e.jsx("p",{className:"centrado minw-20 negrita subrayado",children:m}),e.jsx("p",{className:"centrado minw-20 font-12 color-negro",children:p[m]})]},n))})}):""},footer:""}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flx column jcenter mtop-1",children:[e.jsx("h2",{className:"centrado",children:"PRODUCTOS"}),e.jsx("p",{className:"negrita",children:"Almacen Principal"})]}),s?e.jsx(ie,{txt:"Actualizando Productos"}):e.jsx("div",{children:a.length>0?e.jsx(Lt,{data:a,columns:u}):""})]})}function Ut(a,s){return a.setHours(a.getHours()-s),a}const wt=()=>{const[a]=o.useState(Ut(new Date,6)),[s,r]=o.useState(0),[i,t]=o.useState(""),[g,l]=o.useState(null),[h,c]=o.useState("68fbc1e95cd3e9dbbc679344"),[u,x]=o.useState("Contado"),[p,d]=o.useState([]),[m,n]=o.useState([]),[S,R]=o.useState(0),[v,j]=o.useState(0),[T,f]=o.useState(""),[A,U]=o.useState(!1),[M,k]=o.useState(!1),[w,y]=o.useState(!1),[L,E]=o.useState(!1),[C,N]=o.useState(!1),[F,D]=o.useState(!1),[X,b]=o.useState(null),V=ae(),{userInfo:$}=Q(P=>P.userSignin),{data:W,isError:le}=Vs({}),{data:ue}=Ms(),[ke,{isLoading:Me}]=gt(),[me]=Us(),Y=o.useMemo(()=>p.reduce((P,O)=>P+O.precio*O.qty,0),[p]),ce=o.useMemo(()=>Y*0,[Y]),J=o.useMemo(()=>Math.max(0,Y-S+ce+Number(v)),[Y,S,ce,v]),he=o.useMemo(()=>m.reduce((P,O)=>P+O.montoUSD,0),[m]),pe=()=>{l(null),t(""),c(""),x("Contado"),d([]),n([]),R(0),j(0),f("")},Re=async()=>{if(s>0)return s;let P=0;if(W&&W.cambiobcv&&!le)P=Number(W.cambiobcv);else{const{value:O}=await I.fire({title:"Tasa de Cambio BCV no disponible",text:"Por favor, ingrese la tasa de cambio del día manualmente:",input:"number",inputPlaceholder:"Ej: 36.50",showCancelButton:!0,inputValidator:K=>!K||isNaN(K)||parseFloat(K)<=0&&"Debe ingresar un valor numérico positivo."});O&&(P=parseFloat(O))}return r(P),P},Ge=async()=>{var P;if((u==="Donacion"||u==="Intercambio")&&!T.trim())return I.fire("Campo Requerido","El campo 'Memo / Notas' es obligatorio.","warning");if(u!=="Credito"&&Math.abs(J-he).toFixed(2)!=="0.00")return I.fire("Monto Incompleto","El total pagado no coincide con el total de la orden.","warning");if(!s||s===0)return I.fire("Operación Cancelada","No se puede crear la orden sin una tasa de cambio válida.","error");try{const{data:O}=await ke({fecha:a,clienteInfo:g,orderItems:p,pago:m,totalItems:p.reduce((K,xe)=>K+xe.qty,0),subtotal:Y,descuento:S,delivery:v,totalVenta:J,cambioDia:s,condicion:u,vendedor:h,user:$,memo:T,iva:ce});pe(),V(`/print/order/${O.order._id}`)}catch(O){I.fire("Error al Crear la Orden",((P=O.data)==null?void 0:P.message)||O.error||"Ocurrió un error.","error")}},Ve=P=>{d(O=>[...O,P]),y(!1)},Be=P=>{d(O=>O.filter((K,xe)=>xe!==P))},_=P=>{let O=Number(P.target.value);O<0&&(O=0),O>Y&&(O=Y,I.fire("Atención","El descuento no puede ser mayor que el subtotal.","warning")),R(O)},G=P=>{const O=P.target.value;x(O),O==="Credito"?n([]):O==="Contado"&&J>0&&he<J&&E(!0)},Z=async()=>{await Re()>0?E(!0):I.fire("Acción cancelada","Se requiere una tasa de cambio para gestionar los pagos.","info")},re=o.useCallback(P=>{n(P),E(!1),P.length>0&&I.fire("Guardado","Métodos de pago actualizados.","success")},[]);return o.useEffect(()=>{(async()=>{J>0&&s===0&&await Re()})()},[J,s]),o.useEffect(()=>{(async()=>{const O="V99999999",{data:K,isSuccess:xe}=await me(O);xe&&K&&(l(K),t(O))})()},[me]),{fecha:a,cambioDia:s,rif:i,setRif:t,clienteInfo:g,setClienteInfo:l,vendedor:h,setVendedor:c,condicion:u,ordenItems:p,metodosPago:m,descuento:S,delivery:v,setDelivery:j,memo:T,setMemo:f,subtotal:Y,impuesto:ce,totalOrden:J,totalPagado:he,vendedores:ue,isCreatingOrder:Me,showClienteSearchModal:A,setShowClientSearchModal:U,showNewClientModal:M,setShowNewClientModal:k,showProductSearchModal:w,setShowProductSearchModal:y,showProductViewerModal:C,setShowProductViewerModal:N,showClientViewerModal:F,setShowClientViewerModal:D,showMetodoPagoModal:L,setShowMetodoPagoModal:E,imagenAmpliadaUrl:X,setImagenAmpliadaUrl:b,handleCondicionChange:G,handleDescuentoChange:_,addItemToOrder:Ve,deleteItemFromOrder:Be,setOrdenItems:d,handleOpenPagoModal:Z,handleSavePagos:re,createOrderHandler:Ge}},Ws=o.forwardRef(({onClientFound:a,onNewClient:s,onCancel:r},i)=>{const[t]=Us(),g=async()=>{try{const{value:l}=await I.fire({title:"RIF o Cedula",input:"text",inputPlaceholder:"Ejemplo: V999999999 - J999999999",showCancelButton:!0,confirmButtonText:"Buscar",cancelButtonText:"Cancelar",inputValidator:h=>{if(!h)return"Debe ingresar Cedula o RIF";const c=h.trim().toUpperCase(),u=c.charAt(0),x=u==="J"||u==="G",p=u==="V"||u==="E";if(x){if(!/^[JG][0-9]{9}$/.test(c))return"Formato de RIF incorrecto. Debe ser J o G seguido de 9 dígitos."}else if(p){if(!/^[VE][0-9]{6,8}$/.test(c))return"Formato de Cédula incorrecto. Debe ser V o E seguido de 6 a 8 dígitos."}else return"El identificador debe comenzar con V, E, J o G."}});if(l){const{data:h,error:c}=await t(l.toUpperCase());h&&I.fire({title:`${h.nombre+" - "+h.rif}`,icon:"success",confirmButtonText:"OK",showCancelButton:!0,cancelButtonText:"Cancelar"}).then(u=>{u.isConfirmed?a(h):r()}),c?I.fire({title:"Cliente No Encontrado",icon:"error",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Agregar"}).then(u=>{u.isConfirmed?s(l.toUpperCase()):r()}):h||(console.error("Respuesta inesperada de la API: ni datos ni error."),I.fire("Error Inesperado","No se recibió respuesta del servidor.","error"),r())}else r()}catch(l){I.fire({title:"Error",text:"Ocurrió un error durante la búsqueda "+l,icon:"error",confirmButtonText:"OK"}),r()}};return o.useImperativeHandle(i,()=>({show:g})),null});function Ft({identificacion:a,onRegisterSuccess:s,onCancel:r}){const[i,{isLoading:t,isSuccess:g}]=Ps(),[l]=o.useState(a||""),[h,c]=o.useState({nombre:"",direccion:"",celular:"",email:"",canal:""}),[u,x]=o.useState({}),p=n=>{const{name:S,value:R,type:v,checked:j}=n.target;c(T=>({...T,[S]:v==="checkbox"?j:R})),u[S]&&x(T=>({...T,[S]:""}))},d=()=>{const n={};h.nombre.trim()||(n.nombre="El Nombre O Razon Social es requerido"),h.direccion.trim()||(n.direccion="La Direccion es requerida"),h.canal.trim()||(n.canal="El Canal de Divulgacion es requerido");const S=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return h.email&&!S.test(h.email)&&(n.email="Por favor ingrese una direccion de Email valida"),h.celular&&!/^\d{10,15}$/.test(h.celular.replace(/\D/g,""))&&(n.celular="Por favor ingrese su telefono en forma correcta"),x(n),Object.keys(n).length===0},m=async n=>{var S;if(n.preventDefault(),d())try{await i({...h,rif:l}).unwrap().then(R=>{I.fire("Agregado","Cliente registrado exitosamente","success"),c({nombre:"",direccion:"",email:"",celular:"",canal:""}),s(R)}).catch(R=>{I.fire("Error","Ocurrio un Error","error")})}catch(R){I.fire("Error",((S=R.data)==null?void 0:S.message)||"Failed to register client","error")}};return e.jsxs("div",{className:"form-container",children:[e.jsxs("div",{className:"modal-close-container",children:[e.jsx(Ye,{className:"close-icon light",onClick:r}),e.jsxs("p",{children:["RIF / CEDULA: ",l]})]}),e.jsxs("form",{onSubmit:m,className:"form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Registrar Cliente"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre o Razon Social *"}),e.jsx("input",{type:"text",id:"nombre",name:"nombre",value:h.nombre,onChange:p,className:u.nombre?"error":"",placeholder:"Ingrese su Nombre o Razon Social"}),u.nombre&&e.jsx("span",{className:"error-message",children:u.nombre})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"direccion",children:"Direccion *"}),e.jsx("input",{type:"text",id:"direccion",name:"direccion",value:h.direccion,onChange:p,className:u.direccion?"error":"",placeholder:"Enter your last name"}),u.direccion&&e.jsx("span",{className:"error-message",children:u.direccion})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"celular",children:"Telefono"}),e.jsx("input",{type:"tel",id:"celular",name:"celular",value:h.celular,onChange:p,className:u.celular?"error":"",placeholder:"Ej: 0412-999-9999"}),u.celular&&e.jsx("span",{className:"error-message",children:u.celular})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:h.email,onChange:p,className:u.email?"error":"",placeholder:"Ingrese su email"}),u.email&&e.jsx("span",{className:"error-message",children:u.email})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"gender",children:"Como se entero de nosotros"}),e.jsxs("select",{id:"canal",name:"canal",value:h.canal,onChange:p,children:[e.jsx("option",{value:"",children:"Selecionar"}),e.jsx("option",{value:"INICIATIVA",children:"INICIATIVA"}),e.jsx("option",{value:"RECOMENDADO",children:"RECOMENDADO"}),e.jsx("option",{value:"INSTAGRAM",children:"INSTAGRAM"}),e.jsx("option",{value:"TIKTOK",children:"TIKTOK"}),e.jsx("option",{value:"FACEBOOK",children:"FACEBOOK"})]})]})]}),e.jsx("button",{type:"submit",className:"submit-button",children:"Registrar Cliente"})]})]})}const kt=({onProductFound:a,onCancel:s})=>{const[r,{data:i,isLoading:t,isError:g}]=rr(),[l,h]=o.useState(""),[c,u]=o.useState(null),[x,p]=o.useState(""),[d,m]=o.useState(1),n=o.useCallback(f=>{f.trim()!==""&&f.length>2&&r(f)},[r]);o.useEffect(()=>{const f=setTimeout(()=>{n(l)},500);return()=>{clearTimeout(f)}},[l,n]);const S=f=>{h(f.target.value.toUpperCase())},R=f=>{c===f?u(null):(u(f),p(""),m(1))},v=f=>{p(f.target.value),m(1)},j=f=>{m(Number(f.target.value))},T=f=>{if(console.log("producto ",f),!x){alert("Por favor, seleccione una talla.");return}const{nombre:A,tallas:U,_id:M,preciousd:k,...w}=f;a({...w,talla:x,producto:M,precio:k,qty:d})};return e.jsxs("div",{className:"responsive-top-margin",children:[e.jsxs("div",{className:"modal-close-container",children:[e.jsx(Ye,{className:"close-icon light",onClick:s}),e.jsx("div",{className:"cancel-div",onClick:s,children:"Cancelar"}),e.jsx(va,{})]}),e.jsxs("div",{className:"product-search-container",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"product-search-input",children:"Código de Producto"}),e.jsx("input",{type:"text",id:"product-search-input",name:"product-search",value:l,onChange:S,placeholder:"Buscar producto...",autoFocus:!0})]}),e.jsxs("div",{className:"product-search-results",children:[t&&e.jsxs("div",{className:"loading-container",children:[e.jsx(Qe,{className:"animate-spin"})," Buscando..."]}),g&&e.jsx("p",{className:"error-message",children:"Error al buscar productos."}),i&&i.length===0&&l&&!t&&e.jsx("p",{children:"No se encontraron productos."}),i&&i.length>0&&e.jsx("div",{children:e.jsx("ul",{className:"product-search-list",children:i.map(f=>e.jsxs("li",{className:"product-search-item",children:[e.jsxs("div",{className:"product-info-clickable",onClick:()=>R(f._id),children:[e.jsx("img",{src:f.imageurl,alt:f.nombre,width:"50",className:"product-search-image"}),e.jsxs("div",{className:"product-search-info",children:[e.jsx("p",{children:f.codigo}),e.jsxs("p",{children:[f.marca," - ",f.modelo]}),e.jsxs("p",{children:["$",Number(f.preciousd).toFixed(2)]})]}),e.jsx(qe,{className:`expand-icon ${c===f._id?"expanded":""}`})]}),e.jsxs("div",{className:`tallas-selector ${c===f._id?"expanded":""}`,children:[e.jsxs("div",{className:"form-group-inline",children:[e.jsx("label",{htmlFor:`talla-select-${f._id}`,children:"Disponibilidad"}),e.jsxs("select",{className:"w-70",id:`talla-select-${f._id}`,value:x,onChange:v,children:[e.jsx("option",{value:"",disabled:!0,children:"Talla"}),Object.entries(f.tallas||{}).filter(([,A])=>A>0).map(([A])=>e.jsx("option",{value:A,children:A},A))]})]}),x&&f.tallas[x]>0&&e.jsxs("div",{className:"form-group-inline",children:[e.jsx("label",{htmlFor:`quantity-select-${f._id}`,children:"Cantidad"}),e.jsx("select",{id:`quantity-select-${f._id}`,value:d,onChange:j,children:Array.from({length:f.tallas[x]},(A,U)=>U+1).map(A=>e.jsx("option",{value:A,children:A},A))})]}),e.jsx("button",{className:"add-product-btn",onClick:()=>T(f),disabled:!x,children:"Agregar al Pedido"})]})]},f._id))})})]})]})]})},Js={metodo:"",monto:"",referencia:"",bancoOrigen:"",bancoDestino:"",memo:""};function Mt(a,s){switch(s.type){case"SET_FIELD":return{...a,[s.field]:s.value};case"RESET":return Js;default:return a}}function Gt({onCancel:a,onSave:s,totalOrden:r,totalOrdenBs:i}){const[t,g]=o.useState([]),[l,h]=o.useReducer(Mt,Js),{metodo:c,monto:u,referencia:x,bancoOrigen:p,bancoDestino:d,memo:m}=l,n=[{value:"PAGOMOVIL",label:"Pago Móvil"},{value:"TDB",label:"Tarjeta de Débito"},{value:"TDC",label:"Tarjeta de Crédito"},{value:"EUROS",label:"Divisas (Euros)"},{value:"DOLARES",label:"Divisas (Dólares)"},{value:"BOLIVARES",label:"Efectivo (Bolívares)"},{value:"ZELLE",label:"Zelle"},{value:"TRANSFERENCIA",label:"Transferencia"},{value:"PAGOCASHEA",label:"Pago Cashea"}],S=["PAGOMOVIL","TDB","TDC","BOLIVARES","TRANSFERENCIA"],R=o.useMemo(()=>r>0?i/r:0,[r,i]),v=["PAGOMOVIL","TDB","TDC","ZELLE","TRANSFERENCIA","PAGOCASHEA"].includes(c),j=["PAGOMOVIL","TDB","TDC","TRANSFERENCIA"].includes(c),T=["PAGOMOVIL","TDB","TDC","TRANSFERENCIA"].includes(c),f=S.includes(c),A=o.useMemo(()=>t.reduce((C,N)=>C+parseFloat(N.montoUSD),0),[t]),U=o.useMemo(()=>r-A,[r,A]),M=o.useMemo(()=>U*R,[U,R]),k=f?"Bs.":"$",w=(C,N)=>{h({type:"SET_FIELD",field:C,value:N})},y=()=>{if(!c||!u||parseFloat(u)<=0){I.fire("Atención","Debe seleccionar un método de pago y un monto válido.","warning");return}let C;const N=parseFloat(u);if(f){if(R===0){I.fire("Error","No hay tasa de cambio para pagos en Bolívares.","error");return}const F=N/R;if(A+F>r+.001){I.fire("Monto Excedido",`El monto a pagar no puede ser mayor al restante. Restan: $${U.toFixed(2)}`,"error");return}C={tipo:c,monto:N,moneda:"Bs.",montoUSD:F}}else{if(A+N>r+.001){I.fire("Monto Excedido",`El monto a pagar no puede ser mayor al restante. Restan: $${U.toFixed(2)}`,"error");return}C={tipo:c,monto:N,moneda:"$",montoUSD:N}}Object.assign(C,{...v&&x&&{referencia:x},...j&&p&&{bancoOrigen:p},...T&&d&&{bancoDestino:d},...m&&{memo:m}}),g([...t,C]),h({type:"RESET"})},L=C=>{g(t.filter((N,F)=>F!==C))},E=()=>{if(Math.abs(U).toFixed(2)!=="0.00"){I.fire("Verifique los montos",`El total pagado ($${A.toFixed(2)}) no coincide con el total de la orden ($${r.toFixed(2)}). Restan: $${U.toFixed(2)}`,"error");return}s(t)};return e.jsx("div",{className:"modal-container",children:e.jsxs("div",{className:"form-container",style:{maxHeight:"calc(100vh - 100px)",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-close-container",children:[e.jsx(Ye,{className:"close-icon light",onClick:a}),e.jsxs("div",{children:["Total Orden:"," ",e.jsxs("strong",{children:["$",r.toFixed(2)," (Bs. ",i.toFixed(2),")"]})]}),e.jsx("h3",{className:"white",children:"Gestión de Pagos"})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"metodo-select",children:"Método de Pago"}),e.jsxs("select",{value:c,onChange:C=>w("metodo",C.target.value),children:[e.jsx("option",{value:"",children:"Seleccione un método..."}),n.map(C=>{const F=S.includes(C.value)&&R===0;return e.jsxs("option",{value:C.value,disabled:F,children:[C.label," ",F?"(Tasa no disp.)":""]},C.value)})]})]}),e.jsxs("div",{className:"form-group",style:{flexGrow:1},children:[e.jsxs("label",{children:["Monto (",k,")"]}),e.jsxs("div",{className:"input-with-button",children:[e.jsx("input",{type:"number",value:u,onChange:C=>w("monto",C.target.value),placeholder:f?M.toFixed(2):U.toFixed(2)}),e.jsx("button",{type:"button",className:"link-like-btn",title:"Usar monto restante",onClick:()=>{const C=f?M.toFixed(2):U.toFixed(2);w("monto",C)},children:e.jsx(Ra,{size:16})})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Memo (Opcional)"}),e.jsx("input",{type:"text",value:m,onChange:C=>w("memo",C.target.value),placeholder:"Información adicional sobre el pago..."})]}),e.jsxs("button",{type:"button",className:"add-button",onClick:y,children:[e.jsx(ba,{size:18})," Agregar Pago"]}),e.jsxs("div",{className:"payment-summary",children:[e.jsx("h4",{className:"centrado",children:"Pagos Agregados"}),e.jsxs("div",{className:"payment-list",children:[t.map((C,N)=>e.jsxs("div",{className:"payment-item",children:[e.jsxs("span",{children:[C.tipo,": ",e.jsxs("strong",{children:[C.moneda," ",C.monto.toFixed(2)]}),C.referencia&&C.referencia!==""&&` (Ref: ${C.referencia})`]}),e.jsx(we,{className:"delete-item-icon",onClick:()=>L(N)})]},N)),t.length===0&&e.jsx("p",{className:"no-payment-message",children:"Aún no se han agregado pagos."})]}),e.jsxs("div",{className:"payment-totals",children:[e.jsxs("div",{children:["Total Pagado: ",e.jsxs("strong",{children:["$",A.toFixed(2)]})]}),e.jsxs("div",{className:U.toFixed(2)!=="0.00"?"restante-pendiente":"restante-ok",children:["Restante: ",e.jsxs("strong",{children:["$",U.toFixed(2)]})]})]})]})]}),e.jsxs("button",{onClick:E,className:"submit-button",disabled:t.length===0,children:[e.jsx(Ue,{size:18})," Guardar Pagos y Cerrar"]})]})})}const Vt=({showNewClientModal:a,showClienteSearchModal:s,showProductSearchModal:r,showMetodoPagoModal:i,setShowNewClientModal:t,setShowClientSearchModal:g,setShowProductSearchModal:l,setShowMetodoPagoModal:h,rif:c,setRif:u,setClienteInfo:x,ordenItems:p,handleUpdateQuantity:d,addItemToOrder:m,handleSavePagos:n,totalOrden:S,cambioDia:R})=>{const v=j=>{l(!1);const T=p.findIndex(f=>f.codigo===j.codigo&&f.talla===j.talla);T>-1?p[T].qty===j.qty?I.fire({title:"Producto ya existe",html:`El producto <strong>${j.nombre} (Talla ${j.talla})</strong> con cantidad <strong>${j.qty}</strong> ya se encuentra en la orden.`,icon:"info"}):d(T,j.qty):m(j)};return e.jsxs(e.Fragment,{children:[a&&e.jsx("div",{className:"modal-container",children:e.jsx(Ft,{identificacion:c,onRegisterSuccess:j=>{x(j),t(!1),g(!1)},onCancel:()=>t(!1)})}),s&&e.jsx(Ws,{onClientFound:j=>x(j),onNewClient:j=>{u(j),t(!0)},onCancel:()=>{u(""),x(null),g(!1)}}),r&&e.jsx("div",{className:"modal-container",children:e.jsx(kt,{onProductFound:v,onCancel:()=>l(!1)})}),i&&S>0&&e.jsx("div",{className:"modal-container",children:e.jsx(Gt,{onSave:n,onCancel:()=>h(!1),totalOrden:S,totalOrdenBs:S*R})})]})},Bt=({isOpen:a,onClose:s})=>{const{data:r=[],isLoading:i}=Os(),[t,g]=o.useState(""),[l,h]=o.useState(1),c=10,u=o.useMemo(()=>{if(!r)return[];const n=t.toLowerCase();return r.filter(S=>S.existencia>0).filter(S=>S.codigo.toLowerCase().includes(n)||S.marca.toLowerCase().includes(n)||S.categoria&&S.categoria.toLowerCase().includes(n))},[r,t]),x=Math.ceil(u.length/c),p=o.useMemo(()=>{const n=(l-1)*c;return u.slice(n,n+c)},[u,l,c]),d=n=>{n>=1&&n<=x&&h(n)};if(!a)return null;const m=n=>(console.log("tallas",n),!n||Object.keys(n).length===0?"N/A":Object.entries(n).filter(([,S])=>S>0).map(([S,R])=>S+" : "+R).join(", "));return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content-viewer",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Productos Disponibles"}),e.jsx("button",{onClick:s,className:"close-button",children:e.jsx(Ke,{size:24})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"viewer-controls",children:e.jsx("input",{type:"text",placeholder:"Filtrar por código, marca o categoría...",value:t,onChange:n=>g(n.target.value),className:"viewer-search-input"})}),i?e.jsx(ie,{txt:"Cargando productos..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive-container",children:e.jsxs("table",{className:"viewer-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Imagen"}),e.jsx("th",{children:"Código"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Marca"}),e.jsx("th",{children:"Tallas Disp."})]})}),e.jsx("tbody",{children:p.map(n=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:n.imageurl,alt:n.codigo,className:"viewer-product-image"})}),e.jsx("td",{children:n.codigo}),e.jsxs("td",{children:["$",Number(n.preciousd).toFixed(2)]}),e.jsx("td",{children:n.marca}),e.jsx("td",{children:m(n.tallas)})]},n._id))})]})}),x>1&&e.jsxs("div",{className:"viewer-pagination",children:[e.jsx("button",{onClick:()=>d(l-1),disabled:l===1,children:"Anterior"}),e.jsxs("span",{children:["Página ",l," de ",x]}),e.jsx("button",{onClick:()=>d(l+1),disabled:l===x,children:"Siguiente"})]})]})]})]})})},zt=({isOpen:a,onClose:s,onSelectClient:r})=>{const{data:i=[],isLoading:t}=Ls(),[g,l]=o.useState(""),[h,c]=o.useState(1),u=10,x=o.useMemo(()=>{if(!i)return[];const n=g.toLowerCase();return i.filter(S=>S.nombre.toLowerCase().includes(n)||S.rif.toLowerCase().includes(n))},[i,g]),p=Math.ceil(x.length/u),d=o.useMemo(()=>{const n=(h-1)*u;return x.slice(n,n+u)},[x,h,u]),m=n=>{n>=1&&n<=p&&c(n)};return a?e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content-viewer",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Lista de Clientes"}),e.jsx("button",{onClick:s,className:"close-button",children:e.jsx(Ke,{size:24})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"viewer-controls",children:e.jsx("input",{type:"text",placeholder:"Filtrar por nombre o RIF/CI...",value:g,onChange:n=>l(n.target.value),className:"viewer-search-input"})}),t?e.jsx(ie,{txt:"Cargando clientes..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive-container",children:e.jsxs("table",{className:"viewer-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre / Razón Social"}),e.jsx("th",{children:"RIF / CI"}),e.jsx("th",{children:"Teléfono"}),e.jsx("th",{children:"Dirección"})]})}),e.jsx("tbody",{children:d.map(n=>e.jsxs("tr",{onClick:()=>r(n),style:{cursor:"pointer"},children:[e.jsx("td",{children:n==null?void 0:n.nombre.toUpperCase()}),e.jsx("td",{children:n.rif}),e.jsx("td",{children:n.celular||"N/A"}),e.jsx("td",{children:n.direccion||"N/A"})]},n._id))})]})}),p>1&&e.jsxs("div",{className:"viewer-pagination",children:[e.jsx("button",{onClick:()=>m(h-1),disabled:h===1,children:"Anterior"}),e.jsxs("span",{children:["Página ",h," de ",p]}),e.jsx("button",{onClick:()=>m(h+1),disabled:h===p,children:"Siguiente"})]})]})]})]})}):null},qt=({isOpen:a,onClose:s,onSelectVendedor:r,selectedVendedorId:i})=>{const{data:t,isLoading:g,isError:l}=Ms(),[h,c]=o.useState(""),u=o.useMemo(()=>{if(!t)return[];const p=h.toLowerCase();return t.filter(d=>{var m,n,S;return(((m=d.nombre)==null?void 0:m.toLowerCase())??"").includes(p)||(((n=d.apellido)==null?void 0:n.toLowerCase())??"").includes(p)||(((S=d.cedula)==null?void 0:S.toLowerCase())??"").includes(p)})},[t,h]);if(!a)return null;const x=p=>{r(p)};return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},children:[e.jsx("div",{className:"modal-header",children:e.jsx("h3",{children:"Seleccionar Vendedor"})}),e.jsxs("div",{className:"modal-body",style:{overflowY:"auto"},children:[e.jsx("div",{className:"search-bar-container",children:e.jsx("input",{type:"text",placeholder:"Filtrar por nombre, apellido o cédula...",className:"search-input",value:h,onChange:p=>c(p.target.value)})}),g&&e.jsx("p",{children:"Cargando vendedores..."}),l&&e.jsx("p",{children:"Error al cargar los vendedores."}),e.jsx("div",{className:"viewer-table-container",children:e.jsxs("table",{className:"viewer-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Apellido"}),e.jsx("th",{children:"Cédula"})]})}),e.jsx("tbody",{children:u.length>0?u.map(p=>e.jsxs("tr",{onClick:()=>x(p),className:`clickable-row ${p._id===i?"active-row":""}`,children:[e.jsx("td",{children:p.nombre}),e.jsx("td",{children:p.apellido}),e.jsx("td",{children:p.cedula})]},p._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",style:{textAlign:"center"},children:"No se encontraron vendedores."})})})]})})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{onClick:s,className:"btn btn-secondary",children:"Cerrar"})})]})})};function $t(){const{fecha:a,cambioDia:s,rif:r,setRif:i,clienteInfo:t,setClienteInfo:g,vendedor:l,setVendedor:h,condicion:c,ordenItems:u,metodosPago:x,descuento:p,delivery:d,setDelivery:m,memo:n,setMemo:S,setOrdenItems:R,subtotal:v,totalOrden:j,totalPagado:T,vendedores:f,isCreatingOrder:A,showNewClientModal:U,setShowNewClientModal:M,showProductSearchModal:k,setShowProductSearchModal:w,showProductViewerModal:y,setShowProductViewerModal:L,showClientViewerModal:E,setShowClientViewerModal:C,showMetodoPagoModal:N,setShowMetodoPagoModal:F,imagenAmpliadaUrl:D,setImagenAmpliadaUrl:X,handleCondicionChange:b,handleDescuentoChange:V,addItemToOrder:$,deleteItemFromOrder:W,handleOpenPagoModal:le,handleSavePagos:ue,createOrderHandler:ke}=wt(),[Me,me]=o.useState(!1),Y=o.useRef(null),ce=_=>{g(_),I.close()},J=_=>{i(_),M(!0)},he=()=>{console.log("Búsqueda de cliente cancelada.")},pe=f==null?void 0:f.find(_=>_._id===l);o.useEffect(()=>{j===0&&ue([])},[j,ue]);const Re=(_,G)=>{const Z=[...u],re=Z[_];Z[_]={...re,qty:G},R(Z),I.fire("Cantidad Actualizada",`<strong>${re.codigo} (Talla ${re.talla})</strong>.`,"success")},Ge=(_,G)=>{I.fire({title:"¿Estás seguro?",text:`Se eliminará ${G.codigo} (Talla ${G.talla}) de la orden.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(Z=>{Z.isConfirmed&&(W(_),I.fire("Producto Eliminado!"))})},Ve=()=>{window.print()},Be=()=>e.jsxs("div",{className:"print-header-container",children:[e.jsx("img",{src:te,alt:"Logo Tienda",className:"print-logo"}),e.jsxs("div",{className:"print-store-info",style:{flexShrink:0},children:[e.jsx("h4",{children:"DEMODA"}),e.jsx("p",{children:"RIF: J-12345678-9"}),e.jsx("p",{children:"Almacen Principal"}),e.jsx("p",{children:"Facturacion Detal"})]})]});return e.jsxs("div",{className:"facturacion-container",children:[e.jsx(zs,{}),e.jsx(Be,{}),e.jsx("div",{className:"info-cliente",style:{padding:"0.5rem 1rem",border:"1px solid #ccc"},children:e.jsxs("div",{className:"order-header",style:{justifyContent:"space-around"},children:[e.jsx(H,{text:"Lista Clientes",children:e.jsx(Ta,{className:"add-product-icon border",size:36,onClick:()=>C(!0)})}),e.jsx(H,{text:"Lista Productos",children:e.jsx(as,{className:"add-product-icon border",size:36,onClick:()=>L(!0)})})]})}),e.jsxs("div",{className:`info-cliente ${t?"":"alerta-sin-cliente"}`,children:[e.jsxs("div",{className:"order-header",children:[e.jsxs("h3",{children:["PEDIDO ",new Date(a).toLocaleDateString("es-VE")]}),e.jsx("div",{className:"detail-item",onClick:_=>_.stopPropagation(),children:e.jsxs("select",{id:"condicion-select",value:c,onChange:b,children:[e.jsx("option",{value:"Contado",children:"Contado"}),e.jsx("option",{value:"Credito",children:"Crédito"}),e.jsx("option",{value:"Intercambio",children:"Intercambio"}),e.jsx("option",{value:"Donacion",children:"Donación"})]})}),u.length>0&&e.jsx(He,{className:"add-product-icon print-button",onClick:Ve})]}),e.jsxs("details",{className:"details-collapsible full-width",children:[e.jsxs("summary",{className:"details-summary",children:[" ","Cliente",e.jsx(H,{text:"Buscar/Cambiar Cliente",children:e.jsx(ya,{width:20,className:"add-product-icon",style:{color:t?"green":"#7c0505",marginLeft:"25px"},onClick:_=>{var G;_.preventDefault(),(G=Y.current)==null||G.show()}})})]}),t&&e.jsxs("div",{className:"client-order-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Nombre o Razon Social"}),e.jsx("span",{className:"detail-value",children:t.nombre})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Teléfono"}),e.jsx("span",{className:"detail-value",children:t.celular})]}),e.jsxs("div",{className:"detail-item full-width",children:[e.jsx("span",{className:"detail-label",children:"Dirección"}),e.jsx("span",{className:"detail-value",children:t.direccion})]})]})]}),e.jsxs("details",{className:"details-collapsible full-width",children:[e.jsxs("summary",{className:"details-summary",children:["Vendedor"," "]}),e.jsx("div",{className:"client-order-details",children:pe?e.jsxs("div",{className:"detail-item vendedor",children:[e.jsx("span",{className:"detail-label",children:"Asignado a"}),e.jsxs("span",{className:"detail-value",children:[pe.nombre," ",pe.apellido]})]}):e.jsx("div",{className:"detail-item",children:e.jsx("span",{className:"detail-value alerta-sin-cliente",style:{padding:"0.2rem"},children:"No se ha asignado un vendedor."})})})]})]}),e.jsxs("div",{className:"info-productos",children:[e.jsxs("div",{className:"order-header",children:[e.jsx("div",{className:"flx",style:{gap:"0.5rem"},children:e.jsx("h3",{children:"Productos"})}),e.jsx("div",{children:e.jsx(H,{text:"Agregar Producto",children:e.jsx(De,{className:"add-product-icon",size:28,onClick:()=>w(!0)})})})]}),u.length>0?e.jsx("div",{className:"order-items-list",children:u.map((_,G)=>e.jsxs("div",{className:`order-item-row ${G===u.length-1?"new-item":""}`,children:[e.jsx("img",{src:_.imageurl,alt:_.nombre,className:"order-item-image",onClick:()=>X(_.imageurl)}),e.jsxs("div",{className:"order-item-details",children:[e.jsx("p",{className:"item-name",children:_.nombre}),e.jsxs("p",{className:"item-meta",children:[_.marca," ",_.modelo," ",_.color," Talla ",_.talla," (",_.codigo,")"]})]}),e.jsxs("div",{className:"order-item-price",children:["$",Number(_.precio).toFixed(2)]}),e.jsxs("div",{className:"order-item-quantity",children:["x ",_.qty]}),e.jsxs("div",{className:"order-item-total",children:["$",(_.precio*_.qty).toFixed(2)]}),e.jsx("div",{className:"order-item-actions",children:e.jsx(we,{onClick:()=>Ge(G,_),className:"delete-item-icon"})})]},`${_._id}-${_.talla}`))}):e.jsxs("div",{className:"empty-cart-message",children:[e.jsx(Ia,{size:48}),e.jsx("p",{children:"Tu orden está vacía"}),e.jsx("span",{children:"Agrega productos para comenzar."})]})]}),v>0&&e.jsxs("div",{className:"info-resumen",children:[e.jsx("h3",{children:"Resumen"}),e.jsxs("div",{className:"summary-row",style:{fontSize:"1.3rem"},children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"facturacion-subtotal-value",children:["$",v.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row",style:{fontSize:"1.3rem"},children:[e.jsx("label",{htmlFor:"descuento",children:"Descuento (-)"}),e.jsx("input",{id:"descuento",type:"number",value:p.toFixed(2),onChange:V,style:{width:"90px",textAlign:"right",padding:"2px 5px",fontSize:"1.3rem",border:"1px solid #ccc",borderRadius:"4px"}})]}),e.jsxs("div",{className:"summary-row",style:{fontSize:"1.3rem"},children:[e.jsx("label",{htmlFor:"delivery",children:"Delivery (+)"}),e.jsx("div",{className:"select-wrapper-left",style:{width:"100px"},children:e.jsxs("select",{id:"delivery",value:d,onChange:_=>m(Number(_.target.value)),style:{textAlign:"right",padding:"2px 5px",fontSize:"1.3rem",border:"1px solid #ccc",borderRadius:"4px"},children:[e.jsx("option",{value:0,children:"$0.00"}),Array.from({length:10},(_,G)=>(G+1)*5).map(_=>e.jsxs("option",{value:_,children:["$",_.toFixed(2)]},_))]})})]}),e.jsxs("div",{className:"summary-row total",style:{fontSize:"1.4rem",marginTop:"0.5rem"},children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",j.toFixed(2)]})]}),s>0&&e.jsxs("div",{className:"summary-row",style:{color:"#007bff",fontWeight:"bold",marginTop:"0.5rem",fontSize:"1.3rem"},children:[e.jsxs("span",{children:["Total Bs. (BCV: ",s,")"]}),e.jsxs("span",{children:["Bs. ",(j*s).toLocaleString("es-VE",{minimumFractionDigits:2})]})]})]}),j>0&&e.jsxs("div",{className:"info-pagos",children:[e.jsxs("div",{className:"order-header",children:[e.jsx("h3",{children:"Metodos de Pagos"}),e.jsx(H,{text:"Gestionar Métodos de Pago",children:e.jsx(De,{className:"add-product-icon",onClick:le})})]}),e.jsx("div",{className:"payment-list-summary",children:x.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("details",{className:"details-collapsible full-width",children:[e.jsxs("summary",{className:"details-summary",children:[" ",e.jsx("span",{children:e.jsxs("strong",{children:["Total Pagado: $",T.toFixed(2)]})}),s>0&&e.jsx("span",{children:e.jsxs("strong",{children:["(Bs. ",(T*s).toLocaleString("es-VE",{minimumFractionDigits:2}),")"]})})]}),(()=>{const _=["PAGOMOVIL","TDB","TDC","BOLIVARES","TRANSFERENCIA"];return x.map((G,Z)=>{const re=_.includes(G.tipo||G.metodo);let P;if(re)P=`Bs. ${G.monto.toLocaleString("es-VE",{minimumFractionDigits:2})}`;else{const O=G.monto,K=O*s;P=`$${O.toLocaleString("es-VE",{minimumFractionDigits:2})} (Bs. ${K.toLocaleString("es-VE",{minimumFractionDigits:2})})`}return e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{className:"detail-label",style:{textTransform:"none",fontSize:"1.2rem"},children:G.tipo||G.metodo}),e.jsx("span",{children:P})]},Z)})})()]}),j-T>.009&&c!=="Credito"&&e.jsxs("div",{className:"summary-row restante-pendiente",style:{marginTop:"0.5rem"},children:[e.jsx("span",{children:e.jsx("strong",{children:"Falta por Pagar"})}),e.jsx("span",{children:e.jsxs("strong",{children:["$",(j-T).toFixed(2)]})})]})]}):e.jsx("p",{className:"no-payment-message",children:"No se han agregado métodos de pago."})})]}),j>0&&e.jsxs("div",{className:`info-memo ${(c==="Donacion"||c==="Intercambio")&&!n.trim()?"alerta-sin-cliente":""}`,children:[e.jsx("h3",{children:"Memo / Notas"}),e.jsx("textarea",{id:"memo-input",value:n,onChange:_=>S(_.target.value),rows:"2",style:{width:"100%",borderRadius:"5px",border:"1px solid #ced4da",padding:"8px"},placeholder:"Información adicional sobre la orden..."})]}),e.jsx(Ws,{ref:Y,onClientFound:ce,onNewClient:J,onCancel:he}),e.jsx(Vt,{showNewClientModal:U,setShowNewClientModal:M,showClienteSearchModal:!1,setShowClientSearchModal:()=>{},showProductSearchModal:k,setShowProductSearchModal:w,showMetodoPagoModal:N,setShowMetodoPagoModal:F,rif:r,setRif:i,setClienteInfo:g,ordenItems:u,handleUpdateQuantity:Re,addItemToOrder:$,handleSavePagos:ue,totalOrden:j,cambioDia:s}),e.jsx(Bt,{isOpen:y,onClose:()=>L(!1)}),e.jsx(qt,{isOpen:Me,onClose:()=>me(!1),onSelectVendedor:_=>{h(_._id),me(!1)},selectedVendedorId:l}),e.jsx(zt,{isOpen:E,onClose:()=>C(!1),onSelectClient:_=>{g(_),C(!1)}}),e.jsx("button",{className:"checkout-button",onClick:ke,disabled:u.length===0||!t||!l||A,children:"Crear Nota de Venta"}),D&&e.jsx("div",{className:"backdrop-imagen-ampliada",onClick:()=>X(null),children:e.jsx("img",{src:D,alt:"Imagen Ampliada",className:"imagen-ampliada"})})]})}function Qt(){return e.jsxs("div",{children:[e.jsx("h2",{className:"centrado",children:"ADMINISTRADOR DEMODA"}),e.jsx("h3",{className:"centrado font-x",children:"Links Directo a Aplicaciones"}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Tablas Dinamicas Consolidadas"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsx(z,{to:"/consolidadoventas",children:e.jsx("p",{className:"span-admin-consolidado",children:"Ventas Consolidadas (analitics)"})})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsx(z,{to:"/consolidadoarticulos",children:e.jsx("p",{className:"span-admin-consolidado",children:"Ventas por Articulos (analitics)"})})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Front-End (ventas al detal)"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://front-chacao-ems84m3vx-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Front-End Tienda Chacao"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://front-merpoeste-di4orofvq-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Front-End Tienda Merpoeste"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://planner-b4ey3we1w-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Planificador Tienda Chacao"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://horario-p9wma9x58-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Horarios Tienda Chacao"})]})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Control de Gastos"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://a-vite-project-q2dooo892-skynetfrank.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Control de Gastos Los Frailes"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://gastos-chacao2app-r0fuei42i-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Control de Gastos Chacao "})]})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route",children:[e.jsx("label",{children:"Otros"}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://intranet-v2-9drcsb58h-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Chat Intranet Demoda"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://admin-reseller-2vba5qtd7-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Administrador de Revendedores"})]})]}),e.jsxs("div",{className:"link-container",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://preorder-atn4pwqy4-skynetfrank.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Administrador de Preorden "})]})]})]})}),e.jsx("div",{className:"linktree-container",children:e.jsxs("span",{className:"span-route pd",children:[e.jsx("label",{children:"Plaza Dental"}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://plazadental-v2-j2g1jnntr-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Plaza Dental 2025 (nuevo)"})]})]}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://plaza-dental-ihm65vu3k-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Plaza Dental (Antiguo)"})]})]}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://plaza-stock-cpbxmd5c6-franklin-bolivars-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Inventario Plaza Dental"})]})]}),e.jsxs("div",{className:"link-container pd",children:[e.jsx(q,{}),e.jsxs("a",{href:"https://planner-plaza-9tp7wnvii-tyrant7995gmailcoms-projects.vercel.app/",rel:"nofollow noopener noreferrer",target:"_blank",children:[" ",e.jsx("p",{children:"Planificador Plaza Dental"})]})]})]})})]})}const Yt=()=>{var R;const{id:a}=Ce(),{data:s,isLoading:r,isError:i,error:t}=Gs(a),g=()=>{window.print()};if(r)return e.jsx("div",{className:"loading-container",children:"Cargando orden..."});if(i)return e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"Error al cargar la orden"}),e.jsx("p",{children:((R=t==null?void 0:t.data)==null?void 0:R.message)||t.error}),e.jsxs(z,{to:"/facturacion",className:"back-link",children:[e.jsx(je,{})," Volver"]})]});if(!s)return e.jsxs("div",{className:"error-container",children:[e.jsx("h2",{children:"No se encontró la orden"}),e.jsxs(z,{to:"/facturacion",className:"back-link",children:[e.jsx(je,{})," Volver"]})]});const{fecha:l,clienteInfo:h,orderItems:c,subtotal:u,descuento:x,iva:p,delivery:d,totalVenta:m,_id:n,pago:S}=s;return e.jsxs("div",{className:"print-order-container",children:[e.jsxs("div",{className:"print-controls",children:[e.jsxs(z,{to:"/facturacion",className:"back-button",children:[e.jsx(je,{})," Volver a Facturación"]}),e.jsxs("button",{onClick:g,className:"print-button",children:[e.jsx(He,{})," Imprimir"]})]}),e.jsxs("div",{className:"invoice-paper",children:[e.jsxs("header",{className:"invoice-header",children:[e.jsx("img",{src:te,alt:"Logo de la Tienda",className:"invoice-logo"}),e.jsxs("div",{className:"store-details",children:[e.jsx("h2",{children:"DEMODA"}),e.jsx("p",{children:"RIF: J-12345678-9"}),e.jsx("p",{children:"Dirección de la tienda"}),e.jsx("p",{children:"Teléfono: (0212) 555-1234"})]})]}),e.jsxs("section",{className:"order-info",children:[e.jsxs("div",{className:"order-meta",children:[e.jsx("h3",{children:"Orden de Venta"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nº:"})," ",n.slice(-6).toUpperCase()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha:"})," ",new Date(l).toLocaleDateString("es-VE")]})]}),e.jsxs("div",{className:"client-details",children:[e.jsx("h3",{children:"Cliente"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",h.nombre]}),e.jsxs("p",{children:[e.jsx("strong",{children:"RIF/CI:"})," ",h.rif]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",h.telefono]})]})]}),e.jsx("section",{className:"order-items",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Código"}),e.jsx("th",{children:"Descripción"}),e.jsx("th",{children:"Cant."}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Total"})]})}),e.jsx("tbody",{children:c.map(v=>e.jsxs("tr",{children:[e.jsx("td",{children:v.codigo}),e.jsxs("td",{children:[v.nombre," (Talla: ",v.talla,")"]}),e.jsx("td",{children:v.qty}),e.jsxs("td",{children:["$",Number(v.precio).toFixed(2)]}),e.jsxs("td",{children:["$",(v.qty*v.precio).toFixed(2)]})]},v._id))})]})}),e.jsx("section",{className:"order-summary",children:e.jsxs("div",{className:"summary-details",children:[e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["$",Number(u).toFixed(2)]})]}),x>0&&e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Descuento:"}),e.jsxs("span",{children:["-$",Number(x).toFixed(2)]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"IVA (16%):"}),e.jsxs("span",{children:["$",Number(p).toFixed(2)]})]}),d>0&&e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{children:"Delivery:"}),e.jsxs("span",{children:["$",Number(d).toFixed(2)]})]}),e.jsxs("div",{className:"summary-row total",children:[e.jsx("span",{children:"Total a Pagar:"}),e.jsxs("span",{children:["$",Number(m).toFixed(2)]})]})]})}),e.jsx("footer",{className:"invoice-footer",children:e.jsx("p",{children:"Gracias por su compra"})})]})]})};function Kt(a){const s=ae(),[r,i]=o.useState({codigo:"",categoria:"CALZADO",marca:"",modelo:"",color:"",genero:"",preciousd:"",tipo:"",tallas:{}}),[t,g]=o.useState(""),[l,h]=o.useState(""),[c,u]=o.useState(null),[x,p]=o.useState(!1),[d,m]=o.useState(0),[n,{isLoading:S,isSuccess:R,isError:v,error:j}]=er(),T=Xs.flatMap(E=>E.label),f=o.useMemo(()=>[...qs].sort(),[]),A=o.useMemo(()=>[...Ys].sort(),[]),U=o.useMemo(()=>[...Ks].sort(),[]),M=o.useMemo(()=>[...Qs].sort(),[]),k=o.useMemo(()=>Object.values(r.tallas).reduce((E,C)=>E+(Number(C)||0),0),[r.tallas]);o.useEffect(()=>{var E;v&&I.fire({title:"Codigo Ya Existe",text:((E=j==null?void 0:j.data)==null?void 0:E.message)||"Ocurrió un error al crear el producto.",icon:"error"}),R&&I.fire({title:"Producto Creado con Exito!",text:"Crear Producto",icon:"success"}).then(C=>{s("/verproductos")})},[R,v,j,s]),o.useEffect(()=>{if(!l)return;(()=>{p(!0);const C=new FormData;C.append("file",l),C.append("upload_preset","ronald_preset"),C.append("cloud_name","ronaldimg"),C.append("folder","productos"),fetch("https://api.cloudinary.com/v1_1/ronaldimg/image/upload",{method:"post",body:C}).then(N=>N.json()).then(N=>{m(100),g(N.secure_url)}).catch(N=>{I.fire("Error de Carga","No se pudo subir la imagen a Cloudinary.","error"),console.log(N)})})()},[l]);const w=async E=>{if(E.preventDefault(),!r.codigo){I.fire({title:"Falta el Codigo",text:"Crear Producto",icon:"warning"});return}if(r.codigo.length<5){I.fire({title:"Codigo Invalido..Verifique",text:"Crear Producto",icon:"warning"});return}if(!t){I.fire({title:"Debe Asociar una Imagen al Producto",text:"Crear Producto",icon:"warning"});return}try{await n({...r,existencia:k,imageurl:t}).unwrap()}catch(C){console.error("Fallo al crear el producto:",C)}},y=E=>{const{name:C,value:N}=E.target;i(F=>({...F,[C]:N}))},L=E=>{const{name:C,value:N}=E.target,F=N===""?0:Number(N);i(D=>{const X={...D.tallas,[C]:F};return F===0&&delete X[C],{...D,tallas:X}})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flx column pad-0 jcenter",children:[e.jsx("h2",{className:"editar pad-05",children:"NUEVO PRODUCTO"})," ",e.jsxs("form",{className:"signin-form",onSubmit:w,style:{maxWidth:"700px",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Información Principal"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Código"}),e.jsx("input",{type:"text",name:"codigo",required:!0,placeholder:"CODIGO",value:r.codigo.toUpperCase(),onChange:y})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Precio (USD)"}),e.jsx("input",{type:"number",name:"preciousd",required:!0,placeholder:"Ej: 25.00",value:r.preciousd,onChange:y})]})]})]}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Clasificación"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Categoría"}),e.jsx("select",{name:"categoria",value:r.categoria,onChange:y,required:!0,children:$s.map(E=>e.jsx("option",{value:E,children:E},E))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Género"}),e.jsxs("select",{name:"genero",value:r.genero,onChange:y,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),Hs.map(E=>e.jsx("option",{value:E,children:E},E))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Marca"}),e.jsxs("select",{name:"marca",value:r.marca,onChange:y,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),f.map(E=>e.jsx("option",{value:E,children:E},E))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Modelo"}),e.jsxs("select",{name:"modelo",value:r.modelo,onChange:y,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),A.map(E=>e.jsx("option",{value:E,children:E},E))]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tipo"}),e.jsxs("select",{name:"tipo",value:r.tipo,onChange:y,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),U.map(E=>e.jsx("option",{value:E,children:E},E))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Color"}),e.jsxs("select",{name:"color",value:r.color,onChange:y,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),M.map(E=>e.jsx("option",{value:E,children:E},E))]})]})]})]}),r.categoria==="CALZADO"&&r.genero&&e.jsxs("div",{className:"form-section w100p",children:[e.jsxs("h3",{children:["Existencia por Talla (",k," unidades)"]}),e.jsx("div",{className:"flx jcenter wrap pad-0",style:{gap:"0.5rem"},children:T.map(E=>r.categoria==="CALZADO"&&(r.genero==="Dama"&&(Number(E)<35||Number(E)>40||isNaN(E))||r.genero==="Caballero"&&(Number(E)<40||isNaN(E))||r.genero==="Niño"&&(Number(E)>35||isNaN(E)))?null:e.jsxs("div",{className:"edit-span-tallas",children:[e.jsx("span",{children:E}),e.jsx("input",{type:"number",value:r.tallas[E]||"",className:"input-talla",name:E,onChange:L,placeholder:"0"})]},E))})]}),e.jsxs("div",{className:"form-section w100p",children:[e.jsx("h3",{children:"Imagen del Producto"}),e.jsxs("div",{className:"edit-image-container mb-1 mtop-1",children:[e.jsxs("div",{className:"input-file-container",onClick:()=>document.querySelector(".input-field").click(),children:[e.jsx("input",{type:"file",accept:"image/*",className:"input-field",hidden:!0,onChange:({target:{files:E}})=>{E&&E[0]&&new us(E[0],{quality:.6,success:C=>{u(URL.createObjectURL(C)),h(C)}})}}),c?e.jsx("img",{src:c,alt:"Vista previa"}):e.jsxs("div",{className:"upload-icon",children:[e.jsx(ts,{size:48,color:"#888"}),e.jsx("p",{children:"Selecciona una imagen"})]})]}),x&&e.jsx("div",{className:"upload-img-info",children:d<100?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"animate-spin"}),e.jsx("span",{children:"Subiendo..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(os,{color:"green"}),e.jsx("span",{children:"Imagen Cargada"})]})}),e.jsx("p",{className:"font-x centrado",children:"Click en el recuadro para seleccionar o cambiar la imagen"})]})]}),e.jsx("div",{className:"form-actions w100p",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:S||x,children:[S||x?e.jsx("div",{className:"spinner"}):e.jsx(Ue,{}),e.jsx("span",{children:S?"Guardando...":"Guardar Producto"})]})})]})]})})}const ze={container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100vh - 200px)",textAlign:"center",backgroundColor:"#f8f9fa",borderRadius:"8px",margin:"1rem",padding:"2rem",color:"#495057"},title:{fontSize:"2.5rem",fontWeight:"bold",marginTop:"1rem"},text:{fontSize:"1.1rem",maxWidth:"500px",lineHeight:"1.6"}};function Ht(){return e.jsxs("div",{style:ze.container,children:[e.jsx(_a,{size:64,color:"#ffc107"}),e.jsx("h1",{style:ze.title,children:"Se Necesita Credenciales de Administrador "}),e.jsxs("p",{style:ze.text,children:["Este Modulo solo es visible por Administradores de D'MODA.",e.jsx("br",{}),"Ofrecemos disculpas por las molestias."]}),e.jsx(z,{to:"/",className:"header-login-button",style:{marginTop:"2rem"},children:"Volver al Inicio"})]})}function Xt(){var m;const{id:a}=Ce(),{data:s,isLoading:r,isError:i,error:t}=Gs(a);if(r)return e.jsx(ie,{txt:"Cargando detalles de la orden..."});if(i)return e.jsxs("div",{className:"empty-state",children:[e.jsx(cs,{size:48,color:"#dc3545"}),e.jsx("h2",{style:{color:"#dc3545"},children:"Error al Cargar la Orden"}),e.jsx("p",{children:((m=t==null?void 0:t.data)==null?void 0:m.message)||"No se pudo encontrar la orden especificada."}),e.jsxs(z,{to:"/verpedidos",className:"back-button-error",children:[e.jsx(je,{size:18})," Volver al listado"]})]});const{orderItems:g,subtotal:l,iva:h,totalVenta:c,delivery:u,clienteInfo:x,createdAt:p,pago:d}=s;return console.log("order",s),e.jsxs("div",{className:"order-detail-container",children:[e.jsxs("div",{className:"invoice-header",children:[e.jsx("img",{src:Xe,alt:"Logo de la Tienda",className:"invoice-logo"}),e.jsxs("div",{className:"store-details",children:[e.jsx("h2",{children:"DEMODA"}),e.jsx("p",{children:"RIF: J-50151733-9"}),e.jsx("p",{children:"Edif. Los Frailes, Piso 6. Chuao. Caracas"}),e.jsx("p",{children:"Teléfono: (0412) 611-3970"})]})]}),e.jsxs("div",{className:"order-detail-header",children:[e.jsxs("h1",{children:["Orden ",e.jsxs("span",{children:["...",s._id.substring(s._id.length-6)]})]}),e.jsxs("p",{className:"order-date",children:["Fecha: ",ee(p).format("DD/MM/YYYY")]}),e.jsxs(z,{to:"/verpedidos",className:"back-button",children:[e.jsx(je,{size:18}),e.jsx("span",{children:"Volver al listado"})]})]}),e.jsxs("div",{className:"order-detail-grid",children:[e.jsxs("div",{className:"order-detail-main",children:[e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Cliente"}),e.jsxs("div",{className:"client-details-list",children:[e.jsxs("p",{children:[e.jsx(se,{size:16})," ",e.jsx("strong",{children:x.nombre})]}),e.jsxs("p",{children:[e.jsx(Aa,{size:16})," RIF/CI: ",x.rif]}),e.jsxs("p",{children:[e.jsx(ve,{size:16})," ",e.jsx("a",{href:`mailto:${x.email}`,children:x.email||"N/A"})]}),e.jsxs("p",{children:[e.jsx(Pe,{size:16})," ",x.celular||"N/A"]}),e.jsxs("p",{children:[e.jsx(is,{size:16})," ",x.direccion||"N/A"]})]})]}),e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Artículos del Pedido"}),e.jsx("div",{className:"order-items-list-detail",children:g.map(n=>e.jsxs("div",{className:"order-item-detail",children:[e.jsx("img",{src:n.imageurl,alt:n.nombre,className:"order-item-image-detail"}),e.jsxs("div",{className:"order-item-info-detail",children:[e.jsx("p",{className:"item-name",children:n.marca}),e.jsxs("p",{className:"item-meta",children:[n.qty," x $",n.precio.toFixed(2)]})]}),e.jsxs("p",{className:"order-item-total-detail",children:["$",(n.qty*n.precio).toFixed(2)]})]},n._id))})]})]}),e.jsxs("div",{className:"order-detail-sidebar",children:[e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Resumen del Pedido"}),e.jsxs("div",{className:"summary-list",children:[e.jsxs("div",{className:"summary-row-detail",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",l.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row-detail",children:[e.jsx("span",{children:"Envío"}),e.jsxs("span",{children:["$",u.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row-detail",children:[e.jsx("span",{children:"IVA"}),e.jsxs("span",{children:["$",h.toFixed(2)]})]}),e.jsxs("div",{className:"summary-row-detail total",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",c.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"detail-card",children:[e.jsx("h2",{className:"detail-card-title",children:"Estado del Pago"}),(d==null?void 0:d.length)>0?e.jsx("div",{className:"payment-details-list",children:d.map((n,S)=>e.jsxs("div",{className:"status-box paid",children:[e.jsx(Da,{size:20}),e.jsxs("div",{children:[e.jsxs("p",{className:"status-title",children:[n.tipo,": $",n.monto.toFixed(2)]}),e.jsxs("p",{className:"status-text",children:["Realizado el ",ee(n.fecha).format("DD/MM/YYYY")]})]})]},S))}):e.jsxs("div",{className:"status-box pending",children:[e.jsx(ls,{size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"status-title",children:"Estado del Pago"}),e.jsx("p",{className:"status-text",children:"Pendiente de Pago"})]})]})]})]})]})]})}const Wt=({currentPage:a,totalPages:s,onPageChange:r})=>{if(s<=1)return null;const i=()=>{a>1&&r(a-1)},t=()=>{a<s&&r(a+1)},g=()=>{const l=[];if(s<=5)for(let c=1;c<=s;c++)l.push(c);else{let c=Math.max(1,a-2),u=Math.min(s,a+2);a<=3?(c=1,u=5):a>=s-2&&(c=s-5+1,u=s);for(let x=c;x<=u;x++)l.push(x)}return l};return e.jsxs("div",{className:"pagination-container",children:[e.jsxs("button",{onClick:i,disabled:a===1,className:"pagination-button",children:[e.jsx(Oa,{size:18})," Anterior"]}),g().map(l=>e.jsx("button",{onClick:()=>r(l),className:`pagination-button ${a===l?"active":""}`,children:l},l)),e.jsxs("button",{onClick:t,disabled:a===s,className:"pagination-button",children:["Siguiente ",e.jsx(ds,{size:18})]})]})};function Jt(){var w;const{data:a,isLoading:s,isError:r,error:i}=xt(),[t,g]=o.useState(1),[l]=o.useState(15),[h,c]=o.useState(""),[u,x]=o.useState(""),[p,d]=o.useState(""),[m,n]=o.useState({key:"fecha",direction:"descending"}),S=o.useMemo(()=>{let y=a?[...a]:[];return m.key!==null&&y.sort((L,E)=>{var F,D;const C=m.key==="cliente"?(F=L.clienteInfo)==null?void 0:F.nombre:L[m.key],N=m.key==="cliente"?(D=E.clienteInfo)==null?void 0:D.nombre:E[m.key];return C<N?m.direction==="ascending"?-1:1:C>N?m.direction==="ascending"?1:-1:0}),y},[a,m]);if(s)return e.jsx(ie,{txt:"Cargando órdenes..."});if(r)return e.jsxs("div",{className:"empty-state",children:[e.jsx(cs,{size:48,color:"#dc3545"}),e.jsx("h2",{style:{color:"#dc3545"},children:"Error al Cargar Órdenes"}),e.jsx("p",{children:((w=i==null?void 0:i.data)==null?void 0:w.message)||i.error})]});const R=S?S.filter(y=>{var F;const L=ee(y.fecha),E=(F=y.clienteInfo)==null?void 0:F.nombre.toLowerCase().includes(h.toLowerCase()),C=u?L.isAfter(ee(u).startOf("day").subtract(1,"second")):!0,N=p?L.isBefore(ee(p).endOf("day")):!0;return E&&C&&N}):[],v=Math.ceil(R.length/l),j=t*l,T=j-l,f=R.slice(T,j),A=y=>{g(y)},U=y=>{c(y.target.value),g(1)},M=()=>{c(""),x(""),d(""),g(1),n({key:"fecha",direction:"descending"})},k=y=>{let L="ascending";m.key===y&&m.direction==="ascending"&&(L="descending"),n({key:y,direction:L}),g(1)};return e.jsxs("div",{className:"order-list-container",children:[e.jsxs("div",{className:"order-list-header",children:[e.jsx("h1",{className:"section-title",children:"Historial de Órdenes"}),e.jsxs("div",{className:"filters-container",children:[e.jsxs("div",{className:"date-filter-container",children:[e.jsx("label",{htmlFor:"startDate",children:"Desde:"}),e.jsx("input",{type:"date",id:"startDate",value:u,onChange:y=>x(y.target.value)}),e.jsx("label",{htmlFor:"endDate",children:"Hasta:"}),e.jsx("input",{type:"date",id:"endDate",value:p,onChange:y=>d(y.target.value)})]}),e.jsxs("div",{className:"search-input-container",children:[e.jsx(rs,{className:"search-input-icon"}),e.jsx("input",{type:"text",placeholder:"Buscar por cliente...",value:h,onChange:U})]}),e.jsxs("button",{onClick:M,className:"clear-filters-btn",children:[e.jsx(Ke,{size:16})," Limpiar"]})]})]}),a&&a.length>0?e.jsxs("div",{className:"table-responsive-container",children:[e.jsxs("table",{className:"order-list-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"sortable-header",onClick:()=>k("_id"),children:["ID Orden"," ",m.key==="_id"&&(m.direction==="ascending"?e.jsx(be,{size:14}):e.jsx(Te,{size:14}))]}),e.jsxs("th",{className:"sortable-header",onClick:()=>k("fecha"),children:["Fecha"," ",m.key==="fecha"&&(m.direction==="ascending"?e.jsx(be,{size:14}):e.jsx(Te,{size:14}))]}),e.jsxs("th",{className:"sortable-header",onClick:()=>k("cliente"),children:["Cliente"," ",m.key==="cliente"&&(m.direction==="ascending"?e.jsx(be,{size:14}):e.jsx(Te,{size:14}))]}),e.jsxs("th",{className:"sortable-header",onClick:()=>k("totalVenta"),children:["Total"," ",m.key==="totalVenta"&&(m.direction==="ascending"?e.jsx(be,{size:14}):e.jsx(Te,{size:14}))]}),e.jsx("th",{children:"Pagado"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:f.map(y=>{var L,E;return e.jsxs("tr",{children:[e.jsxs("td",{children:["...",y._id.substring(y._id.length-6)]}),e.jsx("td",{children:ee(y.fecha).format("DD/MM/YYYY")}),e.jsx("td",{children:(L=y.clienteInfo)==null?void 0:L.nombre.toUpperCase()}),e.jsxs("td",{className:"total-amount",children:["$",(E=y==null?void 0:y.totalVenta)==null?void 0:E.toFixed(2)]}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${y.isPaid?"status-paid":"status-pending"}`,children:y.isPaid?"Pagado":"Pendiente"})}),e.jsx("td",{children:e.jsx(H,{text:"Ver Detalles",children:e.jsx(z,{to:`/order/${y._id}`,className:"action-btn",children:e.jsx(de,{size:20})})})})]},y._id)})})]}),R.length>0?e.jsx(Wt,{currentPage:t,totalPages:v,onPageChange:A}):e.jsx("p",{className:"no-results-message",children:"No se encontraron órdenes que coincidan con la búsqueda."})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx(La,{size:48}),e.jsx("p",{children:"Aún no se han registrado órdenes."})]})]})}const Zt=a=>async s=>{s({type:ws,payload:a});try{const{data:r}=await Ne.get(`/api/productos/${a}`);s({type:Fs,payload:r})}catch(r){s({type:ks,payload:r.response&&r.response.data.message?r.response.data.message:r.message})}};function eo(a){const s=Ce(),{id:r}=s;o.useRef("");const[i,t]=o.useState(0),g=Q(d=>d.userSignin),{userInfo:l}=g,h=Q(d=>d.productDetails),{product:c}=h,u=oe();o.useEffect(()=>{(!c||c._id!==r)&&u(Zt(r))},[u,c,r]);const x=()=>{window.print()},p=()=>{var d=document.getElementById("inputs").children;let m=[];Array.from(d).forEach(function(n){m.push(n.children[0].value)}),t(m.reduce((n,S)=>n+Number(S),0))};return e.jsxs("div",{children:[e.jsx("div",{className:"flx sb",children:e.jsx(z,{to:"/",className:"back-link",children:"volver"})}),c?e.jsxs("div",{className:"flx column",children:[e.jsx("h2",{children:"Inversiones Paul 2428, C.A."}),e.jsx("h2",{children:"Conteo Rapido"}),e.jsxs("p",{children:["Realizado por: ",(l==null?void 0:l.nombre)+" "+(l==null?void 0:l.apellido)]}),e.jsxs("p",{children:["Fecha: ",ee(new Date).format("DD/MM/YYYY  hh:mm a")]}),e.jsx("button",{className:"btn-icon-container",onClick:x,children:e.jsx(He,{})}),e.jsxs("div",{className:" flx column astart mtop-2 mb",children:[e.jsxs("h1",{children:["Codigo: ",c==null?void 0:c.codigo]}),e.jsxs("h1",{children:["Marca: ",c==null?void 0:c.marca]}),e.jsxs("h1",{children:["Modelo: ",c==null?void 0:c.modelo," "]}),e.jsxs("h1",{children:["Color: ",c==null?void 0:c.color," "]})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"mb centrado",children:["Contados: ",i," pares"]}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsx("tr",{children:Object.keys(c.tallas).map((d,m)=>e.jsx("th",{children:d},m))})}),e.jsx("tbody",{children:e.jsx("tr",{id:"inputs",children:Object.keys(c.tallas).map((d,m)=>e.jsx("td",{children:e.jsx("input",{type:"number",className:"w-40 txt-align-r",onChange:()=>p()})},m))})})]})]}),e.jsxs("div",{className:"mtop-3",children:[e.jsx("p",{className:"",children:"Observaciones:"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"}),e.jsx("hr",{className:"minw-400 pad-2"})]})]}):""]})}function so({data:a,columns:s,filterInput:r,botonera:i,filterValue:t,filas:g,renderSubComponent:l,getRowCanExpand:h}){const[c,u]=o.useState([]),[x,p]=o.useState(t),[d,m]=o.useState({pageIndex:0,pageSize:g||20}),[n,S]=o.useState({}),R=ms({data:a,columns:s,state:{sorting:c,globalFilter:x,pagination:d,expanded:n},onSortingChange:u,onGlobalFilterChange:p,onPaginationChange:m,onExpandedChange:S,getRowCanExpand:h,getCoreRowModel:gs(),getPaginationRowModel:xs(),getSortedRowModel:hs(),getFilteredRowModel:ps(),getExpandedRowModel:js()}),v=()=>{p("")};return e.jsxs("div",{className:"flx column pad-0",children:[r?e.jsxs("div",{className:"flx pad-0",children:[e.jsx("input",{className:"border-1 pad-05 w-200",type:"text",value:x,placeholder:"Buscar",onChange:j=>p(j.target.value)}),e.jsx("button",{className:"close-button",onClick:v,children:"x"})]}):"",e.jsxs("table",{className:"styled-table",children:[e.jsx("thead",{children:R.getHeaderGroups().map(j=>e.jsx("tr",{children:j.headers.map(T=>e.jsx("th",{onClick:T.column.getToggleSortingHandler(),children:T.isPlaceholder?null:e.jsxs("div",{children:[ne(T.column.columnDef.header,T.getContext()),{asc:"⬆️",desc:"⬇️"}[T.column.getIsSorted()??null]]})},T.id))},j.id))}),e.jsx("tbody",{children:R.getRowModel().rows.map(j=>e.jsxs(o.Fragment,{children:[e.jsx("tr",{children:j.getVisibleCells().map((T,f)=>e.jsx("td",{children:ne(T.column.columnDef.cell,T.getContext())},f))}),j.getIsExpanded()&&l&&e.jsx("tr",{children:e.jsx("td",{colSpan:j.getVisibleCells().length,children:l({row:j})})})]},j.id))})]}),i?e.jsxs("div",{className:"botonera-reporte",children:[e.jsx("button",{className:"minw-70",onClick:()=>R.setPageIndex(0),children:"primero"}),e.jsx("button",{className:"minw-70",onClick:()=>R.previousPage(),children:"anterior"}),e.jsx("button",{className:"minw-70",onClick:()=>R.nextPage(),children:"siguiente"}),e.jsx("button",{className:"minw-70",onClick:()=>R.setPageIndex(R.getPageCount()-1),children:"Ultimo"}),e.jsxs("span",{className:"font-x negrita",children:["Pagina ",R.getState().pagination.pageIndex+1," de ",R.getPageCount()]})]}):""]})}const Je=a=>typeof a!="number"?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a);function ao(){const a=ae(),{data:s,isLoading:r,isError:i}=jt(),t=({row:l})=>{const{itemsSold:h}=l.original;return e.jsxs("div",{style:{padding:"10px 20px",background:"#f1f1f1"},children:[e.jsx("h4",{children:"Artículos Vendidos en el Día"}),e.jsxs("table",{className:"sub-table",style:{width:"100%",fontSize:"1.2rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"left"},children:"Producto"}),e.jsx("th",{style:{textAlign:"center"},children:"Talla"}),e.jsx("th",{style:{textAlign:"center"},children:"Cant."}),e.jsx("th",{style:{textAlign:"right"},children:"Total Venta"})]})}),e.jsx("tbody",{children:h.map((c,u)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flx",style:{gap:"10px"},children:[e.jsx("img",{src:c.imageurl,alt:c.nombre,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"4px"}}),e.jsxs("span",{children:[c.nombre," (",c.codigo,")"]})]})}),e.jsx("td",{style:{textAlign:"center"},children:c.talla}),e.jsx("td",{style:{textAlign:"center"},children:c.qty}),e.jsx("td",{style:{textAlign:"right"},children:Je(c.totalVentaItem)})]},u))})]})]})},g=o.useMemo(()=>[{header:"Dia",accessorKey:"_id",cell:l=>{const[h,c,u]=l.getValue().split("-");return`${u}-${c}-${h}`}},{header:"Ventas",accessorKey:"totalOrders"},{header:"Monto US$",accessorKey:"totalSales",cell:l=>Je(l.getValue())},{id:"expander",header:()=>null,cell:({row:l})=>l.getCanExpand()?e.jsxs("button",{className:"btn-icon-container flx",style:{gap:"0.5rem",border:"none",background:"transparent",cursor:"pointer"},onClick:l.getToggleExpandedHandler(),children:[e.jsx("span",{style:{fontWeight:500,fontSize:"1.2rem"},children:"Detalle"}),l.getIsExpanded()?e.jsx(qe,{size:16}):e.jsx(ds,{size:16})]}):null}],[a]);return e.jsxs("div",{children:[e.jsx("div",{className:"flx jcenter",children:e.jsx("h2",{className:"centrado",children:"Reporte de Ventas Diarias"})}),r?e.jsx("span",{children:"descargando datos del Servidor..."}):i?e.jsx("span",{children:"Error al cargar los datos."}):e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx("div",{children:s?e.jsx(so,{data:s,columns:g,filterInput:!1,botonera:!0,renderSubComponent:t,getRowCanExpand:()=>!0}):""})})})]})}const ro=sa(aa(e.jsxs(B,{path:"/",element:e.jsx(Ja,{}),children:[e.jsx(B,{index:!0,element:e.jsx(Tt,{})}),e.jsx(B,{path:"/verproductos",element:e.jsx(Pt,{})}),e.jsx(B,{path:"/verpedidos",element:e.jsx(Jt,{})}),e.jsx(B,{path:"/signin",element:e.jsx(St,{})}),e.jsx(B,{path:"/register",element:e.jsx(Ct,{})}),e.jsxs(B,{path:"",element:e.jsx(ft,{}),children:[e.jsx(B,{path:"/admin-menu",element:e.jsx(Qt,{})}),e.jsx(B,{path:"/profile",element:e.jsx(Nt,{})}),e.jsx(B,{path:"/reporteclientes",element:e.jsx(It,{})}),e.jsx(B,{path:"/ventasdiarias",element:e.jsx(ao,{})})]}),e.jsx(B,{path:"/product/:id/edit",element:e.jsx(At,{})}),e.jsx(B,{path:"/cliente/:id/edit",element:e.jsx(Ot,{})}),e.jsx(B,{path:"/facturacion",element:e.jsx($t,{})}),e.jsx(B,{path:"/order/:id",element:e.jsx(Xt,{})}),e.jsx(B,{path:"/print/order/:id",element:e.jsx(Yt,{})}),e.jsx(B,{path:"/crearproducto",element:e.jsx(Kt,{})}),e.jsx(B,{path:"/enconstruccion",element:e.jsx(Ht,{})}),e.jsx(B,{path:"/conteorapido/:id",element:e.jsx(eo,{})})]})));Zs.createRoot(document.getElementById("root")).render(e.jsx(na,{store:Bs,children:e.jsx(Ae.StrictMode,{children:e.jsx(ra,{router:ro})})}));
